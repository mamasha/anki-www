var app=function(){"use strict";function e(){}Array.prototype.str=function(e,t){return e??=",",`[${(t?this.map((e=>t(e))):this).join(e)}]`},Array.prototype.take=function(e){return this.slice(0,e)},Array.prototype.removeDuplicates=function(e){e??=(e,t)=>e===t;var t=[];return this.forEach((n=>{for(let r of t)if(e(n,r))return;t.push(n)})),t},Set.prototype.diff=function(e){let t=new Set(this);for(let n of e)t.delete(n);return t},Set.prototype.includes=function(e){for(let t of e)if(!this.has(t))return!1;return!0},Set.prototype.include=function(e){for(let t of e)this.add(t)},Set.prototype.str=function(e=","){return`[${[...this].join(e)}]`},String.prototype.splitTrim=function(e){return this.split(e).map((e=>e.trim()))},String.prototype.splitTrimNoEmpties=function(e){return this.split(e).map((e=>e.trim())).filter((e=>e.length>0))};const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function u(e){e.forEach(n)}function i(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(e,t,n){e.$$.on_destroy.push(s(t,n))}function l(e,t,n,r){return e[1]&&r?function(e,t){for(const n in t)e[n]=t[n];return e}(n.ctx.slice(),e[1](r(t))):n.ctx}function c(e){return null==e?"":e}function f(t){return t&&i(t.destroy)?t.destroy:e}const d="undefined"!=typeof window;let p=d?()=>window.performance.now():()=>Date.now(),h=d?e=>requestAnimationFrame(e):e;const g=new Set;function D(e){g.forEach((t=>{t.c(e)||(g.delete(t),t.f())})),0!==g.size&&h(D)}function m(e,t){e.appendChild(t)}function $(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function v(e){const t=w("style");return function(e,t){m(e.head||e,t),t.sheet}($(e),t),t.sheet}function C(e,t,n){e.insertBefore(t,n||null)}function F(e){e.parentNode&&e.parentNode.removeChild(e)}function A(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function w(e){return document.createElement(e)}function E(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function y(e){return document.createTextNode(e)}function b(){return y(" ")}function x(){return y("")}function B(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function N(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function k(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function M(e,t,n,r){null===n?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function S(e,t,n){e.classList[n?"add":"remove"](t)}function q(e,t){return new e(t)}const z=new Map;let O,I=0;function L(e,t,n,r,u,i,o,s=0){const a=16.666/r;let l="{\n";for(let e=0;e<=1;e+=a){const r=t+(n-t)*i(e);l+=100*e+`%{${o(r,1-r)}}\n`}const c=l+`100% {${o(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(c)}_${s}`,d=$(e),{stylesheet:p,rules:h}=z.get(d)||function(e,t){const n={stylesheet:v(t),rules:{}};return z.set(e,n),n}(d,e);h[f]||(h[f]=!0,p.insertRule(`@keyframes ${f} ${c}`,p.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${f} ${r}ms linear ${u}ms 1 both`,I+=1,f}function P(e,t){const n=(e.style.animation||"").split(", "),r=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),u=n.length-r.length;u&&(e.style.animation=r.join(", "),I-=u,I||h((()=>{I||(z.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&F(t)})),z.clear())})))}function _(e){O=e}function T(){if(!O)throw new Error("Function called outside component initialization");return O}function V(e){T().$$.on_mount.push(e)}function H(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach((e=>e.call(this,t)))}const R=[],j=[],Z=[],U=[],J=Promise.resolve();let W=!1;function G(){W||(W=!0,J.then(te))}function X(){return G(),J}function Y(e){Z.push(e)}const Q=new Set;let K,ee=0;function te(){const e=O;do{for(;ee<R.length;){const e=R[ee];ee++,_(e),ne(e.$$)}for(_(null),R.length=0,ee=0;j.length;)j.pop()();for(let e=0;e<Z.length;e+=1){const t=Z[e];Q.has(t)||(Q.add(t),t())}Z.length=0}while(R.length);for(;U.length;)U.pop()();W=!1,Q.clear(),_(e)}function ne(e){if(null!==e.fragment){e.update(),u(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Y)}}function re(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:r=!1}={}){const u=document.createEvent("CustomEvent");return u.initCustomEvent(e,n,r,t),u}(`${t?"intro":"outro"}${n}`))}const ue=new Set;let ie;function oe(){ie={r:0,c:[],p:ie}}function se(){ie.r||u(ie.c),ie=ie.p}function ae(e,t){e&&e.i&&(ue.delete(e),e.i(t))}function le(e,t,n,r){if(e&&e.o){if(ue.has(e))return;ue.add(e),ie.c.push((()=>{ue.delete(e),r&&(n&&e.d(1),r())})),e.o(t)}else r&&r()}const ce={duration:0};function fe(n,r,o,s){const a={direction:"both"};let l=r(n,o,a),c=s?0:1,f=null,d=null,m=null;function $(){m&&P(n,m)}function v(e,t){const n=e.b-c;return t*=Math.abs(n),{a:c,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function C(r){const{delay:i=0,duration:o=300,easing:s=t,tick:a=e,css:C}=l||ce,F={start:p()+i,b:r};r||(F.group=ie,ie.r+=1),f||d?d=F:(C&&($(),m=L(n,c,r,o,i,s,C)),r&&a(0,1),f=v(F,o),Y((()=>re(n,r,"start"))),function(e){let t;0===g.size&&h(D),new Promise((n=>{g.add(t={c:e,f:n})}))}((e=>{if(d&&e>d.start&&(f=v(d,o),d=null,re(n,f.b,"start"),C&&($(),m=L(n,c,f.b,f.duration,0,s,l.css))),f)if(e>=f.end)a(c=f.b,1-c),re(n,f.b,"end"),d||(f.b?$():--f.group.r||u(f.group.c)),f=null;else if(e>=f.start){const t=e-f.start;c=f.a+f.d*s(t/f.duration),a(c,1-c)}return!(!f&&!d)})))}return{run(e){i(l)?(K||(K=Promise.resolve(),K.then((()=>{K=null}))),K).then((()=>{l=l(a),C(e)})):C(e)},end(){$(),f=d=null}}}function de(e,t){le(e,1,1,(()=>{t.delete(e.key)}))}function pe(e,t,n,r,u,i,o,s,a,l,c,f){let d=e.length,p=i.length,h=d;const g={};for(;h--;)g[e[h].key]=h;const D=[],m=new Map,$=new Map;for(h=p;h--;){const e=f(u,i,h),s=n(e);let a=o.get(s);a?r&&a.p(e,t):(a=l(s,e),a.c()),m.set(s,D[h]=a),s in g&&$.set(s,Math.abs(h-g[s]))}const v=new Set,C=new Set;function F(e){ae(e,1),e.m(s,c),o.set(e.key,e),c=e.first,p--}for(;d&&p;){const t=D[p-1],n=e[d-1],r=t.key,u=n.key;t===n?(c=t.first,d--,p--):m.has(u)?!o.has(r)||v.has(r)?F(t):C.has(u)?d--:$.get(r)>$.get(u)?(C.add(r),F(t)):(v.add(u),d--):(a(n,o),d--)}for(;d--;){const t=e[d];m.has(t.key)||a(t,o)}for(;p;)F(D[p-1]);return D}function he(e){e&&e.c()}function ge(e,t,r,o){const{fragment:s,after_update:a}=e.$$;s&&s.m(t,r),o||Y((()=>{const t=e.$$.on_mount.map(n).filter(i);e.$$.on_destroy?e.$$.on_destroy.push(...t):u(t),e.$$.on_mount=[]})),a.forEach(Y)}function De(e,t){const n=e.$$;null!==n.fragment&&(u(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function me(t,n,i,o,s,a,l,c=[-1]){const f=O;_(t);const d=t.$$={fragment:null,ctx:[],props:a,update:e,not_equal:s,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(f?f.$$.context:[])),callbacks:r(),dirty:c,skip_bound:!1,root:n.target||f.$$.root};l&&l(d.root);let p=!1;if(d.ctx=i?i(t,n.props||{},((e,n,...r)=>{const u=r.length?r[0]:n;return d.ctx&&s(d.ctx[e],d.ctx[e]=u)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](u),p&&function(e,t){-1===e.$$.dirty[0]&&(R.push(e),G(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}(t,e)),n})):[],d.update(),p=!0,u(d.before_update),d.fragment=!!o&&o(d.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);d.fragment&&d.fragment.l(e),e.forEach(F)}else d.fragment&&d.fragment.c();n.intro&&ae(t.$$.fragment),ge(t,n.target,n.anchor,n.customElement),te()}_(f)}class $e{$destroy(){De(this,1),this.$destroy=e}$on(t,n){if(!i(n))return e;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function ve(t){let n;return{c(){n=w("p"),n.textContent="Oops..."},m(e,t){C(e,n,t)},p:e,i:e,o:e,d(e){e&&F(n)}}}class Ce extends $e{constructor(e){super(),me(this,e,null,ve,o,{})}}const Fe=[];function Ae(e,t){return{subscribe:we(e,t).subscribe}}function we(t,n=e){let r;const u=new Set;function i(e){if(o(t,e)&&(t=e,r)){const e=!Fe.length;for(const e of u)e[1](),Fe.push(e,t);if(e){for(let e=0;e<Fe.length;e+=2)Fe[e][0](Fe[e+1]);Fe.length=0}}}return{set:i,update:function(e){i(e(t))},subscribe:function(o,s=e){const a=[o,s];return u.add(a),1===u.size&&(r=n(i)||e),o(t),()=>{u.delete(a),0===u.size&&(r(),r=null)}}}}const Ee=function(){let e=[],t=()=>{},n=!0;function r(r,u,i,o){let s=`${r} ${u}`,a=i&&"function"!=typeof i?i.message:void 0;a&&(s+=` (${a})`),o??=i&&"function"==typeof i?i:e=>console.log(e),n&&o(s),e.push(s),t(e)}let u=new Set;return{lines:Ae(e,(e=>(t=e,()=>t=()=>{}))),info:(e,t,n)=>{r("I",e,t,n)},error:(e,t,n)=>{r("E",e,t,n)},noConsoleLog:()=>n=!1,onerror:function(e,t){try{return e()}catch(e){throw function(e,t){u.has(e)||(u.add(e),t(e),console.trace())}(e,t),e}}}}(),ye=console.log;function be(e,t){throw Ee.error(e,t),new Error(e)}function xe(e,t,n){if(e)return;let r="Assertion failed";t&&"function"!=typeof t&&(r+=`: (${t})`),n??=t&&"function"==typeof t?t:void 0,be(r,n)}function Be(e,t,n){const r=e.slice();return r[2]=t[n],r}function Ne(e){let t,n,r,u=e[2]+"";return{c(){t=w("p"),n=y(u),r=b(),N(t,"class","text-xs text-left")},m(e,u){C(e,t,u),m(t,n),m(t,r)},p(e,t){1&t&&u!==(u=e[2]+"")&&k(n,u)},d(e){e&&F(t)}}}function ke(t){let n,r=t[0],u=[];for(let e=0;e<r.length;e+=1)u[e]=Ne(Be(t,r,e));return{c(){for(let e=0;e<u.length;e+=1)u[e].c();n=x()},m(e,t){for(let n=0;n<u.length;n+=1)u[n].m(e,t);C(e,n,t)},p(e,[t]){if(1&t){let i;for(r=e[0],i=0;i<r.length;i+=1){const o=Be(e,r,i);u[i]?u[i].p(o,t):(u[i]=Ne(o),u[i].c(),u[i].m(n.parentNode,n))}for(;i<u.length;i+=1)u[i].d(1);u.length=r.length}},i:e,o:e,d(e){A(u,e),e&&F(n)}}}function Me(e,t,n){let r,{lines:u}=Ee;return a(e,u,(e=>n(0,r=e))),[r,u]}class Se extends $e{constructor(e){super(),me(this,e,Me,ke,o,{})}}function qe(e){let t,n,r,u,i,o;const s=e[6].default,a=function(e,t,n,r){if(e){const u=l(e,t,n,r);return e[0](u)}}(s,e,e[5],null);return{c(){t=w("div"),a&&a.c(),N(t,"class",n="my-grid w-full h-full "+e[2]+" "+e[3]+" svelte-ytrcuc"),N(t,"style",r="grid-area:"+e[1]+"; --areas: "+e[0].areas+"; --cols: "+e[0].cols+"; --rows: "+e[0].rows+"; "+e[4])},m(n,r){var s;C(n,t,r),a&&a.m(t,null),u=!0,i||(o=B(t,"click",(s=e[7],function(e){e.target===this&&s.call(this,e)})),i=!0)},p(e,[i]){a&&a.p&&(!u||32&i)&&function(e,t,n,r,u,i){if(u){const o=l(t,n,r,i);e.p(o,u)}}(a,s,e,e[5],u?function(e,t,n,r){if(e[2]&&r){const u=e[2](r(n));if(void 0===t.dirty)return u;if("object"==typeof u){const e=[],n=Math.max(t.dirty.length,u.length);for(let r=0;r<n;r+=1)e[r]=t.dirty[r]|u[r];return e}return t.dirty|u}return t.dirty}(s,e[5],i,null):function(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}(e[5]),null),(!u||12&i&&n!==(n="my-grid w-full h-full "+e[2]+" "+e[3]+" svelte-ytrcuc"))&&N(t,"class",n),(!u||19&i&&r!==(r="grid-area:"+e[1]+"; --areas: "+e[0].areas+"; --cols: "+e[0].cols+"; --rows: "+e[0].rows+"; "+e[4]))&&N(t,"style",r)},i(e){u||(ae(a,e),u=!0)},o(e){le(a,e),u=!1},d(e){e&&F(t),a&&a.d(e),i=!1,o()}}}function ze(e,t){let n=(r="get-bg-color",T().$$.context.get(r));var r;if(!n)return t??"bg-transparent";return n(e,t)}function Oe(e,t,n){let{$$slots:r={},$$scope:u}=t,{layout:i}=t,{ga:o="unset"}=t,{bgColor:s=ze(o)}=t,{clazz:a=""}=t,{style:l=""}=t;var c,f;return c="get-bg-color",f=function(e,t){return i.bgColors?i.bgColors[e]??t??"bg-transparent":t??"bg-transparent"},T().$$.context.set(c,f),e.$$set=e=>{"layout"in e&&n(0,i=e.layout),"ga"in e&&n(1,o=e.ga),"bgColor"in e&&n(2,s=e.bgColor),"clazz"in e&&n(3,a=e.clazz),"style"in e&&n(4,l=e.style),"$$scope"in e&&n(5,u=e.$$scope)},[i,o,s,a,l,u,r,function(t){H.call(this,e,t)}]}class Ie extends $e{constructor(e){super(),me(this,e,Oe,qe,o,{layout:0,ga:1,bgColor:2,clazz:3,style:4})}}const Le=function(){let e,t=[],n=0;function r(){e(t.length>0?t[n%t.length]:"")}return{current:Ae("",(t=>{e=t})),add:(e,u=!1)=>{V((()=>(t.push(e),u&&(n=t.length-1),r(),()=>{t=t.filter((t=>t!==e)),r()})))},next:()=>{n++,r()}}}();function Pe(t){let n,r,u,i;return{c(){n=w("span"),r=y(t[1]),N(n,"class","text-xs text-gray-300"),M(n,"grid-area",t[0])},m(e,o){C(e,n,o),m(n,r),u||(i=B(n,"click",t[4]),u=!0)},p(e,[t]){2&t&&k(r,e[1]),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),u=!1,i()}}}function _e(e,t,n){let r,{ga:u}=t,{v:i}=t;Le.add(i,!0);let{current:o}=Le;a(e,o,(e=>n(1,r=e)));return e.$$set=e=>{"ga"in e&&n(0,u=e.ga),"v"in e&&n(3,i=e.v)},[u,r,o,i,()=>Le.next()]}class Te extends $e{constructor(e){super(),me(this,e,_e,Pe,o,{ga:0,v:3})}}function Ve(t){let n,r;return{c(){n=w("span"),r=y(t[1]),N(n,"class","text-xs text-gray-400"),M(n,"grid-area",t[0])},m(e,t){C(e,n,t),m(n,r)},p(e,[t]){2&t&&k(r,e[1]),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n)}}}function He(e,t,n){let{ga:r}=t,{text:u}=t;return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"text"in e&&n(1,u=e.text)},[r,u]}class Re extends $e{constructor(e){super(),me(this,e,He,Ve,o,{ga:0,text:1})}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function je(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ze(e){var t={exports:{}};return e(t,t.exports),t.exports}var Ue=Ze((function(e,t){e.exports=function(){function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e((function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)})),n=e((function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}));n.version;var r=function(e){return"object"==typeof e?null!==e:"function"==typeof e},u=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e},i=function(e){try{return!!e()}catch(e){return!0}},o=!i((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),s=t.document,a=r(s)&&r(s.createElement),l=function(e){return a?s.createElement(e):{}},c=!o&&!i((function(){return 7!=Object.defineProperty(l("div"),"a",{get:function(){return 7}}).a})),f=function(e,t){if(!r(e))return e;var n,u;if(t&&"function"==typeof(n=e.toString)&&!r(u=n.call(e)))return u;if("function"==typeof(n=e.valueOf)&&!r(u=n.call(e)))return u;if(!t&&"function"==typeof(n=e.toString)&&!r(u=n.call(e)))return u;throw TypeError("Can't convert object to primitive value")},d=Object.defineProperty,p=o?Object.defineProperty:function(e,t,n){if(u(e),t=f(t,!0),u(n),c)try{return d(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e},h={f:p},g=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}},D=o?function(e,t,n){return h.f(e,t,g(1,n))}:function(e,t,n){return e[t]=n,e},m={}.hasOwnProperty,$=function(e,t){return m.call(e,t)},v=0,C=Math.random(),F=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++v+C).toString(36))},A=e((function(e){var r="__core-js_shared__",u=t[r]||(t[r]={});(e.exports=function(e,t){return u[e]||(u[e]=void 0!==t?t:{})})("versions",[]).push({version:n.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),w=A("native-function-to-string",Function.toString),E=e((function(e){var r=F("src"),u="toString",i=(""+w).split(u);n.inspectSource=function(e){return w.call(e)},(e.exports=function(e,n,u,o){var s="function"==typeof u;s&&($(u,"name")||D(u,"name",n)),e[n]!==u&&(s&&($(u,r)||D(u,r,e[n]?""+e[n]:i.join(String(n)))),e===t?e[n]=u:o?e[n]?e[n]=u:D(e,n,u):(delete e[n],D(e,n,u)))})(Function.prototype,u,(function(){return"function"==typeof this&&this[r]||w.call(this)}))})),y=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e},b=function(e,t,n){if(y(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,u){return e.call(t,n,r,u)}}return function(){return e.apply(t,arguments)}},x="prototype",B=function(e,r,u){var i,o,s,a,l=e&B.F,c=e&B.G,f=e&B.S,d=e&B.P,p=e&B.B,h=c?t:f?t[r]||(t[r]={}):(t[r]||{})[x],g=c?n:n[r]||(n[r]={}),m=g[x]||(g[x]={});for(i in c&&(u=r),u)s=((o=!l&&h&&void 0!==h[i])?h:u)[i],a=p&&o?b(s,t):d&&"function"==typeof s?b(Function.call,s):s,h&&E(h,i,s,e&B.U),g[i]!=s&&D(g,i,a),d&&m[i]!=s&&(m[i]=s)};t.core=n,B.F=1,B.G=2,B.S=4,B.P=8,B.B=16,B.W=32,B.U=64,B.R=128;var N,k=B,M=Math.ceil,S=Math.floor,q=function(e){return isNaN(e=+e)?0:(e>0?S:M)(e)},z=function(e){if(null==e)throw TypeError("Can't call method on  "+e);return e},O=(N=!1,function(e,t){var n,r,u=String(z(e)),i=q(t),o=u.length;return i<0||i>=o?N?"":void 0:(n=u.charCodeAt(i))<55296||n>56319||i+1===o||(r=u.charCodeAt(i+1))<56320||r>57343?N?u.charAt(i):n:N?u.slice(i,i+2):r-56320+(n-55296<<10)+65536});k(k.P,"String",{codePointAt:function(e){return O(this,e)}}),n.String.codePointAt;var I=Math.max,L=Math.min,P=function(e,t){return(e=q(e))<0?I(e+t,0):L(e,t)},_=String.fromCharCode,T=String.fromCodePoint;k(k.S+k.F*(!!T&&1!=T.length),"String",{fromCodePoint:function(e){for(var t,n=arguments,r=[],u=arguments.length,i=0;u>i;){if(t=+n[i++],P(t,1114111)!==t)throw RangeError(t+" is not a valid code point");r.push(t<65536?_(t):_(55296+((t-=65536)>>10),t%1024+56320))}return r.join("")}}),n.String.fromCodePoint;var V,H,R,j,Z,U,J,W,G,X,Y,Q,K,ee,te={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},ne={isSpaceSeparator:function(e){return"string"==typeof e&&te.Space_Separator.test(e)},isIdStartChar:function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||te.ID_Start.test(e))},isIdContinueChar:function(e){return"string"==typeof e&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||te.ID_Continue.test(e))},isDigit:function(e){return"string"==typeof e&&/[0-9]/.test(e)},isHexDigit:function(e){return"string"==typeof e&&/[0-9A-Fa-f]/.test(e)}},re=function(e,t){V=String(e),H="start",R=[],j=0,Z=1,U=0,J=void 0,W=void 0,G=void 0;do{J=ie(),he[H]()}while("eof"!==J.type);return"function"==typeof t?ue({"":G},"",t):G};function ue(e,t,n){var r=e[t];if(null!=r&&"object"==typeof r)for(var u in r){var i=ue(r,u,n);void 0===i?delete r[u]:r[u]=i}return n.call(e,t,r)}function ie(){for(X="default",Y="",Q=!1,K=1;;){ee=oe();var e=ae[X]();if(e)return e}}function oe(){if(V[j])return String.fromCodePoint(V.codePointAt(j))}function se(){var e=oe();return"\n"===e?(Z++,U=0):e?U+=e.length:U++,e&&(j+=e.length),e}var ae={default:function(){switch(ee){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void se();case"/":return se(),void(X="comment");case void 0:return se(),le("eof")}if(!ne.isSpaceSeparator(ee))return ae[H]();se()},comment:function(){switch(ee){case"*":return se(),void(X="multiLineComment");case"/":return se(),void(X="singleLineComment")}throw me(se())},multiLineComment:function(){switch(ee){case"*":return se(),void(X="multiLineCommentAsterisk");case void 0:throw me(se())}se()},multiLineCommentAsterisk:function(){switch(ee){case"*":return void se();case"/":return se(),void(X="default");case void 0:throw me(se())}se(),X="multiLineComment"},singleLineComment:function(){switch(ee){case"\n":case"\r":case"\u2028":case"\u2029":return se(),void(X="default");case void 0:return se(),le("eof")}se()},value:function(){switch(ee){case"{":case"[":return le("punctuator",se());case"n":return se(),ce("ull"),le("null",null);case"t":return se(),ce("rue"),le("boolean",!0);case"f":return se(),ce("alse"),le("boolean",!1);case"-":case"+":return"-"===se()&&(K=-1),void(X="sign");case".":return Y=se(),void(X="decimalPointLeading");case"0":return Y=se(),void(X="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Y=se(),void(X="decimalInteger");case"I":return se(),ce("nfinity"),le("numeric",1/0);case"N":return se(),ce("aN"),le("numeric",NaN);case'"':case"'":return Q='"'===se(),Y="",void(X="string")}throw me(se())},identifierNameStartEscape:function(){if("u"!==ee)throw me(se());se();var e=pe();switch(e){case"$":case"_":break;default:if(!ne.isIdStartChar(e))throw ve()}Y+=e,X="identifierName"},identifierName:function(){switch(ee){case"$":case"_":case"‌":case"‍":return void(Y+=se());case"\\":return se(),void(X="identifierNameEscape")}if(!ne.isIdContinueChar(ee))return le("identifier",Y);Y+=se()},identifierNameEscape:function(){if("u"!==ee)throw me(se());se();var e=pe();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!ne.isIdContinueChar(e))throw ve()}Y+=e,X="identifierName"},sign:function(){switch(ee){case".":return Y=se(),void(X="decimalPointLeading");case"0":return Y=se(),void(X="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return Y=se(),void(X="decimalInteger");case"I":return se(),ce("nfinity"),le("numeric",K*(1/0));case"N":return se(),ce("aN"),le("numeric",NaN)}throw me(se())},zero:function(){switch(ee){case".":return Y+=se(),void(X="decimalPoint");case"e":case"E":return Y+=se(),void(X="decimalExponent");case"x":case"X":return Y+=se(),void(X="hexadecimal")}return le("numeric",0*K)},decimalInteger:function(){switch(ee){case".":return Y+=se(),void(X="decimalPoint");case"e":case"E":return Y+=se(),void(X="decimalExponent")}if(!ne.isDigit(ee))return le("numeric",K*Number(Y));Y+=se()},decimalPointLeading:function(){if(ne.isDigit(ee))return Y+=se(),void(X="decimalFraction");throw me(se())},decimalPoint:function(){switch(ee){case"e":case"E":return Y+=se(),void(X="decimalExponent")}return ne.isDigit(ee)?(Y+=se(),void(X="decimalFraction")):le("numeric",K*Number(Y))},decimalFraction:function(){switch(ee){case"e":case"E":return Y+=se(),void(X="decimalExponent")}if(!ne.isDigit(ee))return le("numeric",K*Number(Y));Y+=se()},decimalExponent:function(){switch(ee){case"+":case"-":return Y+=se(),void(X="decimalExponentSign")}if(ne.isDigit(ee))return Y+=se(),void(X="decimalExponentInteger");throw me(se())},decimalExponentSign:function(){if(ne.isDigit(ee))return Y+=se(),void(X="decimalExponentInteger");throw me(se())},decimalExponentInteger:function(){if(!ne.isDigit(ee))return le("numeric",K*Number(Y));Y+=se()},hexadecimal:function(){if(ne.isHexDigit(ee))return Y+=se(),void(X="hexadecimalInteger");throw me(se())},hexadecimalInteger:function(){if(!ne.isHexDigit(ee))return le("numeric",K*Number(Y));Y+=se()},string:function(){switch(ee){case"\\":return se(),void(Y+=fe());case'"':return Q?(se(),le("string",Y)):void(Y+=se());case"'":return Q?void(Y+=se()):(se(),le("string",Y));case"\n":case"\r":throw me(se());case"\u2028":case"\u2029":Ce(ee);break;case void 0:throw me(se())}Y+=se()},start:function(){switch(ee){case"{":case"[":return le("punctuator",se())}X="value"},beforePropertyName:function(){switch(ee){case"$":case"_":return Y=se(),void(X="identifierName");case"\\":return se(),void(X="identifierNameStartEscape");case"}":return le("punctuator",se());case'"':case"'":return Q='"'===se(),void(X="string")}if(ne.isIdStartChar(ee))return Y+=se(),void(X="identifierName");throw me(se())},afterPropertyName:function(){if(":"===ee)return le("punctuator",se());throw me(se())},beforePropertyValue:function(){X="value"},afterPropertyValue:function(){switch(ee){case",":case"}":return le("punctuator",se())}throw me(se())},beforeArrayValue:function(){if("]"===ee)return le("punctuator",se());X="value"},afterArrayValue:function(){switch(ee){case",":case"]":return le("punctuator",se())}throw me(se())},end:function(){throw me(se())}};function le(e,t){return{type:e,value:t,line:Z,column:U}}function ce(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(oe()!==r)throw me(se());se()}}function fe(){switch(oe()){case"b":return se(),"\b";case"f":return se(),"\f";case"n":return se(),"\n";case"r":return se(),"\r";case"t":return se(),"\t";case"v":return se(),"\v";case"0":if(se(),ne.isDigit(oe()))throw me(se());return"\0";case"x":return se(),de();case"u":return se(),pe();case"\n":case"\u2028":case"\u2029":return se(),"";case"\r":return se(),"\n"===oe()&&se(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw me(se())}return se()}function de(){var e="",t=oe();if(!ne.isHexDigit(t))throw me(se());if(e+=se(),t=oe(),!ne.isHexDigit(t))throw me(se());return e+=se(),String.fromCodePoint(parseInt(e,16))}function pe(){for(var e="",t=4;t-- >0;){var n=oe();if(!ne.isHexDigit(n))throw me(se());e+=se()}return String.fromCodePoint(parseInt(e,16))}var he={start:function(){if("eof"===J.type)throw $e();ge()},beforePropertyName:function(){switch(J.type){case"identifier":case"string":return W=J.value,void(H="afterPropertyName");case"punctuator":return void De();case"eof":throw $e()}},afterPropertyName:function(){if("eof"===J.type)throw $e();H="beforePropertyValue"},beforePropertyValue:function(){if("eof"===J.type)throw $e();ge()},beforeArrayValue:function(){if("eof"===J.type)throw $e();"punctuator"!==J.type||"]"!==J.value?ge():De()},afterPropertyValue:function(){if("eof"===J.type)throw $e();switch(J.value){case",":return void(H="beforePropertyName");case"}":De()}},afterArrayValue:function(){if("eof"===J.type)throw $e();switch(J.value){case",":return void(H="beforeArrayValue");case"]":De()}},end:function(){}};function ge(){var e;switch(J.type){case"punctuator":switch(J.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=J.value}if(void 0===G)G=e;else{var t=R[R.length-1];Array.isArray(t)?t.push(e):t[W]=e}if(null!==e&&"object"==typeof e)R.push(e),H=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var n=R[R.length-1];H=null==n?"end":Array.isArray(n)?"afterArrayValue":"afterPropertyValue"}}function De(){R.pop();var e=R[R.length-1];H=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function me(e){return Ae(void 0===e?"JSON5: invalid end of input at "+Z+":"+U:"JSON5: invalid character '"+Fe(e)+"' at "+Z+":"+U)}function $e(){return Ae("JSON5: invalid end of input at "+Z+":"+U)}function ve(){return Ae("JSON5: invalid identifier character at "+Z+":"+(U-=5))}function Ce(e){console.warn("JSON5: '"+Fe(e)+"' in strings is not valid ECMAScript; consider escaping")}function Fe(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function Ae(e){var t=new SyntaxError(e);return t.lineNumber=Z,t.columnNumber=U,t}var we=function(e,t,n){var r,u,i,o=[],s="",a="";if(null==t||"object"!=typeof t||Array.isArray(t)||(n=t.space,i=t.quote,t=t.replacer),"function"==typeof t)u=t;else if(Array.isArray(t)){r=[];for(var l=0,c=t;l<c.length;l+=1){var f=c[l],d=void 0;"string"==typeof f?d=f:("number"==typeof f||f instanceof String||f instanceof Number)&&(d=String(f)),void 0!==d&&r.indexOf(d)<0&&r.push(d)}}return n instanceof Number?n=Number(n):n instanceof String&&(n=String(n)),"number"==typeof n?n>0&&(n=Math.min(10,Math.floor(n)),a="          ".substr(0,n)):"string"==typeof n&&(a=n.substr(0,10)),p("",{"":e});function p(e,t){var n=t[e];switch(null!=n&&("function"==typeof n.toJSON5?n=n.toJSON5(e):"function"==typeof n.toJSON&&(n=n.toJSON(e))),u&&(n=u.call(t,e,n)),n instanceof Number?n=Number(n):n instanceof String?n=String(n):n instanceof Boolean&&(n=n.valueOf()),n){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof n?h(n):"number"==typeof n?String(n):"object"==typeof n?Array.isArray(n)?m(n):g(n):void 0}function h(e){for(var t={"'":.1,'"':.2},n={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},r="",u=0;u<e.length;u++){var o=e[u];switch(o){case"'":case'"':t[o]++,r+=o;continue;case"\0":if(ne.isDigit(e[u+1])){r+="\\x00";continue}}if(n[o])r+=n[o];else if(o<" "){var s=o.charCodeAt(0).toString(16);r+="\\x"+("00"+s).substring(s.length)}else r+=o}var a=i||Object.keys(t).reduce((function(e,n){return t[e]<t[n]?e:n}));return a+(r=r.replace(new RegExp(a,"g"),n[a]))+a}function g(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var t=s;s+=a;for(var n,u,i=[],l=0,c=r||Object.keys(e);l<c.length;l+=1){var f=c[l],d=p(f,e);if(void 0!==d){var h=D(f)+":";""!==a&&(h+=" "),h+=d,i.push(h)}}if(0===i.length)n="{}";else if(""===a)n="{"+(u=i.join(","))+"}";else{var g=",\n"+s;u=i.join(g),n="{\n"+s+u+",\n"+t+"}"}return o.pop(),s=t,n}function D(e){if(0===e.length)return h(e);var t=String.fromCodePoint(e.codePointAt(0));if(!ne.isIdStartChar(t))return h(e);for(var n=t.length;n<e.length;n++)if(!ne.isIdContinueChar(String.fromCodePoint(e.codePointAt(n))))return h(e);return e}function m(e){if(o.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");o.push(e);var t=s;s+=a;for(var n,r=[],u=0;u<e.length;u++){var i=p(String(u),e);r.push(void 0!==i?i:"null")}if(0===r.length)n="[]";else if(""===a)n="["+r.join(",")+"]";else{var l=",\n"+s,c=r.join(l);n="[\n"+s+c+",\n"+t+"]"}return o.pop(),s=t,n}};return{parse:re,stringify:we}}()}));const Je=e=>setTimeout(e,0),We=e=>new Promise((t=>setTimeout(t,e))),Ge=(e,t)=>Array.from({length:t-e},((t,n)=>n+e)),Xe=(e,t)=>t?Ge(e,t):Ge(0,e);function Ye(e,t){try{return e()}catch(n){let r=e.name;return""===r&&(r="unknown"),Ee.error(`Error in ${r}`,n,(e=>ye(e))),t}}const Qe=(e,t)=>e.split(t??" ").filter(Boolean).map((e=>e.trim()));function Ke(e){let t=new Set;for(let n of e){let e=`${n}`;if(t.has(e))return!1;t.add(e)}return!0}function et(e){return void 0===e?[]:Array.isArray(e)?e:[e]}function tt(e,t){return e.replaceAll(/\"([\s\S]*?)\"/g,((e,n)=>n.splitTrim("\n").join(t)))}const nt=new class{hideLoader(){document.getElementById("loader").style.display="none"}getCard(){return ankiCard}getConfig(){try{let e=ankiCard.config?.trim();return e&&0!==e.length||(e=ankiCard.defaultConfig?.trim()),Ue.parse(e)}catch(e){return Ee.error("Can't get config from Anki card",e,(e=>ye(e))),{}}}*commands(){if(!ankiCard.content.replaceAll("\n"," ").includes(";"))return;let e=ankiCard.content.split(";")[0];for(let t of Qe(e,","))yield Qe(t," ")}tokens(){let e=ankiCard.content.replaceAll("\n"," "),t=e.includes(";")?e.split(";")[1]:e;return Qe(t,",")}};let rt=!1,ut=!1;function it(){ut&&(ut=!1,Ye((()=>MathJax.typeset())))}function ot(){ut=!0,rt&&Je(it)}function st(e,t){return e=Math.ceil(e),t=Math.floor(t+1),Math.floor(Math.random()*(t-e)+e)}function at(e,t){return"number"==typeof e?void 0!==t?st(e,t):st(0,e):Array.isArray(e)?st(e[0],e[1]):st(e.min,e.max)}function lt(e){return e[st(0,e.length-1)]}function ct(e,t){let n=e.filter(t);return n[st(0,n.length-1)]}const ft=()=>0==st(0,1),dt=()=>0==st(0,1)?1:-1;function pt(e){let t=0==st(0,1)?1:-1;return"number"==typeof e?e*t:e.mul(t)}function ht(e,t){t??="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var n="",r=0;r<e;r++){var u=Math.floor(Math.random()*t.length);n+=t.charAt(u)}return n}function gt(e){let t=[...e];for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}const Dt=["yes","no","done","idle","sound-on","sound-off","on-drag-start","on-drag-end","time-is-up"];let mt=new Map,$t=!0;function vt(e){function t(e,n,r){let u=new Audio(""===e?`${n}-${r}.mp3`:`${e}/${n}-${r}.mp3`);u.addEventListener("canplaythrough",(i=>{mt.get(n).push(u),Je((()=>t(e,n,r+1)))}),{once:!0})}Dt.forEach((n=>{mt.set(n,[]),Je((()=>t(e,n,1)))}))}function Ct(e){let t=mt.get(e);t&&0!==t.length&&lt(t).play().catch((e=>{}))}const Ft=new class{play(e){$t&&Ct(e)}buildMp3Library(e,t){$t=t,Je((()=>vt(""))),Je((()=>vt(e)))}soundSwitch(e){$t!==e&&(Ct(e?"sound-on":"sound-off"),$t=e)}playRandom(){$t&&Ct(lt(Dt))}get soundIsOn(){return $t}};let At=new Set;function wt(e){return At.has(e)}function Et(e,t){let n={id:t?.id??ht(5),snapTo:t?.snapTo??[1,1]},r=-1,u={x:0,y:0},i={x:0,y:0},o=0;function s(t,n){switch(t){case"drag:start":At.add(e);break;case"drag:end":At.delete(e)}e.dispatchEvent(new CustomEvent(t,{detail:n}))}function a(e,t){let r={x:.5+e.clientX|0,y:.5+e.clientY|0};t??=r;let u={x:r.x-t.x,y:r.y-t.y};return{id:n.id,start:t,offset:u}}function l(e){if(-1!==r)return s("drag:other");let t=e.changedTouches[0],n=a(t);r=t.identifier,u=n.start,i=n.offset,o=0,s("drag:start",n)}function c(e){let t=e.changedTouches[0];if(r!==t.identifier)return o++;let l=a(t,u);if(!function(e,t){return!(Math.abs(t.x-e.offset.x)<n.snapTo[0]&&Math.abs(t.y-e.offset.y)<n.snapTo[1]||(e.offset.x-=e.offset.x%n.snapTo[0],e.offset.y-=e.offset.y%n.snapTo[1],0))}(l,i))return o++;i=l.offset,s("drag:move",l)}async function f(e){let t=e.changedTouches[0];if(r!==t.identifier)return s("drag:other");let n=a(t,u);r=-1,s("drag:end",n)}return e.addEventListener("touchstart",l,{passive:!0}),e.addEventListener("touchmove",c,{passive:!0}),e.addEventListener("touchend",f,{passive:!0}),e.addEventListener("touchcancel",f,{passive:!0}),{destroy(){e.removeEventListener("touchstart",l),e.removeEventListener("touchmove",c),e.removeEventListener("touchend",f),e.removeEventListener("touchcancel",f)}}}let yt={duration:500,interval:1e4,jitter:7e3},bt=[[{transform:"scale(1, 1)"},{transform:"scale(1.03, 1.03)"},{transform:"scale(1, 1)"}],[{transform:"scale(1, 1)"},{transform:"scale(0.98, 0.98)"},{transform:"scale(1, 1)"}],[{transform:"translate(0px, 0px)"},{transform:"translate(-1px, 0px)"},{transform:"translate(+1px, 0px)"},{transform:"translate(0px, 0px)"}],[{transform:"translate(0px, 0px)"},{transform:"translate(0px, -1px)"},{transform:"translate(0px, +1px)"},{transform:"translate(0px, 0px)"}],[{transform:"translate(0px, 0px)"},{transform:"translate(-1px, -1px)"},{transform:"translate(+1px, +1px)"},{transform:"translate(0px, 0px)"}],[{transform:"translate(0px, 0px)"},{transform:"translate(+1px, -1px)"},{transform:"translate(-1px, +1px)"},{transform:"translate(0px, 0px)"}],[{transform:"rotate(0deg)"},{transform:"rotate(-2deg)"},{transform:"rotate(+2deg)"},{transform:"rotate(0deg)"}]];function xt(e,t){Je((()=>async function(e,t){for(;;){let{interval:n,jitter:r,duration:u}=t,i=at(n-r,n+r);if(await We(i),wt(e))continue;let o=lt(bt);e.animate(o,u)}}(e,t??yt)))}function Bt(e,t){function n(t){let n=[{transform:"translate3d(0px, 0px, 0px)"}];e.animate(n,{duration:100,easing:"cubic-bezier(.87,.74,.96,1.83)"}).onfinish=()=>{e.style.transform=null}}function r(e){Ft.play("on-drag-start")}function u(t){var n;n=t.detail.offset,e.style.transform=`translate3d(${n.x}px, ${n.y}px, 0px)`}function i(e){Ft.play("on-drag-end"),n(e.detail.offset)}t??={},t.snapTo??=[5,5],e.addEventListener("drag:start",r),e.addEventListener("drag:move",u),e.addEventListener("drag:end",i);let o=Et(e,t);return{destroy(){o.destroy(),e.removeEventListener("drag:start",r),e.removeEventListener("drag:move",u),e.removeEventListener("drag:end",i)}}}function Nt(e,t){function n(e){Ft.play(t.get("drag:start"))}function r(e){Ft.play(t.get("drag:end"))}t??=new Map,e.addEventListener("drag:start",n),e.addEventListener("drag:end",r);let u=Et(e);return{destroy(){u.destroy(),e.removeEventListener("drag:start",n),e.removeEventListener("drag:end",r)}}}function kt(e,t,n){const r=e.slice();return r[7]=t[n],r}function Mt(e,t,n){const r=e.slice();return r[10]=t[n],r}function St(t){let n;return{c(){n=E("line"),N(n,"class","minor svelte-3bw95i"),N(n,"y1","42"),N(n,"y2","45"),N(n,"transform","rotate("+6*(t[7]+t[10])+")")},m(e,t){C(e,n,t)},p:e,d(e){e&&F(n)}}}function qt(t){let n,r,u=[1,2,3,4],i=[];for(let e=0;e<4;e+=1)i[e]=St(Mt(t,u,e));return{c(){n=E("line");for(let e=0;e<4;e+=1)i[e].c();r=x(),N(n,"class","major svelte-3bw95i"),N(n,"y1","35"),N(n,"y2","45"),N(n,"transform","rotate("+30*t[7]+")")},m(e,t){C(e,n,t);for(let n=0;n<4;n+=1)i[n].m(e,t);C(e,r,t)},p:e,d(e){e&&F(n),A(i,e),e&&F(r)}}}function zt(t){let n,r,i,o,s,a,l,d,p,h,g,D,$,v=[0,5,10,15,20,25,30,35,40,45,50,55],w=[];for(let e=0;e<12;e+=1)w[e]=qt(kt(t,v,e));return{c(){n=E("svg"),r=E("circle");for(let e=0;e<12;e+=1)w[e].c();o=E("line"),a=E("line"),d=E("g"),p=E("line"),h=E("line"),N(r,"class",i=c(t[1]?"clock-face-enabled":"clock-face-disabled")+" svelte-3bw95i"),N(r,"r","48"),N(o,"class","hour svelte-3bw95i"),N(o,"y1","2"),N(o,"y2","-20"),N(o,"transform",s="rotate("+(30*t[4]+t[3]/2)+")"),N(a,"class","minute svelte-3bw95i"),N(a,"y1","4"),N(a,"y2","-30"),N(a,"transform",l="rotate("+(6*t[3]+t[2]/10)+")"),N(p,"class","second svelte-3bw95i"),N(p,"y1","10"),N(p,"y2","-38"),N(h,"class","second-counterweight svelte-3bw95i"),N(h,"y1","10"),N(h,"y2","2"),N(d,"transform",g="rotate("+6*t[2]+")"),N(n,"viewBox","-50 -50 100 100"),M(n,"grid-area",t[0]),N(n,"class","svelte-3bw95i")},m(e,u){C(e,n,u),m(n,r);for(let e=0;e<12;e+=1)w[e].m(n,null);m(n,o),m(n,a),m(n,d),m(d,p),m(d,h),D||($=[B(n,"click",t[5]),f(xt.call(null,n)),f(Bt.call(null,n))],D=!0)},p(e,[t]){2&t&&i!==(i=c(e[1]?"clock-face-enabled":"clock-face-disabled")+" svelte-3bw95i")&&N(r,"class",i),24&t&&s!==(s="rotate("+(30*e[4]+e[3]/2)+")")&&N(o,"transform",s),12&t&&l!==(l="rotate("+(6*e[3]+e[2]/10)+")")&&N(a,"transform",l),4&t&&g!==(g="rotate("+6*e[2]+")")&&N(d,"transform",g),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),A(w,e),D=!1,u($)}}}function Ot(e,t,n){let r,u,i,{ga:o}=t,s=Ft.soundIsOn,a=new Date;return V((()=>{const e=setInterval((()=>{n(6,a=new Date)}),1e3);return()=>{clearInterval(e)}})),e.$$set=e=>{"ga"in e&&n(0,o=e.ga)},e.$$.update=()=>{64&e.$$.dirty&&n(4,r=a.getHours()),64&e.$$.dirty&&n(3,u=a.getMinutes()),64&e.$$.dirty&&n(2,i=a.getSeconds())},[o,s,i,u,r,function(){n(1,s^=!0),Ft.soundSwitch(s)},a]}class It extends $e{constructor(e){super(),me(this,e,Ot,zt,o,{ga:0})}}var Lt={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},Pt={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},_t=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],Tt={CSS:{},springs:{}};function Vt(e,t,n){return Math.min(Math.max(e,t),n)}function Ht(e,t){return e.indexOf(t)>-1}function Rt(e,t){return e.apply(null,t)}var jt={arr:function(e){return Array.isArray(e)},obj:function(e){return Ht(Object.prototype.toString.call(e),"Object")},pth:function(e){return jt.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||jt.svg(e)},str:function(e){return"string"==typeof e},fnc:function(e){return"function"==typeof e},und:function(e){return void 0===e},nil:function(e){return jt.und(e)||null===e},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return jt.hex(e)||jt.rgb(e)||jt.hsl(e)},key:function(e){return!Lt.hasOwnProperty(e)&&!Pt.hasOwnProperty(e)&&"targets"!==e&&"keyframes"!==e}};function Zt(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map((function(e){return parseFloat(e)})):[]}function Ut(e,t){var n=Zt(e),r=Vt(jt.und(n[0])?1:n[0],.1,100),u=Vt(jt.und(n[1])?100:n[1],.1,100),i=Vt(jt.und(n[2])?10:n[2],.1,100),o=Vt(jt.und(n[3])?0:n[3],.1,100),s=Math.sqrt(u/r),a=i/(2*Math.sqrt(u*r)),l=a<1?s*Math.sqrt(1-a*a):0,c=a<1?(a*s-o)/l:-o+s;function f(e){var n=t?t*e/1e3:e;return n=a<1?Math.exp(-n*a*s)*(1*Math.cos(l*n)+c*Math.sin(l*n)):(1+c*n)*Math.exp(-n*s),0===e||1===e?e:1-n}return t?f:function(){var t=Tt.springs[e];if(t)return t;for(var n=1/6,r=0,u=0;;)if(1===f(r+=n)){if(++u>=16)break}else u=0;var i=r*n*1e3;return Tt.springs[e]=i,i}}function Jt(e){return void 0===e&&(e=10),function(t){return Math.ceil(Vt(t,1e-6,1)*e)*(1/e)}}var Wt,Gt,Xt=function(){var e=.1;function t(e,t){return 1-3*t+3*e}function n(e,t){return 3*t-6*e}function r(e){return 3*e}function u(e,u,i){return((t(u,i)*e+n(u,i))*e+r(u))*e}function i(e,u,i){return 3*t(u,i)*e*e+2*n(u,i)*e+r(u)}return function(t,n,r,o){if(0<=t&&t<=1&&0<=r&&r<=1){var s=new Float32Array(11);if(t!==n||r!==o)for(var a=0;a<11;++a)s[a]=u(a*e,t,r);return function(e){return t===n&&r===o||0===e||1===e?e:u(l(e),n,o)}}function l(n){for(var o=0,a=1;10!==a&&s[a]<=n;++a)o+=e;--a;var l=o+(n-s[a])/(s[a+1]-s[a])*e,c=i(l,t,r);return c>=.001?function(e,t,n,r){for(var o=0;o<4;++o){var s=i(t,n,r);if(0===s)return t;t-=(u(t,n,r)-e)/s}return t}(n,l,t,r):0===c?l:function(e,t,n,r,i){var o,s,a=0;do{(o=u(s=t+(n-t)/2,r,i)-e)>0?n=s:t=s}while(Math.abs(o)>1e-7&&++a<10);return s}(n,o,o+e,t,r)}}}(),Yt=(Wt={linear:function(){return function(e){return e}}},Gt={Sine:function(){return function(e){return 1-Math.cos(e*Math.PI/2)}},Circ:function(){return function(e){return 1-Math.sqrt(1-e*e)}},Back:function(){return function(e){return e*e*(3*e-2)}},Bounce:function(){return function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}},Elastic:function(e,t){void 0===e&&(e=1),void 0===t&&(t=.5);var n=Vt(e,1,10),r=Vt(t,.1,2);return function(e){return 0===e||1===e?e:-n*Math.pow(2,10*(e-1))*Math.sin((e-1-r/(2*Math.PI)*Math.asin(1/n))*(2*Math.PI)/r)}}},["Quad","Cubic","Quart","Quint","Expo"].forEach((function(e,t){Gt[e]=function(){return function(e){return Math.pow(e,t+2)}}})),Object.keys(Gt).forEach((function(e){var t=Gt[e];Wt["easeIn"+e]=t,Wt["easeOut"+e]=function(e,n){return function(r){return 1-t(e,n)(1-r)}},Wt["easeInOut"+e]=function(e,n){return function(r){return r<.5?t(e,n)(2*r)/2:1-t(e,n)(-2*r+2)/2}},Wt["easeOutIn"+e]=function(e,n){return function(r){return r<.5?(1-t(e,n)(1-2*r))/2:(t(e,n)(2*r-1)+1)/2}}})),Wt);function Qt(e,t){if(jt.fnc(e))return e;var n=e.split("(")[0],r=Yt[n],u=Zt(e);switch(n){case"spring":return Ut(e,t);case"cubicBezier":return Rt(Xt,u);case"steps":return Rt(Jt,u);default:return Rt(r,u)}}function Kt(e){try{return document.querySelectorAll(e)}catch(e){return}}function en(e,t){for(var n=e.length,r=arguments.length>=2?arguments[1]:void 0,u=[],i=0;i<n;i++)if(i in e){var o=e[i];t.call(r,o,i,e)&&u.push(o)}return u}function tn(e){return e.reduce((function(e,t){return e.concat(jt.arr(t)?tn(t):t)}),[])}function nn(e){return jt.arr(e)?e:(jt.str(e)&&(e=Kt(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function rn(e,t){return e.some((function(e){return e===t}))}function un(e){var t={};for(var n in e)t[n]=e[n];return t}function on(e,t){var n=un(e);for(var r in e)n[r]=t.hasOwnProperty(r)?t[r]:e[r];return n}function sn(e,t){var n=un(e);for(var r in t)n[r]=jt.und(e[r])?t[r]:e[r];return n}function an(e){return jt.rgb(e)?(n=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(t=e))?"rgba("+n[1]+",1)":t:jt.hex(e)?function(e){var t=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,n,r){return t+t+n+n+r+r})),n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return"rgba("+parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16)+",1)"}(e):jt.hsl(e)?function(e){var t,n,r,u=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),i=parseInt(u[1],10)/360,o=parseInt(u[2],10)/100,s=parseInt(u[3],10)/100,a=u[4]||1;function l(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(0==o)t=n=r=s;else{var c=s<.5?s*(1+o):s+o-s*o,f=2*s-c;t=l(f,c,i+1/3),n=l(f,c,i),r=l(f,c,i-1/3)}return"rgba("+255*t+","+255*n+","+255*r+","+a+")"}(e):void 0;var t,n}function ln(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function cn(e,t){return jt.fnc(e)?e(t.target,t.id,t.total):e}function fn(e,t){return e.getAttribute(t)}function dn(e,t,n){if(rn([n,"deg","rad","turn"],ln(t)))return t;var r=Tt.CSS[t+n];if(!jt.und(r))return r;var u=document.createElement(e.tagName),i=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;i.appendChild(u),u.style.position="absolute",u.style.width=100+n;var o=100/u.offsetWidth;i.removeChild(u);var s=o*parseFloat(t);return Tt.CSS[t+n]=s,s}function pn(e,t,n){if(t in e.style){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),u=e.style[t]||getComputedStyle(e).getPropertyValue(r)||"0";return n?dn(e,u,n):u}}function hn(e,t){return jt.dom(e)&&!jt.inp(e)&&(!jt.nil(fn(e,t))||jt.svg(e)&&e[t])?"attribute":jt.dom(e)&&rn(_t,t)?"transform":jt.dom(e)&&"transform"!==t&&pn(e,t)?"css":null!=e[t]?"object":void 0}function gn(e){if(jt.dom(e)){for(var t,n=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,u=new Map;t=r.exec(n);)u.set(t[1],t[2]);return u}}function Dn(e,t,n,r){var u=Ht(t,"scale")?1:0+function(e){return Ht(e,"translate")||"perspective"===e?"px":Ht(e,"rotate")||Ht(e,"skew")?"deg":void 0}(t),i=gn(e).get(t)||u;return n&&(n.transforms.list.set(t,i),n.transforms.last=t),r?dn(e,i,r):i}function mn(e,t,n,r){switch(hn(e,t)){case"transform":return Dn(e,t,r,n);case"css":return pn(e,t,n);case"attribute":return fn(e,t);default:return e[t]||0}}function $n(e,t){var n=/^(\*=|\+=|-=)/.exec(e);if(!n)return e;var r=ln(e)||0,u=parseFloat(t),i=parseFloat(e.replace(n[0],""));switch(n[0][0]){case"+":return u+i+r;case"-":return u-i+r;case"*":return u*i+r}}function vn(e,t){if(jt.col(e))return an(e);if(/\s/g.test(e))return e;var n=ln(e),r=n?e.substr(0,e.length-n.length):e;return t?r+t:r}function Cn(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function Fn(e){for(var t,n=e.points,r=0,u=0;u<n.numberOfItems;u++){var i=n.getItem(u);u>0&&(r+=Cn(t,i)),t=i}return r}function An(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return function(e){return 2*Math.PI*fn(e,"r")}(e);case"rect":return function(e){return 2*fn(e,"width")+2*fn(e,"height")}(e);case"line":return function(e){return Cn({x:fn(e,"x1"),y:fn(e,"y1")},{x:fn(e,"x2"),y:fn(e,"y2")})}(e);case"polyline":return Fn(e);case"polygon":return function(e){var t=e.points;return Fn(e)+Cn(t.getItem(t.numberOfItems-1),t.getItem(0))}(e)}}function wn(e,t){var n=t||{},r=n.el||function(e){for(var t=e.parentNode;jt.svg(t)&&jt.svg(t.parentNode);)t=t.parentNode;return t}(e),u=r.getBoundingClientRect(),i=fn(r,"viewBox"),o=u.width,s=u.height,a=n.viewBox||(i?i.split(" "):[0,0,o,s]);return{el:r,viewBox:a,x:a[0]/1,y:a[1]/1,w:o,h:s,vW:a[2],vH:a[3]}}function En(e,t,n){function r(n){void 0===n&&(n=0);var r=t+n>=1?t+n:0;return e.el.getPointAtLength(r)}var u=wn(e.el,e.svg),i=r(),o=r(-1),s=r(1),a=n?1:u.w/u.vW,l=n?1:u.h/u.vH;switch(e.property){case"x":return(i.x-u.x)*a;case"y":return(i.y-u.y)*l;case"angle":return 180*Math.atan2(s.y-o.y,s.x-o.x)/Math.PI}}function yn(e,t){var n=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,r=vn(jt.pth(e)?e.totalLength:e,t)+"";return{original:r,numbers:r.match(n)?r.match(n).map(Number):[0],strings:jt.str(e)||t?r.split(n):[]}}function bn(e){return en(e?tn(jt.arr(e)?e.map(nn):nn(e)):[],(function(e,t,n){return n.indexOf(e)===t}))}function xn(e){var t=bn(e);return t.map((function(e,n){return{target:e,id:n,total:t.length,transforms:{list:gn(e)}}}))}function Bn(e,t){var n=un(t);if(/^spring/.test(n.easing)&&(n.duration=Ut(n.easing)),jt.arr(e)){var r=e.length;2===r&&!jt.obj(e[0])?e={value:e}:jt.fnc(t.duration)||(n.duration=t.duration/r)}var u=jt.arr(e)?e:[e];return u.map((function(e,n){var r=jt.obj(e)&&!jt.pth(e)?e:{value:e};return jt.und(r.delay)&&(r.delay=n?0:t.delay),jt.und(r.endDelay)&&(r.endDelay=n===u.length-1?t.endDelay:0),r})).map((function(e){return sn(e,n)}))}function Nn(e,t){var n=[],r=t.keyframes;for(var u in r&&(t=sn(function(e){for(var t=en(tn(e.map((function(e){return Object.keys(e)}))),(function(e){return jt.key(e)})).reduce((function(e,t){return e.indexOf(t)<0&&e.push(t),e}),[]),n={},r=function(r){var u=t[r];n[u]=e.map((function(e){var t={};for(var n in e)jt.key(n)?n==u&&(t.value=e[n]):t[n]=e[n];return t}))},u=0;u<t.length;u++)r(u);return n}(r),t)),t)jt.key(u)&&n.push({name:u,tweens:Bn(t[u],e)});return n}function kn(e,t){var n;return e.tweens.map((function(r){var u=function(e,t){var n={};for(var r in e){var u=cn(e[r],t);jt.arr(u)&&1===(u=u.map((function(e){return cn(e,t)}))).length&&(u=u[0]),n[r]=u}return n.duration=parseFloat(n.duration),n.delay=parseFloat(n.delay),n}(r,t),i=u.value,o=jt.arr(i)?i[1]:i,s=ln(o),a=mn(t.target,e.name,s,t),l=n?n.to.original:a,c=jt.arr(i)?i[0]:l,f=ln(c)||ln(a),d=s||f;return jt.und(o)&&(o=l),u.from=yn(c,d),u.to=yn($n(o,c),d),u.start=n?n.end:0,u.end=u.start+u.delay+u.duration+u.endDelay,u.easing=Qt(u.easing,u.duration),u.isPath=jt.pth(i),u.isPathTargetInsideSVG=u.isPath&&jt.svg(t.target),u.isColor=jt.col(u.from.original),u.isColor&&(u.round=1),n=u,u}))}var Mn={css:function(e,t,n){return e.style[t]=n},attribute:function(e,t,n){return e.setAttribute(t,n)},object:function(e,t,n){return e[t]=n},transform:function(e,t,n,r,u){if(r.list.set(t,n),t===r.last||u){var i="";r.list.forEach((function(e,t){i+=t+"("+e+") "})),e.style.transform=i}}};function Sn(e,t){xn(e).forEach((function(e){for(var n in t){var r=cn(t[n],e),u=e.target,i=ln(r),o=mn(u,n,i,e),s=$n(vn(r,i||ln(o)),o),a=hn(u,n);Mn[a](u,n,s,e.transforms,!0)}}))}function qn(e,t){return en(tn(e.map((function(e){return t.map((function(t){return function(e,t){var n=hn(e.target,t.name);if(n){var r=kn(t,e),u=r[r.length-1];return{type:n,property:t.name,animatable:e,tweens:r,duration:u.end,delay:r[0].delay,endDelay:u.endDelay}}}(e,t)}))}))),(function(e){return!jt.und(e)}))}function zn(e,t){var n=e.length,r=function(e){return e.timelineOffset?e.timelineOffset:0},u={};return u.duration=n?Math.max.apply(Math,e.map((function(e){return r(e)+e.duration}))):t.duration,u.delay=n?Math.min.apply(Math,e.map((function(e){return r(e)+e.delay}))):t.delay,u.endDelay=n?u.duration-Math.max.apply(Math,e.map((function(e){return r(e)+e.duration-e.endDelay}))):t.endDelay,u}var On=0;var In=[],Ln=function(){var e;function t(n){for(var r=In.length,u=0;u<r;){var i=In[u];i.paused?(In.splice(u,1),r--):(i.tick(n),u++)}e=u>0?requestAnimationFrame(t):void 0}return"undefined"!=typeof document&&document.addEventListener("visibilitychange",(function(){_n.suspendWhenDocumentHidden&&(Pn()?e=cancelAnimationFrame(e):(In.forEach((function(e){return e._onDocumentVisibility()})),Ln()))})),function(){e||Pn()&&_n.suspendWhenDocumentHidden||!(In.length>0)||(e=requestAnimationFrame(t))}}();function Pn(){return!!document&&document.hidden}function _n(e){void 0===e&&(e={});var t,n=0,r=0,u=0,i=0,o=null;function s(e){var t=window.Promise&&new Promise((function(e){return o=e}));return e.finished=t,t}var a=function(e){var t=on(Lt,e),n=on(Pt,e),r=Nn(n,e),u=xn(e.targets),i=qn(u,r),o=zn(i,n),s=On;return On++,sn(t,{id:s,children:[],animatables:u,animations:i,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}(e);function l(){var e=a.direction;"alternate"!==e&&(a.direction="normal"!==e?"normal":"reverse"),a.reversed=!a.reversed,t.forEach((function(e){return e.reversed=a.reversed}))}function c(e){return a.reversed?a.duration-e:e}function f(){n=0,r=c(a.currentTime)*(1/_n.speed)}function d(e,t){t&&t.seek(e-t.timelineOffset)}function p(e){for(var t=0,n=a.animations,r=n.length;t<r;){var u=n[t],i=u.animatable,o=u.tweens,s=o.length-1,l=o[s];s&&(l=en(o,(function(t){return e<t.end}))[0]||l);for(var c=Vt(e-l.start-l.delay,0,l.duration)/l.duration,f=isNaN(c)?1:l.easing(c),d=l.to.strings,p=l.round,h=[],g=l.to.numbers.length,D=void 0,m=0;m<g;m++){var $=void 0,v=l.to.numbers[m],C=l.from.numbers[m]||0;$=l.isPath?En(l.value,f*v,l.isPathTargetInsideSVG):C+f*(v-C),p&&(l.isColor&&m>2||($=Math.round($*p)/p)),h.push($)}var F=d.length;if(F){D=d[0];for(var A=0;A<F;A++){d[A];var w=d[A+1],E=h[A];isNaN(E)||(D+=w?E+w:E+" ")}}else D=h[0];Mn[u.type](i.target,u.property,D,i.transforms),u.currentValue=D,t++}}function h(e){a[e]&&!a.passThrough&&a[e](a)}function g(e){var f=a.duration,g=a.delay,D=f-a.endDelay,m=c(e);a.progress=Vt(m/f*100,0,100),a.reversePlayback=m<a.currentTime,t&&function(e){if(a.reversePlayback)for(var n=i;n--;)d(e,t[n]);else for(var r=0;r<i;r++)d(e,t[r])}(m),!a.began&&a.currentTime>0&&(a.began=!0,h("begin")),!a.loopBegan&&a.currentTime>0&&(a.loopBegan=!0,h("loopBegin")),m<=g&&0!==a.currentTime&&p(0),(m>=D&&a.currentTime!==f||!f)&&p(f),m>g&&m<D?(a.changeBegan||(a.changeBegan=!0,a.changeCompleted=!1,h("changeBegin")),h("change"),p(m)):a.changeBegan&&(a.changeCompleted=!0,a.changeBegan=!1,h("changeComplete")),a.currentTime=Vt(m,0,f),a.began&&h("update"),e>=f&&(r=0,a.remaining&&!0!==a.remaining&&a.remaining--,a.remaining?(n=u,h("loopComplete"),a.loopBegan=!1,"alternate"===a.direction&&l()):(a.paused=!0,a.completed||(a.completed=!0,h("loopComplete"),h("complete"),!a.passThrough&&"Promise"in window&&(o(),s(a)))))}return s(a),a.reset=function(){var e=a.direction;a.passThrough=!1,a.currentTime=0,a.progress=0,a.paused=!0,a.began=!1,a.loopBegan=!1,a.changeBegan=!1,a.completed=!1,a.changeCompleted=!1,a.reversePlayback=!1,a.reversed="reverse"===e,a.remaining=a.loop,t=a.children;for(var n=i=t.length;n--;)a.children[n].reset();(a.reversed&&!0!==a.loop||"alternate"===e&&1===a.loop)&&a.remaining++,p(a.reversed?a.duration:0)},a._onDocumentVisibility=f,a.set=function(e,t){return Sn(e,t),a},a.tick=function(e){u=e,n||(n=u),g((u+(r-n))*_n.speed)},a.seek=function(e){g(c(e))},a.pause=function(){a.paused=!0,f()},a.play=function(){a.paused&&(a.completed&&a.reset(),a.paused=!1,In.push(a),f(),Ln())},a.reverse=function(){l(),a.completed=!a.reversed,f()},a.restart=function(){a.reset(),a.play()},a.remove=function(e){Vn(bn(e),a)},a.reset(),a.autoplay&&a.play(),a}function Tn(e,t){for(var n=t.length;n--;)rn(e,t[n].animatable.target)&&t.splice(n,1)}function Vn(e,t){var n=t.animations,r=t.children;Tn(e,n);for(var u=r.length;u--;){var i=r[u],o=i.animations;Tn(e,o),o.length||i.children.length||r.splice(u,1)}n.length||r.length||t.pause()}function Hn(e,t,n){const r=e.slice();return r[7]=t[n],r[8]=t,r[9]=n,r}function Rn(e){let t,n,r,u,i,o,s=e[8],a=e[9];const l=()=>e[5](t,s,a),c=()=>e[5](null,s,a);return{c(){t=w("div"),n=E("svg"),r=E("polygon"),o=b(),N(r,"fill",u=e[7].color),N(r,"stroke",i=e[7].color),N(r,"stroke-width","37.6152"),N(r,"stroke-linecap","round"),N(r,"stroke-linejoin","round"),N(r,"stroke-miterlimit","10"),N(r,"points","259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 \r\n                            401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 \r\n                            29.274,197.007 188.165,173.919"),N(n,"xmlns","http://www.w3.org/2000/svg"),N(n,"viewBox","0 0 512 512"),N(t,"class","box svelte-moqp60"),M(t,"--size",e[2].size+"px"),M(t,"--left",e[2].pos[0]+"px"),M(t,"--top",e[2].pos[1]+"px")},m(e,u){C(e,t,u),m(t,n),m(n,r),m(t,o),l()},p(t,n){e=t,1&n&&u!==(u=e[7].color)&&N(r,"fill",u),1&n&&i!==(i=e[7].color)&&N(r,"stroke",i),s===e[8]&&a===e[9]||(c(),s=e[8],a=e[9],l())},d(e){e&&F(t),c()}}}function jn(t){let n,r=t[0],u=[];for(let e=0;e<r.length;e+=1)u[e]=Rn(Hn(t,r,e));return{c(){n=w("div");for(let e=0;e<u.length;e+=1)u[e].c();N(n,"class","svelte-moqp60"),S(n,"hidden",t[1])},m(e,t){C(e,n,t);for(let e=0;e<u.length;e+=1)u[e].m(n,null)},p(e,[t]){if(5&t){let i;for(r=e[0],i=0;i<r.length;i+=1){const o=Hn(e,r,i);u[i]?u[i].p(o,t):(u[i]=Rn(o),u[i].c(),u[i].m(n,null))}for(;i<u.length;i+=1)u[i].d(1);u.length=r.length}2&t&&S(n,"hidden",e[1])},i:e,o:e,d(e){e&&F(n),A(u,e)}}}function Zn(e,t,n){let r,u={size:18,pos:[100,120],xSeed:[20,100],ySeed:[20,120],duration:1500},i=!0;function o(){_n({targets:r.map((e=>e.box)),translateX:0,translateY:0,rotate:0,opacity:1,duration:0})}let{noOfStars:s=150}=t;return r=Xe(0,s).map((()=>({box:void 0,color:lt(["yellow","orange","red"])}))),V(o),e.$$set=e=>{"noOfStars"in e&&n(4,s=e.noOfStars)},[r,i,u,function(){o(),n(1,i=!1),_n({targets:r.map((e=>e.box)),translateX:()=>lt([1,-1])*(u.xSeed[0]+at(0,u.xSeed[1])),translateY:()=>lt([1,-1])*(u.ySeed[0]+at(0,u.ySeed[1])),rotate:()=>at(200,360),scale:()=>1+at(1,10)/10,delay:()=>at(150,300),opacity:{value:0,easing:"linear",delay:u.duration-200,duration:500},easing:"easeOutElastic",duration:u.duration,complete:()=>n(1,i=!0)})},s,function(e,t,u){j[e?"unshift":"push"]((()=>{t[u].box=e,n(0,r)}))}]}_n.version="3.2.1",_n.speed=1,_n.suspendWhenDocumentHidden=!0,_n.running=In,_n.remove=function(e){for(var t=bn(e),n=In.length;n--;){Vn(t,In[n])}},_n.get=mn,_n.set=Sn,_n.convertPx=dn,_n.path=function(e,t){var n=jt.str(e)?Kt(e)[0]:e,r=t||100;return function(e){return{property:e,el:n,svg:wn(n),totalLength:An(n)*(r/100)}}},_n.setDashoffset=function(e){var t=An(e);return e.setAttribute("stroke-dasharray",t),t},_n.stagger=function(e,t){void 0===t&&(t={});var n=t.direction||"normal",r=t.easing?Qt(t.easing):null,u=t.grid,i=t.axis,o=t.from||0,s="first"===o,a="center"===o,l="last"===o,c=jt.arr(e),f=c?parseFloat(e[0]):parseFloat(e),d=c?parseFloat(e[1]):0,p=ln(c?e[1]:e)||0,h=t.start||0+(c?f:0),g=[],D=0;return function(e,t,m){if(s&&(o=0),a&&(o=(m-1)/2),l&&(o=m-1),!g.length){for(var $=0;$<m;$++){if(u){var v=a?(u[0]-1)/2:o%u[0],C=a?(u[1]-1)/2:Math.floor(o/u[0]),F=v-$%u[0],A=C-Math.floor($/u[0]),w=Math.sqrt(F*F+A*A);"x"===i&&(w=-F),"y"===i&&(w=-A),g.push(w)}else g.push(Math.abs(o-$));D=Math.max.apply(Math,g)}r&&(g=g.map((function(e){return r(e/D)*D}))),"reverse"===n&&(g=g.map((function(e){return i?e<0?-1*e:-e:Math.abs(D-e)})))}return h+(c?(d-f)/D:f)*(Math.round(100*g[t])/100)+p}},_n.timeline=function(e){void 0===e&&(e={});var t=_n(e);return t.duration=0,t.add=function(n,r){var u=In.indexOf(t),i=t.children;function o(e){e.passThrough=!0}u>-1&&In.splice(u,1);for(var s=0;s<i.length;s++)o(i[s]);var a=sn(n,on(Pt,e));a.targets=a.targets||e.targets;var l=t.duration;a.autoplay=!1,a.direction=t.direction,a.timelineOffset=jt.und(r)?l:$n(r,l),o(t),t.seek(a.timelineOffset);var c=_n(a);o(c),i.push(c);var f=zn(i,e);return t.delay=f.delay,t.endDelay=f.endDelay,t.duration=f.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t},_n.easing=Qt,_n.penner=Yt,_n.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};class Un extends $e{constructor(e){super(),me(this,e,Zn,jn,o,{play:3,noOfStars:4})}get play(){return this.$$.ctx[3]}}let Jn,Wn={};function Gn(e,t){let n=Wn[e]??[];n.push(t),Wn[e]=n}function Xn(e,t){(Wn[e]??[]).forEach((e=>setTimeout((()=>e(t)),0)))}class Yn{constructor(e,t,n){this._cmd=e,this._timeout=t,this._jitter=n??0}set(){let e=at(this._timeout-this._jitter,this._timeout+this._jitter);this._timeoutId=setTimeout((()=>Xn(this._cmd,{})),e)}cancel(){clearTimeout(this._timeoutId)}reset(){this.cancel(),this.set()}}function Qn(e,t){Gn(e,t)}function Kn(e,t){Xn(e,t)}function er(e,t,n){return new Yn(e,t,n??0)}let tr=er("--cmd-new-round",1e3),nr=er("--cmd-idle",1e4,3e3),rr=[],ur=-1,ir=[1,8];function or(){let e=nt.tokens(),t=[];for(let n=0;n<e.length-1;n+=2)t.push([parseInt(e[n]),parseInt(e[n+1])]);return lt(t)}function sr(){return lt(function(e){let t=[],n=[];for(let r of nt.tokens()){let u=parseInt(r);n.push(u),n.length==e&&(t.push(n),n=[])}return t}(4))}function ar(){switch(nt.getConfig().game.toLocaleLowerCase()){case"plus-over":!function(){let e=or(),t=(e[0]+e[1])%10,n=e[0],r=at(ir[0],ir[1]),u=10*r+n,i=e[1],o=10*at(ir[0],ir[1]+1-r)+i,s=u+o,a=gt([u,o]),l=gt([s,s+dt()*at(1,9),s>50?s-10:s+10]),c=l.findIndex((e=>e==s));rr.push({pair:e,nums:a,op:"+",sumDigit:t,answers:l,rightAt:c})}(),function(){let e=or(),t=(e[0]+e[1])%10,n=e[0],r=at(ir[0],ir[1]+1),u=10*r+n,i=10*at(ir[0],ir[1]+1-r)+e[1],o=u+i,s=[o,ft()?u:i],a=o-s[1],l=gt([a,a+at(1,9)*dt(),a>50?a-10:a+10]),c=l.findIndex((e=>e==a));rr.push({pair:e,nums:s,op:"-",sumDigit:t,answers:l,rightAt:c})}();break;case"mul-div":!function(){let e=sr(),t=at(e[0],e[1]),n=at(e[2],e[3]),r=[t%10,n%10],u=gt([t,n]),i=t*n,o=i%10,s=gt([i,i+dt()*Math.min(...u),i>50?i-10:i+10]),a=s.findIndex((e=>e==i));rr.push({pair:r,nums:u,op:"x",sumDigit:o,answers:s,rightAt:a})}(),function(){let e=sr(),t=at(e[0],e[1]),n=at(e[2],e[3]),r=t*n,u=[t%10,n%10],i=[r,lt([t,n])],o=r/i[1],s=t*n%10,a=gt([o,o>2?o+dt():o+1,o>50?o-10:o+10]),l=a.findIndex((e=>e==o));rr.push({pair:u,nums:i,op:"/",sumDigit:s,answers:a,rightAt:l})}()}}const lr=new class{constructor(){for(let e of nt.commands())if("m"===e[0].toLocaleLowerCase())ir=e.slice(1).map((e=>parseInt(e)))}newRound(){let e=nt.getConfig();nr.reset(),tr.cancel(),ur++,ur>=rr.length&&Ee.error(`Round index out of bound: ${ur} length=${rr.length}`,(e=>ye(e)));let t=rr[ur],n=rr.length-ur,r=e.showHint??!0;Jn={roundsLeft:n,clickedAt:0,state:"first-click",showHint:r,...t},Kn("--cmd-update-views",Jn)}gotClicked(){switch(Jn.state){case"first-click":Kn("--evt-answer");break;case"answered":Kn("--cmd-new-round")}}yesNo(){if("answered"!==Jn.state)return;if(Jn.roundsLeft<=0)return;Kn(Jn.clickedAt===Jn.rightAt?"--evt-yes":"--evt-no")}gotAnswer(e){switch(nr.reset(),Jn.state){case"first-click":Jn.state="active";break;case"active":Jn.clickedAt=e.index,Jn.state="answered",this.yesNo();break;case"answered":return void Kn("--cmd-new-round")}Kn("--cmd-update-views",Jn)}yes(){1===Jn.roundsLeft?Kn("--evt-done"):Ft.play("yes"),tr.reset()}no(){Ft.play("no"),ar()}done(){Ft.play("done"),ar()}idle(){nr.reset(),Ft.play("idle")}};function cr(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[2]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,t){C(e,n,t),m(n,r),i||(o=[f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){4&t&&k(r,e[2]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function fr(e,t,n){let r,{ga:u}=t,{sz:i="30px"}=t;Qn("--cmd-update-views",(function(e){n(2,r=e.roundsLeft.toString())}));let o=ze(u);return e.$$set=e=>{"ga"in e&&n(0,u=e.ga),"sz"in e&&n(1,i=e.sz)},[u,i,r,o]}!function(){for(let e=nt.getConfig().rounds??4;e-- >0;)ar()}();class dr extends $e{constructor(e){super(),me(this,e,fr,cr,o,{ga:0,sz:1})}}function pr(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[1]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[2]+"px")},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[4]),f(xt.call(null,n)),f(Bt.call(null,n)),f(Nt.call(null,n,new Map([["drag:start","yes"],["drag:end","no"]])))],i=!0)},p(e,[t]){2&t&&k(r,e[1]),1&t&&M(n,"grid-area",e[0]),4&t&&M(n,"font-size",e[2]+"px")},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function hr(e,t,n){let r,u,i,{ga:o}=t,{index:s}=t,{sz:a=30}=t,l=ze(o);return Qn("--cmd-update-views",(function(e){n(1,r=e.nums[s].toLocaleString("en")),u=r.length<=3?1.2:2,n(2,i=a-u*r.length)})),e.$$set=e=>{"ga"in e&&n(0,o=e.ga),"index"in e&&n(5,s=e.index),"sz"in e&&n(6,a=e.sz)},[o,r,i,l,function(){Kn("--evt-click")},s,a]}class gr extends $e{constructor(e){super(),me(this,e,hr,pr,o,{ga:0,index:5,sz:6})}}function Dr(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[2]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[4]),f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){4&t&&k(r,e[2]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function mr(e,t,n){let{ga:r}=t,{sz:u="30px"}=t,i="+",o=ze(r);Qn("--cmd-update-views",(function(e){n(2,i=e.op)}));return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"sz"in e&&n(1,u=e.sz)},[r,u,i,o,()=>Ft.playRandom()]}class $r extends $e{constructor(e){super(),me(this,e,mr,Dr,o,{ga:0,sz:1})}}function vr(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[1]),N(n,"class",t[2]),M(n,"grid-area",t[0]),M(n,"font-size",t[3]+"px")},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[4]),f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){2&t&&k(r,e[1]),4&t&&N(n,"class",e[2]),1&t&&M(n,"grid-area",e[0]),8&t&&M(n,"font-size",e[3]+"px")},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function Cr(e,t,n){let r,u,i,o,{ga:s}=t,{index:a}=t,{sz:l=30}=t;return Qn("--cmd-update-views",(function(e){n(1,r=function(e){return"first-click"===e.state?"??":e.answers[a].toLocaleString("en")}(e)),n(2,u=function(e){return"first-click"===e.state?"bg-gray-100":"active"===e.state?"bg-orange-200":e.rightAt===a?"bg-green-200":e.clickedAt!==a?"bg-gray-100":"bg-red-200"}(e)),i=r.length<=3?1.2:2,n(3,o=l-i*r.length)})),e.$$set=e=>{"ga"in e&&n(0,s=e.ga),"index"in e&&n(5,a=e.index),"sz"in e&&n(6,l=e.sz)},[s,r,u,o,function(){Kn("--evt-answer",{index:a})},a,l]}class Fr extends $e{constructor(e){super(),me(this,e,Cr,vr,o,{ga:0,index:5,sz:6})}}function Ar(t){let n,r,i,o,s,a,l,c;return{c(){n=w("div"),r=w("button"),i=y(t[2]),o=b(),s=w("button"),a=y(t[3]),N(r,"class",t[4]),N(s,"class",t[4]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,t){C(e,n,t),m(n,r),m(r,i),m(n,o),m(n,s),m(s,a),l||(c=[f(xt.call(null,r)),f(Bt.call(null,r)),f(xt.call(null,s)),f(Bt.call(null,s))],l=!0)},p(e,[t]){4&t&&k(i,e[2]),8&t&&k(a,e[3]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),l=!1,u(c)}}}function wr(e,t,n){let{ga:r}=t,{sz:u="15px"}=t,i=ze(r),o="?",s="?";return Qn("--cmd-update-views",(function(e){n(2,o=e.showHint?e.pair[0].toString():"?"),n(3,s=e.showHint?e.pair[1].toString():"?")})),e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"sz"in e&&n(1,u=e.sz)},[r,u,o,s,i]}class Er extends $e{constructor(e){super(),me(this,e,wr,Ar,o,{ga:0,sz:1})}}function yr(t){let n,r,i,o,s;return{c(){n=w("div"),r=w("button"),i=y(t[2]),N(r,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,t){C(e,n,t),m(n,r),m(r,i),o||(s=[f(xt.call(null,r)),f(Bt.call(null,r))],o=!0)},p(e,[t]){4&t&&k(i,e[2]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),o=!1,u(s)}}}function br(e,t,n){let r,{ga:u}=t,{sz:i="15px"}=t,o=ze(u);return Qn("--cmd-update-views",(function(e){n(2,r=e.showHint?e.sumDigit.toString():"?")})),e.$$set=e=>{"ga"in e&&n(0,u=e.ga),"sz"in e&&n(1,i=e.sz)},[u,i,r,o]}class xr extends $e{constructor(e){super(),me(this,e,br,yr,o,{ga:0,sz:1})}}function Br(e){let t,n,r,u,i,o,s,a,l,c,f,d,p,h,g,D,m,$,v,A,w,E;t=new dr({props:{ga:"cnt"}}),r=new Er({props:{ga:"p1"}}),i=new xr({props:{ga:"p2"}}),s=new It({props:{ga:"clk"}}),l=new gr({props:{ga:"lhs",index:0}}),f=new $r({props:{ga:"op"}}),p=new gr({props:{ga:"rhs",index:1}}),g=new Fr({props:{ga:"a1",index:0}}),m=new Fr({props:{ga:"a2",index:1}}),v=new Fr({props:{ga:"a3",index:2}});return w=new Un({props:{}}),e[2](w),{c(){he(t.$$.fragment),n=b(),he(r.$$.fragment),u=b(),he(i.$$.fragment),o=b(),he(s.$$.fragment),a=b(),he(l.$$.fragment),c=b(),he(f.$$.fragment),d=b(),he(p.$$.fragment),h=b(),he(g.$$.fragment),D=b(),he(m.$$.fragment),$=b(),he(v.$$.fragment),A=b(),he(w.$$.fragment)},m(e,F){ge(t,e,F),C(e,n,F),ge(r,e,F),C(e,u,F),ge(i,e,F),C(e,o,F),ge(s,e,F),C(e,a,F),ge(l,e,F),C(e,c,F),ge(f,e,F),C(e,d,F),ge(p,e,F),C(e,h,F),ge(g,e,F),C(e,D,F),ge(m,e,F),C(e,$,F),ge(v,e,F),C(e,A,F),ge(w,e,F),E=!0},p(e,t){w.$set({})},i(e){E||(ae(t.$$.fragment,e),ae(r.$$.fragment,e),ae(i.$$.fragment,e),ae(s.$$.fragment,e),ae(l.$$.fragment,e),ae(f.$$.fragment,e),ae(p.$$.fragment,e),ae(g.$$.fragment,e),ae(m.$$.fragment,e),ae(v.$$.fragment,e),ae(w.$$.fragment,e),E=!0)},o(e){le(t.$$.fragment,e),le(r.$$.fragment,e),le(i.$$.fragment,e),le(s.$$.fragment,e),le(l.$$.fragment,e),le(f.$$.fragment,e),le(p.$$.fragment,e),le(g.$$.fragment,e),le(m.$$.fragment,e),le(v.$$.fragment,e),le(w.$$.fragment,e),E=!1},d(C){De(t,C),C&&F(n),De(r,C),C&&F(u),De(i,C),C&&F(o),De(s,C),C&&F(a),De(l,C),C&&F(c),De(f,C),C&&F(d),De(p,C),C&&F(h),De(g,C),C&&F(D),De(m,C),C&&F($),De(v,C),C&&F(A),e[2](null),De(w,C)}}}function Nr(e){let t,n;return t=new Ie({props:{layout:e[1],$$slots:{default:[Br]},$$scope:{ctx:e}}}),t.$on("click",e[3]),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,[n]){const r={};33&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function kr(e,t,n){let r;Qn("--cmd-new-round",(()=>lr.newRound())),Qn("--evt-answer",(e=>lr.gotAnswer(e))),Qn("--evt-click",(()=>lr.gotClicked())),Qn("--evt-done",(()=>(r.play(),void lr.done()))),Qn("--evt-yes",(()=>lr.yes())),Qn("--evt-no",(()=>lr.no())),Qn("--cmd-idle",(()=>lr.idle())),Kn("--cmd-new-round");return[r,{areas:'\n            "cnt   p1   clk "\n            "cnt   p2   clk "\n            "lhs   op   rhs "\n            "a1    a2   a3  "\n        ',cols:"1fr 1fr 1fr",rows:"30px 30px 100px 100px",bgColors:{cnt:"bg-purple-300",p1:"bg-yellow-100",p2:"bg-pink-100",lhs:"bg-green-100",op:"bg-yellow-200",rhs:"bg-green-100"}},function(e){j[e?"unshift":"push"]((()=>{r=e,n(0,r)}))},()=>Kn("--evt-click")]}class Mr extends $e{constructor(e){super(),me(this,e,kr,Nr,o,{})}}function Sr(e,t){Gn(e,t)}function qr(e,t){Xn(e,t)}let zr;const Or=new class{get game(){return zr}newRound(){zr={roundsLeft:2,nums:[4,5],divisors:[{factor:2,mxPow:3},{factor:3,mxPow:3},{factor:5,mxPow:2},{factor:7,mxPow:1}]},qr("--cmd-set-models",zr)}go(){}done(){}idle(){}};function Ir(t){let n,r,i,o;return{c(){n=w("button"),r=y(Lr),N(n,"class",t[2]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[3]),f(xt.call(null,n))],i=!0)},p(e,[t]){1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}let Lr="GO";function Pr(e,t,n){let{ga:r}=t,{sz:u="30px"}=t,i=ze(r);return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"sz"in e&&n(1,u=e.sz)},[r,u,i,function(){qr("--evt-go"),Ft.play(lt(["yes","no","idle"]))}]}class _r extends $e{constructor(e){super(),me(this,e,Pr,Ir,o,{ga:0,sz:1})}}function Tr(t){let n,r,u,i;return{c(){n=w("button"),r=y(t[2]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,t){C(e,n,t),m(n,r),u||(i=f(xt.call(null,n)),u=!0)},p(e,[t]){4&t&&k(r,e[2]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),u=!1,i()}}}function Vr(e,t,n){let{ga:r}=t,{sz:u="30px"}=t,i=2,o=ze(r);return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"sz"in e&&n(1,u=e.sz)},[r,u,i,o,function(e){n(2,i=e)}]}class Hr extends $e{constructor(e){super(),me(this,e,Vr,Tr,o,{ga:0,sz:1,setModel:4})}get setModel(){return this.$$.ctx[4]}}function Rr(t){let n,r,i,o,s=(t[2]>0?t[4]:t[3].factor)+"";return{c(){n=w("button"),r=y(s),N(n,"class",t[5]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[6]),f(xt.call(null,n))],i=!0)},p(e,[t]){28&t&&s!==(s=(e[2]>0?e[4]:e[3].factor)+"")&&k(r,s),32&t&&N(n,"class",e[5]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function jr(e,t,n){let r,u,{ga:i}=t,{sz:o="30px"}=t,s={factor:2,mxPow:3,value:1,wrong:!1},a=!1,l=0;function c(){n(4,u=s.value),n(9,a=s.wrong)}return Sr("--cmd-update-views",(()=>c())),e.$$set=e=>{"ga"in e&&n(0,i=e.ga),"sz"in e&&n(1,o=e.sz)},e.$$.update=()=>{516&e.$$.dirty&&n(5,r=a?"bg-red-100":l>0?"bg-green-100":"bg-gray-100")},[i,o,l,s,u,r,function(){n(2,l++,l)==s.mxPow&&n(2,l=0),n(3,s.value=s.factor**l,s),qr("--evt-acted"),c()},c,function(e){n(3,s=e)},a]}class Zr extends $e{constructor(e){super(),me(this,e,jr,Rr,o,{ga:0,sz:1,update:7,setModel:8})}get update(){return this.$$.ctx[7]}get setModel(){return this.$$.ctx[8]}}function Ur(t){let n,r,u,i;return{c(){n=w("button"),r=y(t[2]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[1])},m(e,t){C(e,n,t),m(n,r),u||(i=f(xt.call(null,n)),u=!0)},p(e,[t]){4&t&&k(r,e[2]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1])},i:e,o:e,d(e){e&&F(n),u=!1,i()}}}function Jr(e,t,n){let r=1,{ga:u}=t,{sz:i="20px"}=t,o=ze(u);return e.$$set=e=>{"ga"in e&&n(0,u=e.ga),"sz"in e&&n(1,i=e.sz)},[u,i,r,o,function(e){n(2,r=e)}]}class Wr extends $e{constructor(e){super(),me(this,e,Jr,Ur,o,{ga:0,sz:1,setModel:4})}get setModel(){return this.$$.ctx[4]}}function Gr(e,t,n){const r=e.slice();return r[15]=t[n],r[16]=t,r[17]=n,r}function Xr(e){let t,n,r,u;return t=new Wr({props:{ga:"cnt"}}),e[6](t),r=new It({props:{ga:"clk"}}),{c(){he(t.$$.fragment),n=b(),he(r.$$.fragment)},m(e,i){ge(t,e,i),C(e,n,i),ge(r,e,i),u=!0},p(e,n){t.$set({})},i(e){u||(ae(t.$$.fragment,e),ae(r.$$.fragment,e),u=!0)},o(e){le(t.$$.fragment,e),le(r.$$.fragment,e),u=!1},d(u){e[6](null),De(t,u),u&&F(n),De(r,u)}}}function Yr(e){let t,n,r,u;t=new Hr({props:{ga:"lhs"}}),e[7](t);return r=new Hr({props:{ga:"rhs"}}),e[8](r),{c(){he(t.$$.fragment),n=b(),he(r.$$.fragment)},m(e,i){ge(t,e,i),C(e,n,i),ge(r,e,i),u=!0},p(e,n){t.$set({});r.$set({})},i(e){u||(ae(t.$$.fragment,e),ae(r.$$.fragment,e),u=!0)},o(e){le(t.$$.fragment,e),le(r.$$.fragment,e),u=!1},d(u){e[7](null),De(t,u),u&&F(n),e[8](null),De(r,u)}}}function Qr(e){let t,n,r=e[15];const u=()=>e[9](t,r),i=()=>e[9](null,r);let o={ga:e[15]+","};return t=new Zr({props:o}),u(),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){r!==e[15]&&(i(),r=e[15],u());t.$set({})},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){i(),De(t,e)}}}function Kr(e){let t,n,r=Xe(0,8),u=[];for(let t=0;t<r.length;t+=1)u[t]=Qr(Gr(e,r,t));const i=e=>le(u[e],1,1,(()=>{u[e]=null}));return{c(){for(let e=0;e<u.length;e+=1)u[e].c();t=x()},m(e,r){for(let t=0;t<u.length;t+=1)u[t].m(e,r);C(e,t,r),n=!0},p(e,n){if(2&n){let o;for(r=Xe(0,8),o=0;o<r.length;o+=1){const i=Gr(e,r,o);u[o]?(u[o].p(i,n),ae(u[o],1)):(u[o]=Qr(i),u[o].c(),ae(u[o],1),u[o].m(t.parentNode,t))}for(oe(),o=r.length;o<u.length;o+=1)i(o);se()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ae(u[e]);n=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)le(u[e]);n=!1},d(e){A(u,e),e&&F(t)}}}function eu(e){let t,n,r,u,i,o,s,a,l,c;t=new Ie({props:{layout:e[3],ga:"l1",$$slots:{default:[Xr]},$$scope:{ctx:e}}}),r=new Ie({props:{layout:e[4],ga:"l2",$$slots:{default:[Yr]},$$scope:{ctx:e}}}),i=new Ie({props:{layout:e[5],ga:"l3",$$slots:{default:[Kr]},$$scope:{ctx:e}}}),s=new _r({props:{ga:"go"}});return l=new Un({props:{}}),e[10](l),{c(){he(t.$$.fragment),n=b(),he(r.$$.fragment),u=b(),he(i.$$.fragment),o=b(),he(s.$$.fragment),a=b(),he(l.$$.fragment)},m(e,f){ge(t,e,f),C(e,n,f),ge(r,e,f),C(e,u,f),ge(i,e,f),C(e,o,f),ge(s,e,f),C(e,a,f),ge(l,e,f),c=!0},p(e,n){const u={};262146&n&&(u.$$scope={dirty:n,ctx:e}),t.$set(u);const o={};262146&n&&(o.$$scope={dirty:n,ctx:e}),r.$set(o);const s={};262146&n&&(s.$$scope={dirty:n,ctx:e}),i.$set(s);l.$set({})},i(e){c||(ae(t.$$.fragment,e),ae(r.$$.fragment,e),ae(i.$$.fragment,e),ae(s.$$.fragment,e),ae(l.$$.fragment,e),c=!0)},o(e){le(t.$$.fragment,e),le(r.$$.fragment,e),le(i.$$.fragment,e),le(s.$$.fragment,e),le(l.$$.fragment,e),c=!1},d(c){De(t,c),c&&F(n),De(r,c),c&&F(u),De(i,c),c&&F(o),De(s,c),c&&F(a),e[10](null),De(l,c)}}}function tu(e){let t,n;return t=new Ie({props:{layout:e[2],$$slots:{default:[eu]},$$scope:{ctx:e}}}),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,[n]){const r={};262147&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function nu(e,t,n){let r;Sr("--cmd-new-round",(()=>Or.newRound())),Sr("--evt-done",(()=>(r.play(),void Or.done()))),Sr("--cmd-idle",(()=>Or.idle())),qr("--cmd-new-round");let u={areas:'\n            "l1"\n            "l2"\n            "l3"\n            "l4"\n            "go"\n        ',cols:"1fr",rows:"60px 80px 150px 150px 80px"},i={areas:'\n            "cnt . clk"\n        ',cols:"2fr 1fr 2fr",rows:"1fr"},o={areas:'\n            ". lhs rhs ."\n        ',cols:"1fr 1fr 1fr 1fr",rows:"1fr"},s={areas:'\n            "0 1 2 3"\n            "4 5 6 7"\n        ',cols:"1fr 1fr 1fr 1fr",rows:"1fr 1fr"},a={count:null,nums:new Array(2),factors:new Array(8),gcd:new Array(4),lcm:new Array(4)};return Sr("--evt-go",(()=>{lt(Or.game.divisors).wrong=!0,qr("--cmd-update-views")})),Sr("--cmd-set-models",(e=>{a.count.setModel(e.roundsLeft),a.nums[0].setModel(e.nums[0]),a.nums[1].setModel(e.nums[1]),e.divisors.forEach(((e,t)=>a.factors[t].setModel(e)))})),[r,a,u,i,o,s,function(e){j[e?"unshift":"push"]((()=>{a.count=e,n(1,a)}))},function(e){j[e?"unshift":"push"]((()=>{a.nums[0]=e,n(1,a)}))},function(e){j[e?"unshift":"push"]((()=>{a.nums[1]=e,n(1,a)}))},function(e,t){j[e?"unshift":"push"]((()=>{a.factors[t]=e,n(1,a)}))},function(e){j[e?"unshift":"push"]((()=>{r=e,n(0,r)}))}]}class ru extends $e{constructor(e){super(),me(this,e,nu,tu,o,{})}}
/*!
     *  decimal.js v10.4.3
     *  An arbitrary-precision Decimal type for JavaScript.
     *  https://github.com/MikeMcl/decimal.js
     *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
     *  MIT Licence
     */var uu,iu,ou=9e15,su=1e9,au="0123456789abcdef",lu="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",cu="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",fu={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-ou,maxE:ou,crypto:!1},du=!0,pu="[DecimalError] ",hu=pu+"Invalid argument: ",gu=pu+"Precision limit exceeded",Du=pu+"crypto unavailable",mu="[object Decimal]",$u=Math.floor,vu=Math.pow,Cu=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,Fu=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,Au=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,wu=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Eu=1e7,yu=lu.length-1,bu=cu.length-1,xu={toStringTag:mu};function Bu(e){var t,n,r,u=e.length-1,i="",o=e[0];if(u>0){for(i+=o,t=1;t<u;t++)(n=7-(r=e[t]+"").length)&&(i+=_u(n)),i+=r;(n=7-(r=(o=e[t])+"").length)&&(i+=_u(n))}else if(0===o)return"0";for(;o%10==0;)o/=10;return i+o}function Nu(e,t,n){if(e!==~~e||e<t||e>n)throw Error(hu+e)}function ku(e,t,n,r){var u,i,o,s;for(i=e[0];i>=10;i/=10)--t;return--t<0?(t+=7,u=0):(u=Math.ceil((t+1)/7),t%=7),i=vu(10,7-t),s=e[u]%i|0,null==r?t<3?(0==t?s=s/100|0:1==t&&(s=s/10|0),o=n<4&&99999==s||n>3&&49999==s||5e4==s||0==s):o=(n<4&&s+1==i||n>3&&s+1==i/2)&&(e[u+1]/i/100|0)==vu(10,t-2)-1||(s==i/2||0==s)&&0==(e[u+1]/i/100|0):t<4?(0==t?s=s/1e3|0:1==t?s=s/100|0:2==t&&(s=s/10|0),o=(r||n<4)&&9999==s||!r&&n>3&&4999==s):o=((r||n<4)&&s+1==i||!r&&n>3&&s+1==i/2)&&(e[u+1]/i/1e3|0)==vu(10,t-3)-1,o}function Mu(e,t,n){for(var r,u,i=[0],o=0,s=e.length;o<s;){for(u=i.length;u--;)i[u]*=t;for(i[0]+=au.indexOf(e.charAt(o++)),r=0;r<i.length;r++)i[r]>n-1&&(void 0===i[r+1]&&(i[r+1]=0),i[r+1]+=i[r]/n|0,i[r]%=n)}return i.reverse()}xu.absoluteValue=xu.abs=function(){var e=new this.constructor(this);return e.s<0&&(e.s=1),qu(e)},xu.ceil=function(){return qu(new this.constructor(this),this.e+1,2)},xu.clampedTo=xu.clamp=function(e,t){var n=this,r=n.constructor;if(e=new r(e),t=new r(t),!e.s||!t.s)return new r(NaN);if(e.gt(t))throw Error(hu+t);return n.cmp(e)<0?e:n.cmp(t)>0?t:new r(n)},xu.comparedTo=xu.cmp=function(e){var t,n,r,u,i=this,o=i.d,s=(e=new i.constructor(e)).d,a=i.s,l=e.s;if(!o||!s)return a&&l?a!==l?a:o===s?0:!o^a<0?1:-1:NaN;if(!o[0]||!s[0])return o[0]?a:s[0]?-l:0;if(a!==l)return a;if(i.e!==e.e)return i.e>e.e^a<0?1:-1;for(t=0,n=(r=o.length)<(u=s.length)?r:u;t<n;++t)if(o[t]!==s[t])return o[t]>s[t]^a<0?1:-1;return r===u?0:r>u^a<0?1:-1},xu.cosine=xu.cos=function(){var e,t,n=this,r=n.constructor;return n.d?n.d[0]?(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r,u;if(t.isZero())return t;r=t.d.length,r<32?u=(1/Gu(4,n=Math.ceil(r/3))).toString():(n=16,u="2.3283064365386962890625e-10");e.precision+=n,t=Wu(e,1,t.times(u),new e(1));for(var i=n;i--;){var o=t.times(t);t=o.times(o).minus(o).times(8).plus(1)}return e.precision-=n,t}(r,Xu(r,n)),r.precision=e,r.rounding=t,qu(2==iu||3==iu?n.neg():n,e,t,!0)):new r(1):new r(NaN)},xu.cubeRoot=xu.cbrt=function(){var e,t,n,r,u,i,o,s,a,l,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(du=!1,(i=c.s*vu(c.s*c,1/3))&&Math.abs(i)!=1/0?r=new f(i.toString()):(n=Bu(c.d),(i=((e=c.e)-n.length+1)%3)&&(n+=1==i||-2==i?"0":"00"),i=vu(n,1/3),e=$u((e+1)/3)-(e%3==(e<0?-1:2)),(r=new f(n=i==1/0?"5e"+e:(n=i.toExponential()).slice(0,n.indexOf("e")+1)+e)).s=c.s),o=(e=f.precision)+3;;)if(l=(a=(s=r).times(s).times(s)).plus(c),r=Su(l.plus(c).times(s),l.plus(a),o+2,1),Bu(s.d).slice(0,o)===(n=Bu(r.d)).slice(0,o)){if("9999"!=(n=n.slice(o-3,o+1))&&(u||"4999"!=n)){+n&&(+n.slice(1)||"5"!=n.charAt(0))||(qu(r,e+1,1),t=!r.times(r).times(r).eq(c));break}if(!u&&(qu(s,e+1,0),s.times(s).times(s).eq(c))){r=s;break}o+=4,u=1}return du=!0,qu(r,e,f.rounding,t)},xu.decimalPlaces=xu.dp=function(){var e,t=this.d,n=NaN;if(t){if(n=7*((e=t.length-1)-$u(this.e/7)),e=t[e])for(;e%10==0;e/=10)n--;n<0&&(n=0)}return n},xu.dividedBy=xu.div=function(e){return Su(this,new this.constructor(e))},xu.dividedToIntegerBy=xu.divToInt=function(e){var t=this.constructor;return qu(Su(this,new t(e),0,1,1),t.precision,t.rounding)},xu.equals=xu.eq=function(e){return 0===this.cmp(e)},xu.floor=function(){return qu(new this.constructor(this),this.e+1,3)},xu.greaterThan=xu.gt=function(e){return this.cmp(e)>0},xu.greaterThanOrEqualTo=xu.gte=function(e){var t=this.cmp(e);return 1==t||0===t},xu.hyperbolicCosine=xu.cosh=function(){var e,t,n,r,u,i=this,o=i.constructor,s=new o(1);if(!i.isFinite())return new o(i.s?1/0:NaN);if(i.isZero())return s;n=o.precision,r=o.rounding,o.precision=n+Math.max(i.e,i.sd())+4,o.rounding=1,(u=i.d.length)<32?t=(1/Gu(4,e=Math.ceil(u/3))).toString():(e=16,t="2.3283064365386962890625e-10"),i=Wu(o,1,i.times(t),new o(1),!0);for(var a,l=e,c=new o(8);l--;)a=i.times(i),i=s.minus(a.times(c.minus(a.times(c))));return qu(i,o.precision=n,o.rounding=r,!0)},xu.hyperbolicSine=xu.sinh=function(){var e,t,n,r,u=this,i=u.constructor;if(!u.isFinite()||u.isZero())return new i(u);if(t=i.precision,n=i.rounding,i.precision=t+Math.max(u.e,u.sd())+4,i.rounding=1,(r=u.d.length)<3)u=Wu(i,2,u,u,!0);else{e=(e=1.4*Math.sqrt(r))>16?16:0|e,u=Wu(i,2,u=u.times(1/Gu(5,e)),u,!0);for(var o,s=new i(5),a=new i(16),l=new i(20);e--;)o=u.times(u),u=u.times(s.plus(o.times(a.times(o).plus(l))))}return i.precision=t,i.rounding=n,qu(u,t,n,!0)},xu.hyperbolicTangent=xu.tanh=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+7,r.rounding=1,Su(n.sinh(),n.cosh(),r.precision=e,r.rounding=t)):new r(n.s)},xu.inverseCosine=xu.acos=function(){var e,t=this,n=t.constructor,r=t.abs().cmp(1),u=n.precision,i=n.rounding;return-1!==r?0===r?t.isNeg()?Lu(n,u,i):new n(0):new n(NaN):t.isZero()?Lu(n,u+4,i).times(.5):(n.precision=u+6,n.rounding=1,t=t.asin(),e=Lu(n,u+4,i).times(.5),n.precision=u,n.rounding=i,e.minus(t))},xu.inverseHyperbolicCosine=xu.acosh=function(){var e,t,n=this,r=n.constructor;return n.lte(1)?new r(n.eq(1)?0:NaN):n.isFinite()?(e=r.precision,t=r.rounding,r.precision=e+Math.max(Math.abs(n.e),n.sd())+4,r.rounding=1,du=!1,n=n.times(n).minus(1).sqrt().plus(n),du=!0,r.precision=e,r.rounding=t,n.ln()):new r(n)},xu.inverseHyperbolicSine=xu.asinh=function(){var e,t,n=this,r=n.constructor;return!n.isFinite()||n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+2*Math.max(Math.abs(n.e),n.sd())+6,r.rounding=1,du=!1,n=n.times(n).plus(1).sqrt().plus(n),du=!0,r.precision=e,r.rounding=t,n.ln())},xu.inverseHyperbolicTangent=xu.atanh=function(){var e,t,n,r,u=this,i=u.constructor;return u.isFinite()?u.e>=0?new i(u.abs().eq(1)?u.s/0:u.isZero()?u:NaN):(e=i.precision,t=i.rounding,r=u.sd(),Math.max(r,e)<2*-u.e-1?qu(new i(u),e,t,!0):(i.precision=n=r-u.e,u=Su(u.plus(1),new i(1).minus(u),n+e,1),i.precision=e+4,i.rounding=1,u=u.ln(),i.precision=e,i.rounding=t,u.times(.5))):new i(NaN)},xu.inverseSine=xu.asin=function(){var e,t,n,r,u=this,i=u.constructor;return u.isZero()?new i(u):(t=u.abs().cmp(1),n=i.precision,r=i.rounding,-1!==t?0===t?((e=Lu(i,n+4,r).times(.5)).s=u.s,e):new i(NaN):(i.precision=n+6,i.rounding=1,u=u.div(new i(1).minus(u.times(u)).sqrt().plus(1)).atan(),i.precision=n,i.rounding=r,u.times(2)))},xu.inverseTangent=xu.atan=function(){var e,t,n,r,u,i,o,s,a,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(l.isFinite()){if(l.isZero())return new c(l);if(l.abs().eq(1)&&f+4<=bu)return(o=Lu(c,f+4,d).times(.25)).s=l.s,o}else{if(!l.s)return new c(NaN);if(f+4<=bu)return(o=Lu(c,f+4,d).times(.5)).s=l.s,o}for(c.precision=s=f+10,c.rounding=1,e=n=Math.min(28,s/7+2|0);e;--e)l=l.div(l.times(l).plus(1).sqrt().plus(1));for(du=!1,t=Math.ceil(s/7),r=1,a=l.times(l),o=new c(l),u=l;-1!==e;)if(u=u.times(a),i=o.minus(u.div(r+=2)),u=u.times(a),void 0!==(o=i.plus(u.div(r+=2))).d[t])for(e=t;o.d[e]===i.d[e]&&e--;);return n&&(o=o.times(2<<n-1)),du=!0,qu(o,c.precision=f,c.rounding=d,!0)},xu.isFinite=function(){return!!this.d},xu.isInteger=xu.isInt=function(){return!!this.d&&$u(this.e/7)>this.d.length-2},xu.isNaN=function(){return!this.s},xu.isNegative=xu.isNeg=function(){return this.s<0},xu.isPositive=xu.isPos=function(){return this.s>0},xu.isZero=function(){return!!this.d&&0===this.d[0]},xu.lessThan=xu.lt=function(e){return this.cmp(e)<0},xu.lessThanOrEqualTo=xu.lte=function(e){return this.cmp(e)<1},xu.logarithm=xu.log=function(e){var t,n,r,u,i,o,s,a,l=this,c=l.constructor,f=c.precision,d=c.rounding;if(null==e)e=new c(10),t=!0;else{if(n=(e=new c(e)).d,e.s<0||!n||!n[0]||e.eq(1))return new c(NaN);t=e.eq(10)}if(n=l.d,l.s<0||!n||!n[0]||l.eq(1))return new c(n&&!n[0]?-1/0:1!=l.s?NaN:n?0:1/0);if(t)if(n.length>1)i=!0;else{for(u=n[0];u%10==0;)u/=10;i=1!==u}if(du=!1,o=ju(l,s=f+5),r=t?Iu(c,s+10):ju(e,s),ku((a=Su(o,r,s,1)).d,u=f,d))do{if(o=ju(l,s+=10),r=t?Iu(c,s+10):ju(e,s),a=Su(o,r,s,1),!i){+Bu(a.d).slice(u+1,u+15)+1==1e14&&(a=qu(a,f+1,0));break}}while(ku(a.d,u+=10,d));return du=!0,qu(a,f,d)},xu.minus=xu.sub=function(e){var t,n,r,u,i,o,s,a,l,c,f,d,p=this,h=p.constructor;if(e=new h(e),!p.d||!e.d)return p.s&&e.s?p.d?e.s=-e.s:e=new h(e.d||p.s!==e.s?p:NaN):e=new h(NaN),e;if(p.s!=e.s)return e.s=-e.s,p.plus(e);if(l=p.d,d=e.d,s=h.precision,a=h.rounding,!l[0]||!d[0]){if(d[0])e.s=-e.s;else{if(!l[0])return new h(3===a?-0:0);e=new h(p)}return du?qu(e,s,a):e}if(n=$u(e.e/7),c=$u(p.e/7),l=l.slice(),i=c-n){for((f=i<0)?(t=l,i=-i,o=d.length):(t=d,n=c,o=l.length),i>(r=Math.max(Math.ceil(s/7),o)+2)&&(i=r,t.length=1),t.reverse(),r=i;r--;)t.push(0);t.reverse()}else{for((f=(r=l.length)<(o=d.length))&&(o=r),r=0;r<o;r++)if(l[r]!=d[r]){f=l[r]<d[r];break}i=0}for(f&&(t=l,l=d,d=t,e.s=-e.s),o=l.length,r=d.length-o;r>0;--r)l[o++]=0;for(r=d.length;r>i;){if(l[--r]<d[r]){for(u=r;u&&0===l[--u];)l[u]=Eu-1;--l[u],l[r]+=Eu}l[r]-=d[r]}for(;0===l[--o];)l.pop();for(;0===l[0];l.shift())--n;return l[0]?(e.d=l,e.e=Ou(l,n),du?qu(e,s,a):e):new h(3===a?-0:0)},xu.modulo=xu.mod=function(e){var t,n=this,r=n.constructor;return e=new r(e),!n.d||!e.s||e.d&&!e.d[0]?new r(NaN):!e.d||n.d&&!n.d[0]?qu(new r(n),r.precision,r.rounding):(du=!1,9==r.modulo?(t=Su(n,e.abs(),0,3,1)).s*=e.s:t=Su(n,e,0,r.modulo,1),t=t.times(e),du=!0,n.minus(t))},xu.naturalExponential=xu.exp=function(){return Ru(this)},xu.naturalLogarithm=xu.ln=function(){return ju(this)},xu.negated=xu.neg=function(){var e=new this.constructor(this);return e.s=-e.s,qu(e)},xu.plus=xu.add=function(e){var t,n,r,u,i,o,s,a,l,c,f=this,d=f.constructor;if(e=new d(e),!f.d||!e.d)return f.s&&e.s?f.d||(e=new d(e.d||f.s===e.s?f:NaN)):e=new d(NaN),e;if(f.s!=e.s)return e.s=-e.s,f.minus(e);if(l=f.d,c=e.d,s=d.precision,a=d.rounding,!l[0]||!c[0])return c[0]||(e=new d(f)),du?qu(e,s,a):e;if(i=$u(f.e/7),r=$u(e.e/7),l=l.slice(),u=i-r){for(u<0?(n=l,u=-u,o=c.length):(n=c,r=i,o=l.length),u>(o=(i=Math.ceil(s/7))>o?i+1:o+1)&&(u=o,n.length=1),n.reverse();u--;)n.push(0);n.reverse()}for((o=l.length)-(u=c.length)<0&&(u=o,n=c,c=l,l=n),t=0;u;)t=(l[--u]=l[u]+c[u]+t)/Eu|0,l[u]%=Eu;for(t&&(l.unshift(t),++r),o=l.length;0==l[--o];)l.pop();return e.d=l,e.e=Ou(l,r),du?qu(e,s,a):e},xu.precision=xu.sd=function(e){var t,n=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(hu+e);return n.d?(t=Pu(n.d),e&&n.e+1>t&&(t=n.e+1)):t=NaN,t},xu.round=function(){var e=this,t=e.constructor;return qu(new t(e),e.e+1,t.rounding)},xu.sine=xu.sin=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+Math.max(n.e,n.sd())+7,r.rounding=1,n=function(e,t){var n,r=t.d.length;if(r<3)return t.isZero()?t:Wu(e,2,t,t);n=(n=1.4*Math.sqrt(r))>16?16:0|n,t=t.times(1/Gu(5,n)),t=Wu(e,2,t,t);for(var u,i=new e(5),o=new e(16),s=new e(20);n--;)u=t.times(t),t=t.times(i.plus(u.times(o.times(u).minus(s))));return t}(r,Xu(r,n)),r.precision=e,r.rounding=t,qu(iu>2?n.neg():n,e,t,!0)):new r(NaN)},xu.squareRoot=xu.sqrt=function(){var e,t,n,r,u,i,o=this,s=o.d,a=o.e,l=o.s,c=o.constructor;if(1!==l||!s||!s[0])return new c(!l||l<0&&(!s||s[0])?NaN:s?o:1/0);for(du=!1,0==(l=Math.sqrt(+o))||l==1/0?(((t=Bu(s)).length+a)%2==0&&(t+="0"),l=Math.sqrt(t),a=$u((a+1)/2)-(a<0||a%2),r=new c(t=l==1/0?"5e"+a:(t=l.toExponential()).slice(0,t.indexOf("e")+1)+a)):r=new c(l.toString()),n=(a=c.precision)+3;;)if(r=(i=r).plus(Su(o,i,n+2,1)).times(.5),Bu(i.d).slice(0,n)===(t=Bu(r.d)).slice(0,n)){if("9999"!=(t=t.slice(n-3,n+1))&&(u||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(qu(r,a+1,1),e=!r.times(r).eq(o));break}if(!u&&(qu(i,a+1,0),i.times(i).eq(o))){r=i;break}n+=4,u=1}return du=!0,qu(r,a,c.rounding,e)},xu.tangent=xu.tan=function(){var e,t,n=this,r=n.constructor;return n.isFinite()?n.isZero()?new r(n):(e=r.precision,t=r.rounding,r.precision=e+10,r.rounding=1,(n=n.sin()).s=1,n=Su(n,new r(1).minus(n.times(n)).sqrt(),e+10,0),r.precision=e,r.rounding=t,qu(2==iu||4==iu?n.neg():n,e,t,!0)):new r(NaN)},xu.times=xu.mul=function(e){var t,n,r,u,i,o,s,a,l,c=this,f=c.constructor,d=c.d,p=(e=new f(e)).d;if(e.s*=c.s,!(d&&d[0]&&p&&p[0]))return new f(!e.s||d&&!d[0]&&!p||p&&!p[0]&&!d?NaN:d&&p?0*e.s:e.s/0);for(n=$u(c.e/7)+$u(e.e/7),(a=d.length)<(l=p.length)&&(i=d,d=p,p=i,o=a,a=l,l=o),i=[],r=o=a+l;r--;)i.push(0);for(r=l;--r>=0;){for(t=0,u=a+r;u>r;)s=i[u]+p[r]*d[u-r-1]+t,i[u--]=s%Eu|0,t=s/Eu|0;i[u]=(i[u]+t)%Eu|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=Ou(i,n),du?qu(e,f.precision,f.rounding):e},xu.toBinary=function(e,t){return Yu(this,2,e,t)},xu.toDecimalPlaces=xu.toDP=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(Nu(e,0,su),void 0===t?t=r.rounding:Nu(t,0,8),qu(n,e+n.e+1,t))},xu.toExponential=function(e,t){var n,r=this,u=r.constructor;return void 0===e?n=zu(r,!0):(Nu(e,0,su),void 0===t?t=u.rounding:Nu(t,0,8),n=zu(r=qu(new u(r),e+1,t),!0,e+1)),r.isNeg()&&!r.isZero()?"-"+n:n},xu.toFixed=function(e,t){var n,r,u=this,i=u.constructor;return void 0===e?n=zu(u):(Nu(e,0,su),void 0===t?t=i.rounding:Nu(t,0,8),n=zu(r=qu(new i(u),e+u.e+1,t),!1,e+r.e+1)),u.isNeg()&&!u.isZero()?"-"+n:n},xu.toFraction=function(e){var t,n,r,u,i,o,s,a,l,c,f,d,p=this,h=p.d,g=p.constructor;if(!h)return new g(p);if(l=n=new g(1),r=a=new g(0),o=(i=(t=new g(r)).e=Pu(h)-p.e-1)%7,t.d[0]=vu(10,o<0?7+o:o),null==e)e=i>0?t:l;else{if(!(s=new g(e)).isInt()||s.lt(l))throw Error(hu+s);e=s.gt(t)?i>0?t:l:s}for(du=!1,s=new g(Bu(h)),c=g.precision,g.precision=i=7*h.length*2;f=Su(s,t,0,1,1),1!=(u=n.plus(f.times(r))).cmp(e);)n=r,r=u,u=l,l=a.plus(f.times(u)),a=u,u=t,t=s.minus(f.times(u)),s=u;return u=Su(e.minus(n),r,0,1,1),a=a.plus(u.times(l)),n=n.plus(u.times(r)),a.s=l.s=p.s,d=Su(l,r,i,1).minus(p).abs().cmp(Su(a,n,i,1).minus(p).abs())<1?[l,r]:[a,n],g.precision=c,du=!0,d},xu.toHexadecimal=xu.toHex=function(e,t){return Yu(this,16,e,t)},xu.toNearest=function(e,t){var n=this,r=n.constructor;if(n=new r(n),null==e){if(!n.d)return n;e=new r(1),t=r.rounding}else{if(e=new r(e),void 0===t?t=r.rounding:Nu(t,0,8),!n.d)return e.s?n:e;if(!e.d)return e.s&&(e.s=n.s),e}return e.d[0]?(du=!1,n=Su(n,e,0,t,1).times(e),du=!0,qu(n)):(e.s=n.s,n=e),n},xu.toNumber=function(){return+this},xu.toOctal=function(e,t){return Yu(this,8,e,t)},xu.toPower=xu.pow=function(e){var t,n,r,u,i,o,s=this,a=s.constructor,l=+(e=new a(e));if(!(s.d&&e.d&&s.d[0]&&e.d[0]))return new a(vu(+s,l));if((s=new a(s)).eq(1))return s;if(r=a.precision,i=a.rounding,e.eq(1))return qu(s,r,i);if((t=$u(e.e/7))>=e.d.length-1&&(n=l<0?-l:l)<=9007199254740991)return u=Tu(a,s,n,r),e.s<0?new a(1).div(u):qu(u,r,i);if((o=s.s)<0){if(t<e.d.length-1)return new a(NaN);if(0==(1&e.d[t])&&(o=1),0==s.e&&1==s.d[0]&&1==s.d.length)return s.s=o,s}return(t=0!=(n=vu(+s,l))&&isFinite(n)?new a(n+"").e:$u(l*(Math.log("0."+Bu(s.d))/Math.LN10+s.e+1)))>a.maxE+1||t<a.minE-1?new a(t>0?o/0:0):(du=!1,a.rounding=s.s=1,n=Math.min(12,(t+"").length),(u=Ru(e.times(ju(s,r+n)),r)).d&&ku((u=qu(u,r+5,1)).d,r,i)&&(t=r+10,+Bu((u=qu(Ru(e.times(ju(s,t+n)),t),t+5,1)).d).slice(r+1,r+15)+1==1e14&&(u=qu(u,r+1,0))),u.s=o,du=!0,a.rounding=i,qu(u,r,i))},xu.toPrecision=function(e,t){var n,r=this,u=r.constructor;return void 0===e?n=zu(r,r.e<=u.toExpNeg||r.e>=u.toExpPos):(Nu(e,1,su),void 0===t?t=u.rounding:Nu(t,0,8),n=zu(r=qu(new u(r),e,t),e<=r.e||r.e<=u.toExpNeg,e)),r.isNeg()&&!r.isZero()?"-"+n:n},xu.toSignificantDigits=xu.toSD=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(Nu(e,1,su),void 0===t?t=n.rounding:Nu(t,0,8)),qu(new n(this),e,t)},xu.toString=function(){var e=this,t=e.constructor,n=zu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()&&!e.isZero()?"-"+n:n},xu.truncated=xu.trunc=function(){return qu(new this.constructor(this),this.e+1,1)},xu.valueOf=xu.toJSON=function(){var e=this,t=e.constructor,n=zu(e,e.e<=t.toExpNeg||e.e>=t.toExpPos);return e.isNeg()?"-"+n:n};var Su=function(){function e(e,t,n){var r,u=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+u,e[i]=r%n|0,u=r/n|0;return u&&e.unshift(u),e}function t(e,t,n,r){var u,i;if(n!=r)i=n>r?1:-1;else for(u=i=0;u<n;u++)if(e[u]!=t[u]){i=e[u]>t[u]?1:-1;break}return i}function n(e,t,n,r){for(var u=0;n--;)e[n]-=u,u=e[n]<t[n]?1:0,e[n]=u*r+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,u,i,o,s,a){var l,c,f,d,p,h,g,D,m,$,v,C,F,A,w,E,y,b,x,B,N=r.constructor,k=r.s==u.s?1:-1,M=r.d,S=u.d;if(!(M&&M[0]&&S&&S[0]))return new N(r.s&&u.s&&(M?!S||M[0]!=S[0]:S)?M&&0==M[0]||!S?0*k:k/0:NaN);for(a?(p=1,c=r.e-u.e):(a=Eu,p=7,c=$u(r.e/p)-$u(u.e/p)),x=S.length,y=M.length,$=(m=new N(k)).d=[],f=0;S[f]==(M[f]||0);f++);if(S[f]>(M[f]||0)&&c--,null==i?(A=i=N.precision,o=N.rounding):A=s?i+(r.e-u.e)+1:i,A<0)$.push(1),h=!0;else{if(A=A/p+2|0,f=0,1==x){for(d=0,S=S[0],A++;(f<y||d)&&A--;f++)w=d*a+(M[f]||0),$[f]=w/S|0,d=w%S|0;h=d||f<y}else{for((d=a/(S[0]+1)|0)>1&&(S=e(S,d,a),M=e(M,d,a),x=S.length,y=M.length),E=x,C=(v=M.slice(0,x)).length;C<x;)v[C++]=0;(B=S.slice()).unshift(0),b=S[0],S[1]>=a/2&&++b;do{d=0,(l=t(S,v,x,C))<0?(F=v[0],x!=C&&(F=F*a+(v[1]||0)),(d=F/b|0)>1?(d>=a&&(d=a-1),1==(l=t(g=e(S,d,a),v,D=g.length,C=v.length))&&(d--,n(g,x<D?B:S,D,a))):(0==d&&(l=d=1),g=S.slice()),(D=g.length)<C&&g.unshift(0),n(v,g,C,a),-1==l&&(l=t(S,v,x,C=v.length))<1&&(d++,n(v,x<C?B:S,C,a)),C=v.length):0===l&&(d++,v=[0]),$[f++]=d,l&&v[0]?v[C++]=M[E]||0:(v=[M[E]],C=1)}while((E++<y||void 0!==v[0])&&A--);h=void 0!==v[0]}$[0]||$.shift()}if(1==p)m.e=c,uu=h;else{for(f=1,d=$[0];d>=10;d/=10)f++;m.e=f+c*p-1,qu(m,s?i+m.e+1:i,o,h)}return m}}();function qu(e,t,n,r){var u,i,o,s,a,l,c,f,d,p=e.constructor;e:if(null!=t){if(!(f=e.d))return e;for(u=1,s=f[0];s>=10;s/=10)u++;if((i=t-u)<0)i+=7,o=t,a=(c=f[d=0])/vu(10,u-o-1)%10|0;else if((d=Math.ceil((i+1)/7))>=(s=f.length)){if(!r)break e;for(;s++<=d;)f.push(0);c=a=0,u=1,o=(i%=7)-7+1}else{for(c=s=f[d],u=1;s>=10;s/=10)u++;a=(o=(i%=7)-7+u)<0?0:c/vu(10,u-o-1)%10|0}if(r=r||t<0||void 0!==f[d+1]||(o<0?c:c%vu(10,u-o-1)),l=n<4?(a||r)&&(0==n||n==(e.s<0?3:2)):a>5||5==a&&(4==n||r||6==n&&(i>0?o>0?c/vu(10,u-o):0:f[d-1])%10&1||n==(e.s<0?8:7)),t<1||!f[0])return f.length=0,l?(t-=e.e+1,f[0]=vu(10,(7-t%7)%7),e.e=-t||0):f[0]=e.e=0,e;if(0==i?(f.length=d,s=1,d--):(f.length=d+1,s=vu(10,7-i),f[d]=o>0?(c/vu(10,u-o)%vu(10,o)|0)*s:0),l)for(;;){if(0==d){for(i=1,o=f[0];o>=10;o/=10)i++;for(o=f[0]+=s,s=1;o>=10;o/=10)s++;i!=s&&(e.e++,f[0]==Eu&&(f[0]=1));break}if(f[d]+=s,f[d]!=Eu)break;f[d--]=0,s=1}for(i=f.length;0===f[--i];)f.pop()}return du&&(e.e>p.maxE?(e.d=null,e.e=NaN):e.e<p.minE&&(e.e=0,e.d=[0])),e}function zu(e,t,n){if(!e.isFinite())return Zu(e);var r,u=e.e,i=Bu(e.d),o=i.length;return t?(n&&(r=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+_u(r):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(e.e<0?"e":"e+")+e.e):u<0?(i="0."+_u(-u-1)+i,n&&(r=n-o)>0&&(i+=_u(r))):u>=o?(i+=_u(u+1-o),n&&(r=n-u-1)>0&&(i=i+"."+_u(r))):((r=u+1)<o&&(i=i.slice(0,r)+"."+i.slice(r)),n&&(r=n-o)>0&&(u+1===o&&(i+="."),i+=_u(r))),i}function Ou(e,t){var n=e[0];for(t*=7;n>=10;n/=10)t++;return t}function Iu(e,t,n){if(t>yu)throw du=!0,n&&(e.precision=n),Error(gu);return qu(new e(lu),t,1,!0)}function Lu(e,t,n){if(t>bu)throw Error(gu);return qu(new e(cu),t,n,!0)}function Pu(e){var t=e.length-1,n=7*t+1;if(t=e[t]){for(;t%10==0;t/=10)n--;for(t=e[0];t>=10;t/=10)n++}return n}function _u(e){for(var t="";e--;)t+="0";return t}function Tu(e,t,n,r){var u,i=new e(1),o=Math.ceil(r/7+4);for(du=!1;;){if(n%2&&Qu((i=i.times(t)).d,o)&&(u=!0),0===(n=$u(n/2))){n=i.d.length-1,u&&0===i.d[n]&&++i.d[n];break}Qu((t=t.times(t)).d,o)}return du=!0,i}function Vu(e){return 1&e.d[e.d.length-1]}function Hu(e,t,n){for(var r,u=new e(t[0]),i=0;++i<t.length;){if(!(r=new e(t[i])).s){u=r;break}u[n](r)&&(u=r)}return u}function Ru(e,t){var n,r,u,i,o,s,a,l=0,c=0,f=0,d=e.constructor,p=d.rounding,h=d.precision;if(!e.d||!e.d[0]||e.e>17)return new d(e.d?e.d[0]?e.s<0?0:1/0:1:e.s?e.s<0?0:e:NaN);for(null==t?(du=!1,a=h):a=t,s=new d(.03125);e.e>-2;)e=e.times(s),f+=5;for(a+=r=Math.log(vu(2,f))/Math.LN10*2+5|0,n=i=o=new d(1),d.precision=a;;){if(i=qu(i.times(e),a,1),n=n.times(++c),Bu((s=o.plus(Su(i,n,a,1))).d).slice(0,a)===Bu(o.d).slice(0,a)){for(u=f;u--;)o=qu(o.times(o),a,1);if(null!=t)return d.precision=h,o;if(!(l<3&&ku(o.d,a-r,p,l)))return qu(o,d.precision=h,p,du=!0);d.precision=a+=10,n=i=s=new d(1),c=0,l++}o=s}}function ju(e,t){var n,r,u,i,o,s,a,l,c,f,d,p=1,h=e,g=h.d,D=h.constructor,m=D.rounding,$=D.precision;if(h.s<0||!g||!g[0]||!h.e&&1==g[0]&&1==g.length)return new D(g&&!g[0]?-1/0:1!=h.s?NaN:g?0:h);if(null==t?(du=!1,c=$):c=t,D.precision=c+=10,r=(n=Bu(g)).charAt(0),!(Math.abs(i=h.e)<15e14))return l=Iu(D,c+2,$).times(i+""),h=ju(new D(r+"."+n.slice(1)),c-10).plus(l),D.precision=$,null==t?qu(h,$,m,du=!0):h;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=Bu((h=h.times(e)).d)).charAt(0),p++;for(i=h.e,r>1?(h=new D("0."+n),i++):h=new D(r+"."+n.slice(1)),f=h,a=o=h=Su(h.minus(1),h.plus(1),c,1),d=qu(h.times(h),c,1),u=3;;){if(o=qu(o.times(d),c,1),Bu((l=a.plus(Su(o,new D(u),c,1))).d).slice(0,c)===Bu(a.d).slice(0,c)){if(a=a.times(2),0!==i&&(a=a.plus(Iu(D,c+2,$).times(i+""))),a=Su(a,new D(p),c,1),null!=t)return D.precision=$,a;if(!ku(a.d,c-10,m,s))return qu(a,D.precision=$,m,du=!0);D.precision=c+=10,l=o=h=Su(f.minus(1),f.plus(1),c,1),d=qu(h.times(h),c,1),u=s=1}a=l,u+=2}}function Zu(e){return String(e.s*e.s/0)}function Uu(e,t){var n,r,u;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);r++);for(u=t.length;48===t.charCodeAt(u-1);--u);if(t=t.slice(r,u)){if(u-=r,e.e=n=n-r-1,e.d=[],r=(n+1)%7,n<0&&(r+=7),r<u){for(r&&e.d.push(+t.slice(0,r)),u-=7;r<u;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=u;for(;r--;)t+="0";e.d.push(+t),du&&(e.e>e.constructor.maxE?(e.d=null,e.e=NaN):e.e<e.constructor.minE&&(e.e=0,e.d=[0]))}else e.e=0,e.d=[0];return e}function Ju(e,t){var n,r,u,i,o,s,a,l,c;if(t.indexOf("_")>-1){if(t=t.replace(/(\d)_(?=\d)/g,"$1"),wu.test(t))return Uu(e,t)}else if("Infinity"===t||"NaN"===t)return+t||(e.s=NaN),e.e=NaN,e.d=null,e;if(Fu.test(t))n=16,t=t.toLowerCase();else if(Cu.test(t))n=2;else{if(!Au.test(t))throw Error(hu+t);n=8}for((i=t.search(/p/i))>0?(a=+t.slice(i+1),t=t.substring(2,i)):t=t.slice(2),o=(i=t.indexOf("."))>=0,r=e.constructor,o&&(i=(s=(t=t.replace(".","")).length)-i,u=Tu(r,new r(n),i,2*i)),i=c=(l=Mu(t,n,Eu)).length-1;0===l[i];--i)l.pop();return i<0?new r(0*e.s):(e.e=Ou(l,c),e.d=l,du=!1,o&&(e=Su(e,u,4*s)),a&&(e=e.times(Math.abs(a)<54?vu(2,a):_i.pow(2,a))),du=!0,e)}function Wu(e,t,n,r,u){var i,o,s,a,l=e.precision,c=Math.ceil(l/7);for(du=!1,a=n.times(n),s=new e(r);;){if(o=Su(s.times(a),new e(t++*t++),l,1),s=u?r.plus(o):r.minus(o),r=Su(o.times(a),new e(t++*t++),l,1),void 0!==(o=s.plus(r)).d[c]){for(i=c;o.d[i]===s.d[i]&&i--;);if(-1==i)break}i=s,s=r,r=o,o=i}return du=!0,o.d.length=c+1,o}function Gu(e,t){for(var n=e;--t;)n*=e;return n}function Xu(e,t){var n,r=t.s<0,u=Lu(e,e.precision,1),i=u.times(.5);if((t=t.abs()).lte(i))return iu=r?4:1,t;if((n=t.divToInt(u)).isZero())iu=r?3:2;else{if((t=t.minus(n.times(u))).lte(i))return iu=Vu(n)?r?2:3:r?4:1,t;iu=Vu(n)?r?1:4:r?3:2}return t.minus(u).abs()}function Yu(e,t,n,r){var u,i,o,s,a,l,c,f,d,p=e.constructor,h=void 0!==n;if(h?(Nu(n,1,su),void 0===r?r=p.rounding:Nu(r,0,8)):(n=p.precision,r=p.rounding),e.isFinite()){for(h?(u=2,16==t?n=4*n-3:8==t&&(n=3*n-2)):u=t,(o=(c=zu(e)).indexOf("."))>=0&&(c=c.replace(".",""),(d=new p(1)).e=c.length-o,d.d=Mu(zu(d),10,u),d.e=d.d.length),i=a=(f=Mu(c,10,u)).length;0==f[--a];)f.pop();if(f[0]){if(o<0?i--:((e=new p(e)).d=f,e.e=i,f=(e=Su(e,d,n,r,0,u)).d,i=e.e,l=uu),o=f[n],s=u/2,l=l||void 0!==f[n+1],l=r<4?(void 0!==o||l)&&(0===r||r===(e.s<0?3:2)):o>s||o===s&&(4===r||l||6===r&&1&f[n-1]||r===(e.s<0?8:7)),f.length=n,l)for(;++f[--n]>u-1;)f[n]=0,n||(++i,f.unshift(1));for(a=f.length;!f[a-1];--a);for(o=0,c="";o<a;o++)c+=au.charAt(f[o]);if(h){if(a>1)if(16==t||8==t){for(o=16==t?4:3,--a;a%o;a++)c+="0";for(a=(f=Mu(c,u,t)).length;!f[a-1];--a);for(o=1,c="1.";o<a;o++)c+=au.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(i<0?"p":"p+")+i}else if(i<0){for(;++i;)c="0"+c;c="0."+c}else if(++i>a)for(i-=a;i--;)c+="0";else i<a&&(c=c.slice(0,i)+"."+c.slice(i))}else c=h?"0p+0":"0";c=(16==t?"0x":2==t?"0b":8==t?"0o":"")+c}else c=Zu(e);return e.s<0?"-"+c:c}function Qu(e,t){if(e.length>t)return e.length=t,!0}function Ku(e){return new this(e).abs()}function ei(e){return new this(e).acos()}function ti(e){return new this(e).acosh()}function ni(e,t){return new this(e).plus(t)}function ri(e){return new this(e).asin()}function ui(e){return new this(e).asinh()}function ii(e){return new this(e).atan()}function oi(e){return new this(e).atanh()}function si(e,t){e=new this(e),t=new this(t);var n,r=this.precision,u=this.rounding,i=r+4;return e.s&&t.s?e.d||t.d?!t.d||e.isZero()?(n=t.s<0?Lu(this,r,u):new this(0)).s=e.s:!e.d||t.isZero()?(n=Lu(this,i,1).times(.5)).s=e.s:t.s<0?(this.precision=i,this.rounding=1,n=this.atan(Su(e,t,i,1)),t=Lu(this,i,1),this.precision=r,this.rounding=u,n=e.s<0?n.minus(t):n.plus(t)):n=this.atan(Su(e,t,i,1)):(n=Lu(this,i,1).times(t.s>0?.25:.75)).s=e.s:n=new this(NaN),n}function ai(e){return new this(e).cbrt()}function li(e){return qu(e=new this(e),e.e+1,2)}function ci(e,t,n){return new this(e).clamp(t,n)}function fi(e){if(!e||"object"!=typeof e)throw Error(pu+"Object expected");var t,n,r,u=!0===e.defaults,i=["precision",1,su,"rounding",0,8,"toExpNeg",-ou,0,"toExpPos",0,ou,"maxE",0,ou,"minE",-ou,0,"modulo",0,9];for(t=0;t<i.length;t+=3)if(n=i[t],u&&(this[n]=fu[n]),void 0!==(r=e[n])){if(!($u(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(hu+n+": "+r);this[n]=r}if(n="crypto",u&&(this[n]=fu[n]),void 0!==(r=e[n])){if(!0!==r&&!1!==r&&0!==r&&1!==r)throw Error(hu+n+": "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw Error(Du);this[n]=!0}else this[n]=!1}return this}function di(e){return new this(e).cos()}function pi(e){return new this(e).cosh()}function hi(e,t){return new this(e).div(t)}function gi(e){return new this(e).exp()}function Di(e){return qu(e=new this(e),e.e+1,3)}function mi(){var e,t,n=new this(0);for(du=!1,e=0;e<arguments.length;)if((t=new this(arguments[e++])).d)n.d&&(n=n.plus(t.times(t)));else{if(t.s)return du=!0,new this(1/0);n=t}return du=!0,n.sqrt()}function $i(e){return e instanceof _i||e&&e.toStringTag===mu||!1}function vi(e){return new this(e).ln()}function Ci(e,t){return new this(e).log(t)}function Fi(e){return new this(e).log(2)}function Ai(e){return new this(e).log(10)}function wi(){return Hu(this,arguments,"lt")}function Ei(){return Hu(this,arguments,"gt")}function yi(e,t){return new this(e).mod(t)}function bi(e,t){return new this(e).mul(t)}function xi(e,t){return new this(e).pow(t)}function Bi(e){var t,n,r,u,i=0,o=new this(1),s=[];if(void 0===e?e=this.precision:Nu(e,1,su),r=Math.ceil(e/7),this.crypto)if(crypto.getRandomValues)for(t=crypto.getRandomValues(new Uint32Array(r));i<r;)(u=t[i])>=429e7?t[i]=crypto.getRandomValues(new Uint32Array(1))[0]:s[i++]=u%1e7;else{if(!crypto.randomBytes)throw Error(Du);for(t=crypto.randomBytes(r*=4);i<r;)(u=t[i]+(t[i+1]<<8)+(t[i+2]<<16)+((127&t[i+3])<<24))>=214e7?crypto.randomBytes(4).copy(t,i):(s.push(u%1e7),i+=4);i=r/4}else for(;i<r;)s[i++]=1e7*Math.random()|0;for(e%=7,(r=s[--i])&&e&&(u=vu(10,7-e),s[i]=(r/u|0)*u);0===s[i];i--)s.pop();if(i<0)n=0,s=[0];else{for(n=-1;0===s[0];n-=7)s.shift();for(r=1,u=s[0];u>=10;u/=10)r++;r<7&&(n-=7-r)}return o.e=n,o.d=s,o}function Ni(e){return qu(e=new this(e),e.e+1,this.rounding)}function ki(e){return(e=new this(e)).d?e.d[0]?e.s:0*e.s:e.s||NaN}function Mi(e){return new this(e).sin()}function Si(e){return new this(e).sinh()}function qi(e){return new this(e).sqrt()}function zi(e,t){return new this(e).sub(t)}function Oi(){var e=0,t=arguments,n=new this(t[e]);for(du=!1;n.s&&++e<t.length;)n=n.plus(t[e]);return du=!0,qu(n,this.precision,this.rounding)}function Ii(e){return new this(e).tan()}function Li(e){return new this(e).tanh()}function Pi(e){return qu(e=new this(e),e.e+1,1)}xu[Symbol.for("nodejs.util.inspect.custom")]=xu.toString,xu[Symbol.toStringTag]="Decimal";var _i=xu.constructor=function e(t){var n,r,u;function i(e){var t,n,r,u=this;if(!(u instanceof i))return new i(e);if(u.constructor=i,$i(e))return u.s=e.s,void(du?!e.d||e.e>i.maxE?(u.e=NaN,u.d=null):e.e<i.minE?(u.e=0,u.d=[0]):(u.e=e.e,u.d=e.d.slice()):(u.e=e.e,u.d=e.d?e.d.slice():e.d));if("number"===(r=typeof e)){if(0===e)return u.s=1/e<0?-1:1,u.e=0,void(u.d=[0]);if(e<0?(e=-e,u.s=-1):u.s=1,e===~~e&&e<1e7){for(t=0,n=e;n>=10;n/=10)t++;return void(du?t>i.maxE?(u.e=NaN,u.d=null):t<i.minE?(u.e=0,u.d=[0]):(u.e=t,u.d=[e]):(u.e=t,u.d=[e]))}return 0*e!=0?(e||(u.s=NaN),u.e=NaN,void(u.d=null)):Uu(u,e.toString())}if("string"!==r)throw Error(hu+e);return 45===(n=e.charCodeAt(0))?(e=e.slice(1),u.s=-1):(43===n&&(e=e.slice(1)),u.s=1),wu.test(e)?Uu(u,e):Ju(u,e)}if(i.prototype=xu,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.EUCLID=9,i.config=i.set=fi,i.clone=e,i.isDecimal=$i,i.abs=Ku,i.acos=ei,i.acosh=ti,i.add=ni,i.asin=ri,i.asinh=ui,i.atan=ii,i.atanh=oi,i.atan2=si,i.cbrt=ai,i.ceil=li,i.clamp=ci,i.cos=di,i.cosh=pi,i.div=hi,i.exp=gi,i.floor=Di,i.hypot=mi,i.ln=vi,i.log=Ci,i.log10=Ai,i.log2=Fi,i.max=wi,i.min=Ei,i.mod=yi,i.mul=bi,i.pow=xi,i.random=Bi,i.round=Ni,i.sign=ki,i.sin=Mi,i.sinh=Si,i.sqrt=qi,i.sub=zi,i.sum=Oi,i.tan=Ii,i.tanh=Li,i.trunc=Pi,void 0===t&&(t={}),t&&!0!==t.defaults)for(u=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],n=0;n<u.length;)t.hasOwnProperty(r=u[n++])||(t[r]=this[r]);return i.config(t),i}(fu);function Ti(e,t){Gn(e,t)}function Vi(e,t){Xn(e,t)}function Hi(e,t,n){return new Yn(e,t,n??0)}function Ri(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[1]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[2])},m(e,t){C(e,n,t),m(n,r),i||(o=[f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){2&t&&k(r,e[1]),1&t&&M(n,"grid-area",e[0]),4&t&&M(n,"font-size",e[2])},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function ji(e,t,n){let{ga:r}=t,{count:u}=t,{sz:i="20px"}=t,o=ze(r);return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"count"in e&&n(1,u=e.count),"sz"in e&&n(2,i=e.sz)},[r,u,i,o]}lu=new _i(lu),cu=new _i(cu);class Zi extends $e{constructor(e){super(),me(this,e,ji,Ri,o,{ga:0,count:1,sz:2})}}function Ui(e=-1){setTimeout((()=>{Ye((()=>MathJax.typeset()))}),-1===e?2e3:e)}function Ji(e){return e.includes("`")?e:`\`${e}\``}function Wi(e){let t=e.isNeg()?"-":"",n=e.trunc(),r=e.minus(n).abs();if(r.eq(0)){let t=e.toNumber().toLocaleString("en");return[!1,t,t.length]}let u=function(e){return new _i(e)}(1);for(;!r.toFraction()[1].eq(1);)r=r.mul(10),u=u.mul(10);let i=n.eq(0)?`${t}${r}/${u}`:`${n} ${r}/${u}`;return[!0,i,i.length]}function Gi(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[2]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[1]+"px")},m(e,t){C(e,n,t),m(n,r),i||(o=[f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){4&t&&k(r,e[2]),1&t&&M(n,"grid-area",e[0]),2&t&&M(n,"font-size",e[1]+"px")},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function Xi(e,t,n){let r,u,i,{ga:o}=t,{num:s}=t,{asAsciiMath:a}=t,{sz:l=30}=t;let c=ze(o);return e.$$set=e=>{"ga"in e&&n(0,o=e.ga),"num"in e&&n(4,s=e.num),"asAsciiMath"in e&&n(5,a=e.asAsciiMath),"sz"in e&&n(6,l=e.sz)},e.$$.update=()=>{16&e.$$.dirty&&n(2,[r,u]=function(e){let t=e.toNumber().toLocaleString("en"),[n,r,u]=Wi(e);return n&&a?(n&&(u+=2),[Ji(r),u]):[t,t.length]}(s),r,(n(7,u),n(4,s))),192&e.$$.dirty&&n(1,i=l-1.2*u)},[o,i,r,c,s,a,l,u]}class Yi extends $e{constructor(e){super(),me(this,e,Xi,Gi,o,{ga:0,num:4,asAsciiMath:5,sz:6})}}function Qi(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[1]),N(n,"class",t[2]),M(n,"grid-area",t[0]),M(n,"font-size",t[3]+"px")},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[10]),f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){2&t&&k(r,e[1]),4&t&&N(n,"class",e[2]),1&t&&M(n,"grid-area",e[0]),8&t&&M(n,"font-size",e[3]+"px")},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function Ki(e,t,n){let r,u,i,o,{ga:s}=t,{num:a}=t,{asAsciiMath:l}=t,{sz:c=30}=t;let f="bg-gray-100";return e.$$set=e=>{"ga"in e&&n(0,s=e.ga),"num"in e&&n(4,a=e.num),"asAsciiMath"in e&&n(5,l=e.asAsciiMath),"sz"in e&&n(6,c=e.sz)},e.$$.update=()=>{16&e.$$.dirty&&n(1,[r,u]=function(e){let t=e.toNumber().toLocaleString("en"),[n,r,u]=Wi(e);return n&&l?[Ji(r),u]:[t,t.length]}(a),r,(n(9,u),n(4,a))),512&e.$$.dirty&&n(8,i=u<5?1.2:1.5),322&e.$$.dirty&&n(3,o=c-i*r.length)},[s,r,f,o,a,l,c,function(e){n(2,f=e)},i,u,function(t){H.call(this,e,t)}]}class eo extends $e{constructor(e){super(),me(this,e,Ki,Qi,o,{ga:0,num:4,asAsciiMath:5,sz:6,setBgColor:7})}get setBgColor(){return this.$$.ctx[7]}}function to(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[1]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[2])},m(e,u){C(e,n,u),m(n,r),i||(o=[B(n,"click",t[4]),f(xt.call(null,n)),f(Bt.call(null,n))],i=!0)},p(e,[t]){2&t&&k(r,e[1]),1&t&&M(n,"grid-area",e[0]),4&t&&M(n,"font-size",e[2])},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function no(e,t,n){let{ga:r}=t,{op:u}=t,{sz:i="30px"}=t,o=ze(r);return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"op"in e&&n(1,u=e.op),"sz"in e&&n(2,i=e.sz)},[r,u,i,o,()=>Ft.playRandom()]}class ro extends $e{constructor(e){super(),me(this,e,no,to,o,{ga:0,op:1,sz:2})}}
/**
     * @license Fraction.js v4.2.0 05/03/2022
     * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
     *
     * Copyright (c) 2021, Robert Eisele (robert@xarg.org)
     * Dual licensed under the MIT or GPL Version 2 licenses.
     **/var uo=Ze((function(e,t){!function(t){var n={s:1,n:0,d:1};function r(e,t){if(isNaN(e=parseInt(e,10)))throw a.InvalidParameter;return e*t}function u(e,t){if(0===t)throw a.DivisionByZero;var n=Object.create(a.prototype);n.s=e<0?-1:1;var r=s(e=e<0?-e:e,t);return n.n=e/r,n.d=t/r,n}function i(e){for(var t={},n=e,r=2,u=4;u<=n;){for(;n%r==0;)n/=r,t[r]=(t[r]||0)+1;u+=1+2*r++}return n!==e?n>1&&(t[n]=(t[n]||0)+1):t[e]=(t[e]||0)+1,t}var o=function(e,t){var u,i=0,o=1,s=1,l=0,c=0,f=0,d=1,p=1,h=0,g=1,D=1,m=1,$=1e7;if(null==e);else if(void 0!==t){if(s=(i=e)*(o=t),i%1!=0||o%1!=0)throw a.NonIntegerParameter}else switch(typeof e){case"object":if("d"in e&&"n"in e)i=e.n,o=e.d,"s"in e&&(i*=e.s);else{if(!(0 in e))throw a.InvalidParameter;i=e[0],1 in e&&(o=e[1])}s=i*o;break;case"number":if(e<0&&(s=e,e=-e),e%1==0)i=e;else if(e>0){for(e>=1&&(e/=p=Math.pow(10,Math.floor(1+Math.log(e)/Math.LN10)));g<=$&&m<=$;){if(e===(u=(h+D)/(g+m))){g+m<=$?(i=h+D,o=g+m):m>g?(i=D,o=m):(i=h,o=g);break}e>u?(h+=D,g+=m):(D+=h,m+=g),g>$?(i=D,o=m):(i=h,o=g)}i*=p}else(isNaN(e)||isNaN(t))&&(o=i=NaN);break;case"string":if(null===(g=e.match(/\d+|./g)))throw a.InvalidParameter;if("-"===g[h]?(s=-1,h++):"+"===g[h]&&h++,g.length===h+1?c=r(g[h++],s):"."===g[h+1]||"."===g[h]?("."!==g[h]&&(l=r(g[h++],s)),(++h+1===g.length||"("===g[h+1]&&")"===g[h+3]||"'"===g[h+1]&&"'"===g[h+3])&&(c=r(g[h],s),d=Math.pow(10,g[h].length),h++),("("===g[h]&&")"===g[h+2]||"'"===g[h]&&"'"===g[h+2])&&(f=r(g[h+1],s),p=Math.pow(10,g[h+1].length)-1,h+=3)):"/"===g[h+1]||":"===g[h+1]?(c=r(g[h],s),d=r(g[h+2],1),h+=3):"/"===g[h+3]&&" "===g[h+1]&&(l=r(g[h],s),c=r(g[h+2],s),d=r(g[h+4],1),h+=5),g.length<=h){s=i=f+(o=d*p)*l+p*c;break}default:throw a.InvalidParameter}if(0===o)throw a.DivisionByZero;n.s=s<0?-1:1,n.n=Math.abs(i),n.d=Math.abs(o)};function s(e,t){if(!e)return t;if(!t)return e;for(;;){if(!(e%=t))return t;if(!(t%=e))return e}}function a(e,t){if(o(e,t),!(this instanceof a))return u(n.s*n.n,n.d);e=s(n.d,n.n),this.s=n.s,this.n=n.n/e,this.d=n.d/e}a.DivisionByZero=new Error("Division by Zero"),a.InvalidParameter=new Error("Invalid argument"),a.NonIntegerParameter=new Error("Parameters must be integer"),a.prototype={s:1,n:0,d:1,abs:function(){return u(this.n,this.d)},neg:function(){return u(-this.s*this.n,this.d)},add:function(e,t){return o(e,t),u(this.s*this.n*n.d+n.s*this.d*n.n,this.d*n.d)},sub:function(e,t){return o(e,t),u(this.s*this.n*n.d-n.s*this.d*n.n,this.d*n.d)},mul:function(e,t){return o(e,t),u(this.s*n.s*this.n*n.n,this.d*n.d)},div:function(e,t){return o(e,t),u(this.s*n.s*this.n*n.d,this.d*n.n)},clone:function(){return u(this.s*this.n,this.d)},mod:function(e,t){if(isNaN(this.n)||isNaN(this.d))return new a(NaN);if(void 0===e)return u(this.s*this.n%this.d,1);if(o(e,t),0===n.n&&0===this.d)throw a.DivisionByZero;return u(this.s*(n.d*this.n)%(n.n*this.d),n.d*this.d)},gcd:function(e,t){return o(e,t),u(s(n.n,this.n)*s(n.d,this.d),n.d*this.d)},lcm:function(e,t){return o(e,t),0===n.n&&0===this.n?u(0,1):u(n.n*this.n,s(n.n,this.n)*s(n.d,this.d))},ceil:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new a(NaN):u(Math.ceil(e*this.s*this.n/this.d),e)},floor:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new a(NaN):u(Math.floor(e*this.s*this.n/this.d),e)},round:function(e){return e=Math.pow(10,e||0),isNaN(this.n)||isNaN(this.d)?new a(NaN):u(Math.round(e*this.s*this.n/this.d),e)},inverse:function(){return u(this.s*this.d,this.n)},pow:function(e,t){if(o(e,t),1===n.d)return n.s<0?u(Math.pow(this.s*this.d,n.n),Math.pow(this.n,n.n)):u(Math.pow(this.s*this.n,n.n),Math.pow(this.d,n.n));if(this.s<0)return null;var r=i(this.n),s=i(this.d),a=1,l=1;for(var c in r)if("1"!==c){if("0"===c){a=0;break}if(r[c]*=n.n,r[c]%n.d!=0)return null;r[c]/=n.d,a*=Math.pow(c,r[c])}for(var c in s)if("1"!==c){if(s[c]*=n.n,s[c]%n.d!=0)return null;s[c]/=n.d,l*=Math.pow(c,s[c])}return n.s<0?u(l,a):u(a,l)},equals:function(e,t){return o(e,t),this.s*this.n*n.d==n.s*n.n*this.d},compare:function(e,t){o(e,t);var r=this.s*this.n*n.d-n.s*n.n*this.d;return(0<r)-(r<0)},simplify:function(e){if(isNaN(this.n)||isNaN(this.d))return this;e=e||.001;for(var t=this.abs(),n=t.toContinued(),r=1;r<n.length;r++){for(var i=u(n[r-1],1),o=r-2;o>=0;o--)i=i.inverse().add(n[o]);if(i.sub(t).abs().valueOf()<e)return i.mul(this.s)}return this},divisible:function(e,t){return o(e,t),!(!(n.n*this.d)||this.n*n.d%(n.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(e){var t,n="",r=this.n,u=this.d;return this.s<0&&(n+="-"),1===u?n+=r:(e&&(t=Math.floor(r/u))>0&&(n+=t,n+=" ",r%=u),n+=r,n+="/",n+=u),n},toLatex:function(e){var t,n="",r=this.n,u=this.d;return this.s<0&&(n+="-"),1===u?n+=r:(e&&(t=Math.floor(r/u))>0&&(n+=t,r%=u),n+="\\frac{",n+=r,n+="}{",n+=u,n+="}"),n},toContinued:function(){var e,t=this.n,n=this.d,r=[];if(isNaN(t)||isNaN(n))return r;do{r.push(Math.floor(t/n)),e=t%n,t=n,n=e}while(1!==t);return r},toString:function(e){var t=this.n,n=this.d;if(isNaN(t)||isNaN(n))return"NaN";e=e||15;var r=function(e,t){for(;t%2==0;t/=2);for(;t%5==0;t/=5);if(1===t)return 0;for(var n=10%t,r=1;1!==n;r++)if(n=10*n%t,r>2e3)return 0;return r}(0,n),u=function(e,t,n){for(var r=1,u=function(e,t,n){for(var r=1;t>0;e=e*e%n,t>>=1)1&t&&(r=r*e%n);return r}(10,n,t),i=0;i<300;i++){if(r===u)return i;r=10*r%t,u=10*u%t}return 0}(0,n,r),i=this.s<0?"-":"";if(i+=t/n|0,t%=n,(t*=10)&&(i+="."),r){for(var o=u;o--;)i+=t/n|0,t%=n,t*=10;i+="(";for(o=r;o--;)i+=t/n|0,t%=n,t*=10;i+=")"}else for(o=e;t&&o--;)i+=t/n|0,t%=n,t*=10;return i}},Object.defineProperty(a,"__esModule",{value:!0}),a.default=a,a.Fraction=a,e.exports=a}()})),io=je(uo);function oo(e){let t=Number(e);return!isNaN(t)&&(!(t<0)&&t===Math.trunc(t))}function so(e){return"number"==typeof e?new _i(e):Array.isArray(e)?e.map((e=>"number"==typeof e?new _i(e):e)):e}function ao(e){return"number"==typeof e?e:Array.isArray(e)?e.map((e=>"number"==typeof e?e:e.toNumber())):e.toNumber()}function lo(e){return e.isNaN()?"NaN":e.isFinite()?co(e):e.lt(0)?"-oo":"oo"}function co(e,t=!0){if(!e.isFinite())return lo(e);return e.toFraction()[1].eq(1)?e.toNumber().toLocaleString("en"):new io(e.toNumber()).toFraction(t)}const fo=(e,t)=>new io(e.toNumber(),t.toNumber());function po(e){return 0===e.d?so(1/0):so(e.n).div(e.d).mul(e.s)}const ho=e=>{let t,n=e.trim().replace(/ {2,}/g," ").replace(/\+ /g,"+").replace(/\- /g,"-");try{t=new io(n)}catch(t){return Ee.error(`Failed while making fraction from '${e}' (${t.message})`),t.message.includes("by Zero")?so(1/0):so(NaN)}return po(t)};function go(e){return xe(void 0!==e,(e=>ye(e))),"string"==typeof e?ho(e):e.map((e=>ho(e)))}function Do(e,t,n){const r=e.slice();return r[37]=t[n],r[38]=t,r[39]=n,r}function mo(e){let t,n;return t=new Yi({props:{ga:"lhs",num:e[1].nums[0],asAsciiMath:e[2]&&ft()}}),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.num=e[1].nums[0]),4&n[0]&&(r.asAsciiMath=e[2]&&ft()),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function $o(e){let t,n;return t=new Yi({props:{ga:"rhs",num:e[1].nums[1],asAsciiMath:e[2]&&ft()}}),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){const r={};2&n[0]&&(r.num=e[1].nums[1]),4&n[0]&&(r.asAsciiMath=e[2]&&ft()),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function vo(e,t){let n,r,u,i=t[39];const o=()=>t[9](r,i),s=()=>t[9](null,i);let a={ga:`a${t[39]}`,num:t[37],asAsciiMath:t[2]&&t[1].asAsciiMath[t[39]]};return r=new eo({props:a}),o(),r.$on("click",(function(){return t[10](t[39])})),{key:e,first:null,c(){n=x(),he(r.$$.fragment),this.first=n},m(e,t){C(e,n,t),ge(r,e,t),u=!0},p(e,n){i!==(t=e)[39]&&(s(),i=t[39],o());const u={};2&n[0]&&(u.ga=`a${t[39]}`),2&n[0]&&(u.num=t[37]),6&n[0]&&(u.asAsciiMath=t[2]&&t[1].asAsciiMath[t[39]]),r.$set(u)},i(e){u||(ae(r.$$.fragment,e),u=!0)},o(e){le(r.$$.fragment,e),u=!1},d(e){e&&F(n),s(),De(r,e)}}}function Co(t){let n,r,u,i,s,a,l,c,f,d,p,h=t[4][0],g=t[4][0],D=[],m=new Map;n=new Zi({props:{ga:"cnt",count:t[5]}}),u=new It({props:{ga:"clk"}});let $=mo(t);a=new ro({props:{ga:"op",op:t[1].op}});let v=$o(t),A=t[1].answers;const w=e=>e[4][e[39]];for(let e=0;e<A.length;e+=1){let n=Do(t,A,e),r=w(n);m.set(r,D[e]=vo(r,n))}return d=new Un({props:{}}),t[11](d),{c(){he(n.$$.fragment),r=b(),he(u.$$.fragment),i=b(),$.c(),s=b(),he(a.$$.fragment),l=b(),v.c(),c=b();for(let e=0;e<D.length;e+=1)D[e].c();f=b(),he(d.$$.fragment)},m(e,t){ge(n,e,t),C(e,r,t),ge(u,e,t),C(e,i,t),$.m(e,t),C(e,s,t),ge(a,e,t),C(e,l,t),v.m(e,t),C(e,c,t);for(let n=0;n<D.length;n+=1)D[n].m(e,t);C(e,f,t),ge(d,e,t),p=!0},p(t,r){const u={};32&r[0]&&(u.count=t[5]),n.$set(u),16&r[0]&&o(h,h=t[4][0])?(oe(),le($,1,1,e),se(),$=mo(t),$.c(),ae($,1),$.m(s.parentNode,s)):$.p(t,r);const i={};2&r[0]&&(i.op=t[1].op),a.$set(i),16&r[0]&&o(g,g=t[4][0])?(oe(),le(v,1,1,e),se(),v=$o(t),v.c(),ae(v,1),v.m(c.parentNode,c)):v.p(t,r),94&r[0]&&(A=t[1].answers,oe(),D=pe(D,r,w,1,t,A,m,f.parentNode,de,vo,f,Do),se());d.$set({})},i(e){if(!p){ae(n.$$.fragment,e),ae(u.$$.fragment,e),ae($),ae(a.$$.fragment,e),ae(v);for(let e=0;e<A.length;e+=1)ae(D[e]);ae(d.$$.fragment,e),p=!0}},o(e){le(n.$$.fragment,e),le(u.$$.fragment,e),le($),le(a.$$.fragment,e),le(v);for(let e=0;e<D.length;e+=1)le(D[e]);le(d.$$.fragment,e),p=!1},d(e){De(n,e),e&&F(r),De(u,e),e&&F(i),$.d(e),e&&F(s),De(a,e),e&&F(l),v.d(e),e&&F(c);for(let t=0;t<D.length;t+=1)D[t].d(e);e&&F(f),t[11](null),De(d,e)}}}function Fo(e){let t,n;return t=new Ie({props:{layout:e[7],$$slots:{default:[Co]},$$scope:{ctx:e}}}),t.$on("click",e[12]),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){const r={};63&n[0]|512&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Ao(e,t,n){let r,u,i,o=0,s=[],a=!1,l=nt.getConfig(),c=Hi("--cmd-next-round",1e3),f=Hi("--cmd-idle",7e3,3e3),d=[1,9],p=[2,9],h=[],g=[],D=null,m=[null,null,null],$=m.map((e=>new Object)),v=e=>new _i(e);function C(){return[v(h.length>0?lt(h):at(d[0],d[1])),v(g.length>0?lt(g):at(p[0],p[1]))]}function F(){let e=nt.tokens().map((e=>parseInt(e)));if(e[0]<0||e[1]<0)return function(e){let[t,n]=gt(e),r=t<0?_i.pow(10,at(t,-1)):_i.pow(10,at(1,t)),u=n<0?_i.pow(10,at(n,-1)):_i.pow(10,at(1,n)),[i,o]=C(),s=o.plus(pt(1));return i=i.mul(r),o=o.mul(u),s=s.mul(u),{a:i,b:o,wrong:s,fa:r,fb:u}}(e);let[t,n]=C(),r=n.plus(pt(1)),u=v(1),i=v(1);for(let o=at(e[0],e[1]);o-- >0;)if(t.equals(1))t=t.mul(10),u=u.mul(10);else switch(ft()){case!0:t=t.mul(10),u=u.mul(10);break;case!1:n=n.mul(10),i=i.mul(10),r=r.mul(10)}return{a:t,b:n,wrong:r,fa:u,fb:i}}let A=e=>e.minus(e.mod(10)),w=e=>e.plus(v(10).minus(e.mod(10)));function E(){let[e,t]=C();for(;e.mod(10).eq(0)||t.mod(10).eq(0);)[e,t]=C();let n=e.mul(t),r=n.mod(10),u=A(e).mul(A(t)),i=w(e).mul(w(t)),o=so(at(1,10)).mul(10),a=ft()?u.minus(o).plus(r):i.plus(o).plus(r),l=pt(at(1,9)),c=n.plus(l),f=a.plus(l).plus(pt(lt([10,20,30]))),d=[e,t],p=gt([n,a,c,f]),h=p.findIndex((e=>e===n)),g=p.map((e=>!1));s.push({nums:d,op:"x",answers:p,asAsciiMath:g,rightAt:h})}function y(){let[e,t]=C();for(;e.mod(10).eq(0)||t.mod(10).eq(0);)[e,t]=C();let n=e.mul(t),r=e,u=r.plus(pt(10)),i=r.plus(pt(at(1,9)));for(;i.mul(t).mod(10).eq(n.mod(10));)i=r.plus(pt(at(1,9)));let o=i.plus(pt(10)),a=[n,t],l=gt([r,u,i,o]),c=l.findIndex((e=>e===r)),f=l.map((e=>!1));s.push({nums:a,op:":",answers:l,asAsciiMath:f,rightAt:c})}function b(){if(D){if(D.length>1){switch(ft()){case!0:E(),y();break;case!1:y(),E()}return}if("*x".includes(D))return E(),void E();if("/\\:".includes(D))return y(),void y()}!function(){let e,t,{a:n,b:r,wrong:u}=F(),i=n,o=r,a=i.mul(o),l=i.mul(u);switch(ft()){case!0:e=a.mul(10),t=l.mul(10);break;case!1:e=a.div(10),t=l.div(10)}let c=gt([i,o]),f=gt([a,l,e,t]),d=f.map((e=>ft())),p=f.findIndex((e=>e==a));s.push({nums:c,op:"x",answers:f,asAsciiMath:d,rightAt:p})}(),function(){let e,t,{a:n,b:r,wrong:u}=F(),i=n.mul(r),o=n,a=r,l=u;switch(ft()){case!0:e=a.mul(10),t=l.mul(10);break;case!1:e=a.div(10),t=l.div(10)}let c=[i,o],f=gt([a,l,e,t]),d=f.map((e=>ft())),p=f.findIndex((e=>e===a));s.push({nums:c,op:"/",answers:f,asAsciiMath:d,rightAt:p})}()}function x(e){f.reset(),void 0===i.clickedAt?(n(1,i.clickedAt=e,i),e===i.rightAt?(o==s.length-1?(Ft.play("done"),u.play()):Ft.play("yes"),c.reset()):(Ft.play("no"),m[e].setBgColor("bg-red-200"),b(),n(5,r=s.length-o)),m[i.rightAt].setBgColor("bg-green-200")):Vi("--cmd-next-round")}Ti("--cmd-next-round",(()=>async function(){c.cancel(),f.reset(),n(8,++o)===s.length&&b(),n(1,i=s[o]),m.forEach((e=>e.setBgColor("bg-gray-100"))),n(4,$=m.map((e=>new Object))),await X(),ot()}())),Ti("--evt-click",(()=>{void 0!==i.clickedAt&&Vi("--cmd-next-round")})),Ti("--cmd-idle",(()=>(f.reset(),void Ft.play("idle")))),function(){f.reset();let e=nt.commands();for(let t of e)switch(t[0]){case"dots":break;case"with-fractions":n(2,a=!0);break;case"last-digit":D=t[1];break;case"a":d=t.slice(1).map((e=>parseInt(e)));break;case"b":p=t.slice(1).map((e=>parseInt(e)));break;case"a[]":h=t.slice(1).map((e=>parseInt(e)));break;case"b[]":g=t.slice(1).map((e=>parseInt(e)))}for(let e=l.rounds??4;e-- >0;)b();n(1,i=s[o]),ot()}();let B={areas:'\n            "cnt   .    clk "\n            "lhs   op   rhs "\n            "a0    .    a1  "\n            "a2    .    a3  "\n        ',cols:"2fr 1fr 2fr",rows:"60px 80px 80px 80px",bgColors:{cnt:"bg-purple-300",lhs:"bg-green-100",op:"bg-yellow-200",rhs:"bg-green-100"}};return e.$$.update=()=>{256&e.$$.dirty[0]&&n(5,r=s.length-o)},[u,i,a,m,$,r,x,B,o,function(e,t){j[e?"unshift":"push"]((()=>{m[t]=e,n(3,m)}))},e=>x(e),function(e){j[e?"unshift":"push"]((()=>{u=e,n(0,u)}))},()=>Vi("--evt-click")]}class wo extends $e{constructor(e){super(),me(this,e,Ao,Fo,o,{},null,[-1,-1])}}function Eo(t){let n,r,i,o;return{c(){n=w("p"),r=y(t[1]),N(n,"class",t[2]),M(n,"grid-area",t[0]),M(n,"font-size",t[4]+"px")},m(e,u){C(e,n,u),m(n,r),t[9](n),i||(o=[B(n,"click",t[8]),f(Bt.call(null,n))],i=!0)},p(e,[t]){2&t&&k(r,e[1]),4&t&&N(n,"class",e[2]),1&t&&M(n,"grid-area",e[0]),16&t&&M(n,"font-size",e[4]+"px")},i:e,o:e,d(e){e&&F(n),t[9](null),i=!1,u(o)}}}const yo=1.4;function bo(e,t,n){let r,u,i,{ga:o}=t,{exp:s}=t,{scale:a=yo}=t,{bgColor:l=ze(o)}=t,{sz:c=30}=t;return e.$$set=e=>{"ga"in e&&n(0,o=e.ga),"exp"in e&&n(1,s=e.exp),"scale"in e&&n(5,a=e.scale),"bgColor"in e&&n(2,l=e.bgColor),"sz"in e&&n(6,c=e.sz)},e.$$.update=()=>{32&e.$$.dirty&&n(7,r=a??yo),194&e.$$.dirty&&n(4,u=c-r*s.length),2&e.$$.dirty&&async function(e){await X(),n(3,i.innerText="`"+e+"`",i),ot(),await We(1e3),i.querySelectorAll("mjx-c").forEach((e=>{xt(e),Bt(e)}))}(s)},[o,s,l,i,u,a,c,r,function(t){H.call(this,e,t)},function(e){j[e?"unshift":"push"]((()=>{i=e,n(3,i)}))}]}class xo extends $e{constructor(e){super(),me(this,e,bo,Eo,o,{ga:0,exp:1,scale:5,bgColor:2,sz:6})}}function Bo(t){let n,r,i,o,s,a;return{c(){n=w("div"),r=w("div"),i=w("span"),o=y(t[2]),N(r,"class","\\ text-xs text-center text-black \\ "+t[3]+" \\"),M(r,"width",t[1]+"%"),N(n,"class","w-full bg-red-50 text-right"),M(n,"grid-area",t[0])},m(e,t){C(e,n,t),m(n,r),m(r,i),m(i,o),s||(a=[f(xt.call(null,i)),f(xt.call(null,n)),f(Bt.call(null,n))],s=!0)},p(e,[t]){4&t&&k(o,e[2]),2&t&&M(r,"width",e[1]+"%"),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),s=!1,u(a)}}}function No(e,t,n){let r,u,i,o,{ga:s}=t,{values:a}=t,l=ze(s);return e.$$set=e=>{"ga"in e&&n(0,s=e.ga),"values"in e&&n(4,a=e.values)},e.$$.update=()=>{16&e.$$.dirty&&n(6,r=a[0]),16&e.$$.dirty&&n(5,u=a[1]),96&e.$$.dirty&&n(2,i=u-r),96&e.$$.dirty&&n(1,o=r/u*100)},[s,o,i,l,a,u,r]}class ko extends $e{constructor(e){super(),me(this,e,No,Bo,o,{ga:0,values:4})}}function Mo(t){let n,r,u;return{c(){n=w("div"),r=w("div"),N(r,"class",u="h-full w-full "+t[1]),M(r,"width",t[2]+"%"),N(n,"class","w-full h-full "+t[3]),M(n,"grid-area",t[0])},m(e,t){C(e,n,t),m(n,r)},p(e,[t]){2&t&&u!==(u="h-full w-full "+e[1])&&N(r,"class",u),4&t&&M(r,"width",e[2]+"%"),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n)}}}function So(e,t,n){let r,u,i,{ga:o}=t,{seconds:s}=t,{onExpiration:a}=t,{color:l="bg-red-500"}=t,{bit:c=30}=t,f=0,d=ze(o);function p(){clearInterval(i)}function h(){r=Date.now(),u=r+1e3*s,i=setInterval((()=>function(){let e=Date.now();n(2,f=(e-r)/(1e3*s)*100),e>=u&&(a(),p())}()),c)}var g;return V((()=>h())),g=()=>p(),T().$$.on_destroy.push(g),e.$$set=e=>{"ga"in e&&n(0,o=e.ga),"seconds"in e&&n(4,s=e.seconds),"onExpiration"in e&&n(5,a=e.onExpiration),"color"in e&&n(1,l=e.color),"bit"in e&&n(6,c=e.bit)},[o,l,f,d,s,a,c,function(){h()}]}class qo extends $e{constructor(e){super(),me(this,e,So,Mo,o,{ga:0,seconds:4,onExpiration:5,color:1,bit:6,restart:7})}get restart(){return this.$$.ctx[7]}}function zo(e){let t=e.split("/");if(1===t.length)return new _i(e);let[n,r]=[new _i(t[0]),new _i(t[1])];return n.div(r)}function Oo(e,t){return t.length>0?lt(t):so(at(e[0],e[1]))}function Io(e,t,n,r,u){let i=so([...n]),o=[],s=so(r??1);u??=!0;let a=20;do{let e=lt(i);if(!(s.mul(e).gt(t)&&a-- >0)&&(s=s.mul(e),o.push(e),u&&i.splice(i.indexOf(e),1),0===i.length))break}while(s.lt(e)||o.length<=1);return[s,o]}let Lo,Po,_o,To=nt.getConfig(),Vo=To.rounds,Ho="equ+-",Ro=[10,90],jo=[10,90],Zo=[10,90],Uo=[10,90],Jo=[1,1],Wo=[],Go=[],Xo=[],Yo=[],Qo=[],Ko=["X"],es=!1,ts=!1,ns=15*To.rounds,rs=!1,us=[],is=1;function os(e,t){if("+-dots"===Ho){let e=pt(so(10)).div(is),n=pt(so(at(1,1))).div(is),r=pt(so(at(2,2))).div(is);return gt([t,t.plus(e),t.plus(n),t.plus(r)])}if("equ+-"===Ho)return gt([t,t.plus(pt(10)),t.plus(pt(at(1,1))),t.plus(pt(at(2,2)))]);if("equ*/"===Ho)return gt([t,t.plus(pt(at(1,1))),t.plus(pt(at(2,2))),t.plus(pt(at(3,3)))]);if("ab+c=d"===Ho||"a*/(b+c)=d"===Ho||"a/b=c/d"===Ho)return gt([t,t.plus(pt(at(1,1))),t.plus(pt(at(2,2))),t.plus(pt(at(3,3)))]);if(Ho.includes("%"))return gt([t,t.plus(pt(5)),t.plus(pt(10)),t.plus(pt(15))]);if(Ho.includes("fr+-")||"fr*/"===Ho){let n=(e,t)=>e.gt(t)?e.plus(t.mul(pt(1))):e.plus(t);for(let r=100;;){let u=[t,n(t,e[0]),n(t,e[1]),n(t,e[2])];if(Ke(u)||!(r-- >0))return gt(u)}}if("fr-reduction"===Ho){let e=(e,t)=>e>t?e+pt(t):e+t,n=new io(t.toNumber());for(let r=100;;){let u=n.n,i=e(n.n,1),o=n.d,s=e(n.d,1),a=[t,so(i).div(o),so(u).div(s),so(i).div(s)];if(Ke(a)||!(r-- >0))return gt(a)}}if("dividers"===Ho){let e=Qo.filter((e=>!us.some((t=>e.eq(t))))),n=us.reduce(((e,t)=>e.mul(t)));[2,3].forEach((t=>{let r=so(t);for(;n.mod(r).eq(0);)r=r.mul(t);e.push(r)}));let r=()=>{for(let t=30;;){let n=lt(us);if(us.length>2&&ft()&&(n=n.mul(lt(us))),n=n.mul(lt(e)),!(n.gt(Zo[1])&&t-- >0))return n}};for(let e=100;;){let n=[t,r(),r(),r()];if(Ke(n)||!(e-- >0))return gt(n)}}if("dividers-2"===Ho){let e,n=us.filter((e=>!e.eq(t)));n=[...n,...so([23,29])];for(let r=30;r-- >0;){let[r,u,i]=gt(n);if(e=[t,r,u,i],Ke(e))break}return gt(e)}if("dividers+-"===Ho){let n=[t],r=e[0].plus(e[1]);for(let e=2;e<ao(r)&&(t.eq(e)||r.mod(e).eq(0)||4===e||(n.push(so(e)),!(n.length>=4)));e++);return n=[...n,...so([11,13,17])].slice(0,4),gt(n)}throw`Unknown game type '${Ho}'`}class ss{constructor(){for(let e of nt.commands())switch(e[0].toLocaleLowerCase()){case"equ+-":Ho="equ+-";break;case"equ*/":Ho="equ*/";break;case"ab+c=d":Ho="ab+c=d";break;case"%-simple":Ho="%-simple";break;case"%-plus":Ho="%-plus";break;case"%-minus":Ho="%-minus";break;case"%-all":Ho="%-all";break;case"game":Ho=e[1];case"no-overflow":es=!1;break;case"proper-only":ts=!0;break;case"timer":ns=parseInt(e[1]);break;case"m-scale":_o=parseFloat(e[1]);break;case"no-ab-swap":rs=!0;break;case"dots-factor":is=parseInt(e[1]);break;case"x":Ko=e.slice(1);break;case"a":Ro=e.slice(1).map((e=>parseInt(e)));break;case"b":jo=e.slice(1).map((e=>parseInt(e)));break;case"c":Zo=e.slice(1).map((e=>parseInt(e)));break;case"d":Uo=e.slice(1).map((e=>parseInt(e)));break;case"n":Jo=e.slice(1).map((e=>parseInt(e)));break;case"a[]":Wo=e.slice(1).map((e=>zo(e)));break;case"b[]":Go=e.slice(1).map((e=>zo(e)));break;case"c[]":Xo=e.slice(1).map((e=>zo(e)));break;case"d[]":Yo=e.slice(1).map((e=>zo(e)));break;case"n[]":Qo=e.slice(1).map((e=>zo(e)))}Lo=nt.tokens(),Po=-1}isLast(){return Po+1>=Vo}addRounds(e){Vo+=e}nextRound(){Po++;let e=Ho,t=Lo[Po%Lo.length],n=function(e){let t=e=>e-e%10;if("+-dots"===Ho){let[e,n]=[Oo(Ro,Wo),Oo(jo,Go)],r=at(1,9),u=es?at(0,9-r):at(10-r,9),i=so(t(e)+r).div(is),o=so(t(n)+u).div(is),s=so(at(1,10));i=i.plus(s.div(is).div(10)),ft()&&(o=o.plus(so(10).minus(s).div(is).div(10)));let a=i.plus(o);return[...gt([i,o]),a]}if("equ+-"===Ho){let[e,n]=[Oo(Ro,Wo),Oo(jo,Go)],r=at(1,9),u=es?at(0,9-r):at(10-r,9),i=so(t(e)+r),o=so(t(n)+u),s=i.plus(o);return[...gt([i,o]),s]}if("equ*/"===Ho){let[e,t]=[Oo(Ro,Wo),Oo(jo,Go)],n=e.mul(t);return[...rs?[e,t]:gt([e,t]),n]}if("ab+c=d"===Ho){let[e,t]=[Oo(Ro,Wo),Oo(jo,Go)],n=Oo(Uo,Yo),r=n.minus(e.mul(t));return[...gt([e,t]),r,n]}if("a*/(b+c)=d"===Ho)for(let t=100;;){let n,[r,u]=[Oo(Ro,Wo),Oo(jo,Go)],i=Oo(Zo,Xo);if(e.includes("+")?n=r.mul(u).plus(r.mul(i)):(u.lt(i)&&([u,i]=[i,u]),n=r.mul(u).minus(r.mul(i))),!(e.includes("/")&&n.eq(0)&&t-- >0))return e.includes("/")&&([r,n]=[n,r]),[r,u,i,n]}if("a/b=c/d"===Ho)for(let e=100;;){let[t,n]=[Oo(Ro,Wo),Oo(jo,Go)],r=Oo(Zo,Xo),u=Oo(Jo,Qo),i=Oo(Jo,Qo);if(t.gt(n)&&ts&&([t,n]=[n,t]),!(t.eq(n)&&e-- >0))return[t.mul(u),n.mul(u),t.mul(r).mul(i),n.mul(r).mul(i)]}if(n=e,Ho.includes("%")&&n.includes("*")){let e,t,n=Oo(jo,Go),r=100;do{if(e=Oo(Zo,Xo),t=e.mul(100).div(n),0==--r)break}while(!t.trunc().eq(t));return 0===r&&console.log(ao([t,n,e])),[t,n,e]}if(function(e,t){return e.includes("%")&&t.includes("+")}(Ho,e)){let e,t,n=ct(Go,(e=>e.gte(100))),r=100;do{if(e=Oo(Zo,Xo),t=e.mul(100).div(n),0==--r)break}while(!t.trunc().eq(t));return n=n.minus(100),0===r&&console.log(ao([t,n,e])),[t,n,e]}if(function(e,t){return e.includes("%")&&t.includes("-")}(Ho,e)){let e,t,n=ct(Go,(e=>e.lt(100))),r=100;do{if(e=Oo(Zo,Xo),t=e.mul(100).div(n),0==--r)break}while(!t.trunc().eq(t));return 0===r&&console.log(ao([t,n,e])),n=so(100).minus(n),[t,n,e]}var n;if("%-a-of-c"===Ho){let e,t,n=Oo(jo,Go),r=100;do{if(e=Oo(Zo,Xo),t=n.mul(e).div(100),0==--r)break}while(!t.trunc().eq(t));return 0===r&&console.log(ao([t,n,e])),[t,n,e]}if("%-b-is-c"===Ho){let e,t,n=Oo(jo,Go),r=100;do{if(t=Oo(Ro,Wo),e=t.mul(n).div(100),0==--r)break}while(!e.trunc().eq(e));return 0===r&&console.log(ao([t,n,e])),[t,n,e]}if("fr+-"===Ho){let[e,t]=[Oo(Ro,Wo),Oo(jo,Go)],n=e.plus(t);return[...gt([e,t]),n]}if("fr*/"===Ho){let[t,n]=gt([Oo(Ro,Wo),Oo(jo,Go)]),r=e.includes("*")?t.mul(n):t.div(n);return[t,n,r]}if("fr+-ab"===Ho){let[t,n]=[Oo(Ro,Wo),Oo(jo,Go)];if(t.eq(n))return e.includes("+")?[t,n,t.plus(n)]:[t.plus(n),...gt([n,t])];if(e.includes("+"))return[...gt([t,n]),t.plus(n)];{let e=_i.max(t,n),r=_i.min(t,n),u=e.minus(r);return[e,r,u]}}if("fr-reduction"===Ho)for(let e=20;;){let[t,n]=[Oo(Ro,Wo),Oo(jo,Go)],r=Oo(Uo,Yo);t=t.mul(r),n=n.mul(r);let u=po(fo(t,n));if(!(t.gte(n)&&ts&&e-- >0))return[t,n,u]}if("dividers"===Ho)for(;;){let[e,t]=Io(Ro[0],Ro[1],Qo),[n,r]=Io(jo[0],jo[1],Qo);if(e.eq(n))continue;us=[...t,...r];let[u]=Io(Zo[0],Zo[1],us);if(!u.eq(e)&&!u.eq(n))return[e,n,u]}if("dividers-2"===Ho){let e;for(let t=50;t-- >0;){let[t,n]=Io(Ro[0],Ro[1],Qo),[r,u]=Io(jo[0],jo[1],Qo);if(t.eq(r))continue;let i=gt([...n,...u]);us=i;let[o,s,a,l,c]=[];switch(i.length){default:continue;case 3:[o,s,a]=i,e=[t,r,s,a,o];break;case 4:[o,s,a,l]=i,[s,a]=s.lt(a)?[s.mul(l),a]:[s,a.mul(l)],e=[t,r,s,a,o];break;case 5:[o,s,a,l,c]=i,[s,a]=s.lt(a)?[s,a]:[a,s],[l,c]=l.lt(c)?[l,c]:[c,l],s=s.mul(c),a=a.mul(l),e=[t,r,s,a,o]}if(Ke(e))break}return e}if("dividers+-"==Ho){let e=Ro,t=new Map([[2,[2,7]],[3,[3,7]],[5,[5,7]],[6,[2,3]],[7,[7,11]],[9,[7,8]],[10,[2,5]]]),n=lt([...t.keys()]),r=t.get(n),u=Io(e[0],e[1],r,n,!1)[0],i=at(e[0],ao(u.minus(e[0])));return so([i,u.minus(i),n])}throw`Unknown game type '${Ho}'`}(t),[r,u]=function(e,t){let n=lt(e.match(/\b[A-Z]\b/g)),r=e;[[/_r/g,"color(red)"],[/_g/g,"color(green)"],[/_b/g,"color(blue)"]].forEach((e=>r=r.replace(e[0],e[1]))),r=r.replace(n,"$").replace("xx","@");let u=t[n.charCodeAt(0)-"A".charCodeAt(0)];if("ab+c=d"==Ho){let e=t[2];e.lt(0)&&(t[2]=e.neg(),r=r.replace("+","-")),u.lt(0)&&(u=u.neg())}if("dividers+-"===Ho&&ft()){let e=t[0].plus(t[1].mul(2));t=[e,t[1],t[2],t[3]],r=r.replace("+","-")}let i="+-dots"===Ho;function o(e){return e>=t.length?"":t[e]?i?t[e].toString():co(t[e]):""}return r=r.toLocaleLowerCase().replace(/\ba\b/,o(0)).replace(/\bb\b/,o(1)).replace(/\bc\b/,o(2)).replace(/\bd\b/,o(3)).replace(/\be\b/,o(4)).replace(/\bf\b/,o(5)).replace(/\bg\b/,o(6)).replace(/\bh\b/,o(7)),r=r.replace("@","xx").replace("$",lt(Ko)),[r,u]}(t,n),i=os(n,u);return{seconds:ns,gameType:e,progress:[Po<Vo?Po:Vo,Vo],equ:r,mathScale:_o,rightAns:u,answers:i}}}function as(e,t){Gn(e,t)}function ls(e,t,n){return new Yn(e,t,n??0)}function cs(t){let n,r,i,o;return{c(){n=w("button"),r=y(t[1]),N(n,"class",t[3]),M(n,"grid-area",t[0]),M(n,"font-size",t[2]+"px")},m(e,u){C(e,n,u),m(n,r),i||(o=[f(xt.call(null,n)),f(Bt.call(null,n)),B(n,"click",t[10])],i=!0)},p(e,[t]){2&t&&k(r,e[1]),8&t&&N(n,"class",e[3]),1&t&&M(n,"grid-area",e[0]),4&t&&M(n,"font-size",e[2]+"px")},i:e,o:e,d(e){e&&F(n),i=!1,u(o)}}}function fs(e,t,n){let r,u,i,{gameType:o}=t,{ga:s}=t,{value:a}=t,{units:l=""}=t,{bgColor:c=ze(s,"bg-gray-100")}=t,{sz:f=30}=t;function d(e){if((!(t=e).isFinite()||t.toFraction()[1].eq(1))&&!l)return e.toNumber().toLocaleString("en");var t;let n="+-dots"===o?e.toString():co(e,ft());return l&&(n+=l),Ji(n)}return e.$$set=e=>{"gameType"in e&&n(4,o=e.gameType),"ga"in e&&n(0,s=e.ga),"value"in e&&n(5,a=e.value),"units"in e&&n(6,l=e.units),"bgColor"in e&&n(7,c=e.bgColor),"sz"in e&&n(8,f=e.sz)},[s,r,u,i,o,a,l,c,f,function(e){switch(e){case"start":n(1,r="??"),n(3,i=c);break;case"clicked":n(1,r=d(a)),n(3,i=c);break;case"right":n(1,r=d(a)),n(3,i="bg-green-200");break;case"wrong":n(1,r=d(a)),n(3,i="bg-red-200")}n(2,u=f-1.2*r.length)},function(t){H.call(this,e,t)}]}class ds extends $e{constructor(e){super(),me(this,e,fs,cs,o,{gameType:4,ga:0,value:5,units:6,bgColor:7,sz:8,setState:9})}get setState(){return this.$$.ctx[9]}}function ps(e,t,n){const r=e.slice();return r[25]=t[n],r[26]=t,r[27]=n,r}function hs(e,t){let n,r,u,i=t[27];const o=()=>t[11](r,i),s=()=>t[11](null,i);let a={gameType:t[2].gameType,ga:`a${t[27]}`,value:t[25],units:$s(t[2])};return r=new ds({props:a}),o(),r.$on("click",(function(){return t[12](t[25])})),{key:e,first:null,c(){n=x(),he(r.$$.fragment),this.first=n},m(e,t){C(e,n,t),ge(r,e,t),u=!0},p(e,n){i!==(t=e)[27]&&(s(),i=t[27],o());const u={};4&n&&(u.gameType=t[2].gameType),4&n&&(u.ga=`a${t[27]}`),4&n&&(u.value=t[25]),4&n&&(u.units=$s(t[2])),r.$set(u)},i(e){u||(ae(r.$$.fragment,e),u=!0)},o(e){le(r.$$.fragment,e),u=!1},d(e){e&&F(n),s(),De(r,e)}}}function gs(e){let t,n,r,u,i,o,s,a,l,c,f,d=[],p=new Map;t=new ko({props:{ga:"prg",values:e[4]}}),r=new It({props:{ga:"clk"}}),i=new xo({props:{ga:"equ",sz:40,exp:e[2].equ,scale:ms(e[2])}}),i.$on("click",e[10]);let h=e[2].answers;const g=e=>e[5][e[27]];for(let t=0;t<h.length;t+=1){let n=ps(e,h,t),r=g(n);p.set(r,d[t]=hs(r,n))}let D={ga:"tm",seconds:e[2].seconds,onExpiration:e[13]};a=new qo({props:D}),e[14](a);return c=new Un({props:{}}),e[15](c),{c(){he(t.$$.fragment),n=b(),he(r.$$.fragment),u=b(),he(i.$$.fragment),o=b();for(let e=0;e<d.length;e+=1)d[e].c();s=b(),he(a.$$.fragment),l=b(),he(c.$$.fragment)},m(e,p){ge(t,e,p),C(e,n,p),ge(r,e,p),C(e,u,p),ge(i,e,p),C(e,o,p);for(let t=0;t<d.length;t+=1)d[t].m(e,p);C(e,s,p),ge(a,e,p),C(e,l,p),ge(c,e,p),f=!0},p(e,n){const r={};16&n&&(r.values=e[4]),t.$set(r);const u={};4&n&&(u.exp=e[2].equ),4&n&&(u.scale=ms(e[2])),i.$set(u),300&n&&(h=e[2].answers,oe(),d=pe(d,n,g,1,e,h,p,s.parentNode,de,hs,s,ps),se());const o={};4&n&&(o.seconds=e[2].seconds),a.$set(o);c.$set({})},i(e){if(!f){ae(t.$$.fragment,e),ae(r.$$.fragment,e),ae(i.$$.fragment,e);for(let e=0;e<h.length;e+=1)ae(d[e]);ae(a.$$.fragment,e),ae(c.$$.fragment,e),f=!0}},o(e){le(t.$$.fragment,e),le(r.$$.fragment,e),le(i.$$.fragment,e);for(let e=0;e<d.length;e+=1)le(d[e]);le(a.$$.fragment,e),le(c.$$.fragment,e),f=!1},d(f){De(t,f),f&&F(n),De(r,f),f&&F(u),De(i,f),f&&F(o);for(let e=0;e<d.length;e+=1)d[e].d(f);f&&F(s),e[14](null),De(a,f),f&&F(l),e[15](null),De(c,f)}}}function Ds(e){let t,n;return t=new Ie({props:{layout:e[9],$$slots:{default:[gs]},$$scope:{ctx:e}}}),t.$on("click",e[16]),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,[n]){const r={};268435487&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function ms(e){if(e.mathScale)return e.mathScale;switch(e.gameType){case"%-simple":case"%-plus":case"%-minus":case"%-all":return 1.2;case"dividers":return.3;case"dividers-2":return.4;case"dividers+-":return.35}}function $s(e){return"%-a-of-c"===e.gameType?"%":""}function vs(e,t,n){let r,u,i,o=new ss,s=o.nextRound(),a=[null,null,null,null],l=[1,10],c=ls("--cmd-new-round",1e3),f=ls("--cmd-idle",1e4,3e3),d=a.map((e=>new Object));function p(){if(Ft.playRandom(),"dividers-2"===s.gameType)D()}function h(){return f.reset(),"start"==i?(i="clicked",a.forEach((e=>e.setState("clicked"))),Je((()=>ot())),!0):"clicked"!==i&&("answered"!=i||(D(),!0))}function g(e){if(f.reset(),!h()&&"clicked"===i){i="answered";let t=s.answers.findIndex((t=>t.eq(e))),r=s.answers.findIndex((e=>e.eq(s.rightAns)));if(t===r){n(4,l[0]+=1,l);let e=o.isLast(s);Ft.play(e?"done":"yes"),c.reset(),e&&u.play()}else a[t].setState("wrong"),Ft.play("no"),o.addRounds(2),n(4,l[0]+=1,l),n(4,l[1]+=2,l);a[r].setState("right")}}async function D(){n(5,d=a.map((e=>new Object))),n(2,s=o.nextRound()),await X(),m()}function m(){switch(i="start",f.reset(),c.cancel(),a.forEach((e=>{e.setState("start")})),n(4,l=s.progress),s.gameType){case"dividers":case"dividers-2":case"dividers+-":h()}}V((()=>m())),as("--cmd-new-round",(()=>D())),as("--cmd-idle",(()=>(Ft.play("idle"),void f.reset()))),as("--evt-time-is-up",(()=>(o.addRounds(1),n(4,l[1]+=1,l),r.restart(),void Ft.play("time-is-up"))));return[r,u,s,a,l,d,p,h,g,{areas:'\n            "prg   .    clk "\n            "equ   equ  equ "\n            "a0    .    a1  "\n            "a2    .    a3  "\n            "tm    tm   tm  "\n        ',cols:"2fr 1fr 2fr",rows:"50px 80px 80px 80px 5px",bgColors:{prg:"bg-green-300",equ:"bg-yellow-50",tm:"bg-blue-100"}},()=>p(),function(e,t){j[e?"unshift":"push"]((()=>{a[t]=e,n(3,a)}))},e=>g(e),()=>{var e;Xn("--evt-time-is-up",e)},function(e){j[e?"unshift":"push"]((()=>{r=e,n(0,r)}))},function(e){j[e?"unshift":"push"]((()=>{u=e,n(1,u)}))},()=>h()]}class Cs extends $e{constructor(e){super(),me(this,e,vs,Ds,o,{})}}function Fs(e,t){Gn(e,t)}function As(e,t,n){return new Yn(e,t,n??0)}let ws,Es,ys=nt.getConfig().rounds,bs=e=>new _i(e);function xs(e,t){let n=bs(10).pow(t);return bs(e).mul(n).trunc().div(n)}class Bs{constructor(){for(let e of nt.commands())e[0].toLocaleLowerCase();ws=nt.tokens().map((e=>new io(e))).sort((function(e,t){return e.compare(t)})),Es=-1}isLast(){return Es+1>=ys}addRounds(e){ys+=e}nextRound(){Es++;let e=at(0,ws.length-4),t=gt([0,1,2]),n=gt([0,1,2,3].map((n=>function(e,t){let n=e.valueOf(),r=n.toFixed(5).length<n.toString().length,u=[e.toFraction(!1),xs(n,4).toString()+(r?"...":""),e.mul(100).toString(2)+"%"];return[u[t[0]],u[t[1]],u[t[2]]]}(ws[e+n],t)))),r=n[0][0],u=gt([n[0][1],n[1][1],n[2][2],n[3][2]]);return{fr:r,rightAt:u.findIndex((e=>e===n[0][1])),answers:u,progress:[Es<ys?Es:ys,ys]}}}function Ns(t){let n,r,i,o,s,a,l;return{c(){n=w("button"),r=y("`"),i=y(t[1]),o=y("`"),N(n,"class",s=t[2]+" py-0.5 my-1"),M(n,"grid-area",t[0]),M(n,"font-size",t[3]+"px")},m(e,u){C(e,n,u),m(n,r),m(n,i),m(n,o),a||(l=[f(xt.call(null,n)),f(Bt.call(null,n)),B(n,"click",t[7])],a=!0)},p(e,[t]){2&t&&k(i,e[1]),4&t&&s!==(s=e[2]+" py-0.5 my-1")&&N(n,"class",s),1&t&&M(n,"grid-area",e[0]),8&t&&M(n,"font-size",e[3]+"px")},i:e,o:e,d(e){e&&F(n),a=!1,u(l)}}}function ks(e,t,n){let r,{ga:u}=t,{value:i}=t,{bgColor:o=ze(u,"bg-gray-100")}=t,{sz:s=24}=t,a=o;return e.$$set=e=>{"ga"in e&&n(0,u=e.ga),"value"in e&&n(1,i=e.value),"bgColor"in e&&n(4,o=e.bgColor),"sz"in e&&n(5,s=e.sz)},e.$$.update=()=>{34&e.$$.dirty&&n(3,r=s-1.1*i.length)},[u,i,a,r,o,s,function(e){switch(e){case"start":n(2,a=o);break;case"right":n(2,a="bg-green-200");break;case"wrong":n(2,a="bg-red-200")}},function(t){H.call(this,e,t)}]}class Ms extends $e{constructor(e){super(),me(this,e,ks,Ns,o,{ga:0,value:1,bgColor:4,sz:5,setState:6})}get setState(){return this.$$.ctx[6]}}function Ss(t){let n,r,i,o,s,a;return{c(){n=w("p"),r=y("`"),i=y(t[1]),o=y("`"),N(n,"class",t[2]),M(n,"grid-area",t[0]),M(n,"font-size",t[3]+"px")},m(e,u){C(e,n,u),m(n,r),m(n,i),m(n,o),s||(a=[f(xt.call(null,n)),f(Bt.call(null,n)),B(n,"click",t[6])],s=!0)},p(e,[t]){2&t&&k(i,e[1]),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),s=!1,u(a)}}}function qs(e,t,n){let{ga:r}=t,{math:u}=t,{bgColor:i=ze(r,"bg-gray-100")}=t,{sz:o=30}=t,s=i,a=o;return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"math"in e&&n(1,u=e.math),"bgColor"in e&&n(4,i=e.bgColor),"sz"in e&&n(5,o=e.sz)},[r,u,s,a,i,o,function(t){H.call(this,e,t)}]}class zs extends $e{constructor(e){super(),me(this,e,qs,Ss,o,{ga:0,math:1,bgColor:4,sz:5})}}function Os(e,t,n){const r=e.slice();return r[28]=t[n],r[29]=t,r[30]=n,r}function Is(e){let t,n;return t=new zs({props:{ga:"que",math:e[5].fr,sz:36}}),t.$on("click",e[12]),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){const r={};32&n[0]&&(r.math=e[5].fr),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Ls(e,t){let n,r,u,i=t[30];const o=()=>t[13](r,i),s=()=>t[13](null,i);let a={ga:`a${t[30]}`,value:t[28]};return r=new Ms({props:a}),o(),r.$on("click",(function(){return t[14](t[28])})),{key:e,first:null,c(){n=x(),he(r.$$.fragment),this.first=n},m(e,t){C(e,n,t),ge(r,e,t),u=!0},p(e,n){i!==(t=e)[30]&&(s(),i=t[30],o());const u={};32&n[0]&&(u.ga=`a${t[30]}`),32&n[0]&&(u.value=t[28]),r.$set(u)},i(e){u||(ae(r.$$.fragment,e),u=!0)},o(e){le(r.$$.fragment,e),u=!1},d(e){e&&F(n),s(),De(r,e)}}}function Ps(t){let n,r,u,i,s,a,l,c,f,d,p=t[3][0],h=[],g=new Map;n=new ko({props:{ga:"prg",values:t[6]}}),u=new It({props:{ga:"clk"}});let D=Is(t),m=t[5].answers;const $=e=>e[3][e[30]];for(let e=0;e<m.length;e+=1){let n=Os(t,m,e),r=$(n);g.set(r,h[e]=Ls(r,n))}let v={ga:"tm",seconds:t[4]*t[7].rounds,onExpiration:t[15]};l=new qo({props:v}),t[16](l);return f=new Un({props:{}}),t[17](f),{c(){he(n.$$.fragment),r=b(),he(u.$$.fragment),i=b(),D.c(),s=b();for(let e=0;e<h.length;e+=1)h[e].c();a=b(),he(l.$$.fragment),c=b(),he(f.$$.fragment)},m(e,t){ge(n,e,t),C(e,r,t),ge(u,e,t),C(e,i,t),D.m(e,t),C(e,s,t);for(let n=0;n<h.length;n+=1)h[n].m(e,t);C(e,a,t),ge(l,e,t),C(e,c,t),ge(f,e,t),d=!0},p(t,r){const u={};64&r[0]&&(u.values=t[6]),n.$set(u),8&r[0]&&o(p,p=t[3][0])?(oe(),le(D,1,1,e),se(),D=Is(t),D.c(),ae(D,1),D.m(s.parentNode,s)):D.p(t,r),1066&r[0]&&(m=t[5].answers,oe(),h=pe(h,r,$,1,t,m,g,a.parentNode,de,Ls,a,Os),se());const i={};16&r[0]&&(i.seconds=t[4]*t[7].rounds),l.$set(i);f.$set({})},i(e){if(!d){ae(n.$$.fragment,e),ae(u.$$.fragment,e),ae(D);for(let e=0;e<m.length;e+=1)ae(h[e]);ae(l.$$.fragment,e),ae(f.$$.fragment,e),d=!0}},o(e){le(n.$$.fragment,e),le(u.$$.fragment,e),le(D);for(let e=0;e<h.length;e+=1)le(h[e]);le(l.$$.fragment,e),le(f.$$.fragment,e),d=!1},d(e){De(n,e),e&&F(r),De(u,e),e&&F(i),D.d(e),e&&F(s);for(let t=0;t<h.length;t+=1)h[t].d(e);e&&F(a),t[16](null),De(l,e),e&&F(c),t[17](null),De(f,e)}}}function _s(e){let t,n;return t=new Ie({props:{layout:e[11],$$slots:{default:[Ps]},$$scope:{ctx:e}}}),t.$on("click",e[18]),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){const r={};127&n[0]|1&n[1]&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function Ts(e,t,n){let r,u,i,o=[null,null,null,null],s=[{},{},{},{}],a=nt.getConfig(),l=12,c=new Bs,f=c.nextRound(),d=[1,10],p=As("--cmd-new-round",1e3),h=As("--cmd-idle",1e4,3e3);function g(){n(3,s=s.map((e=>new Object))),n(5,f=c.nextRound()),Je((()=>D()))}function D(){i="start",p.cancel(),h.reset(),o.forEach((e=>{e.setState("start")})),n(6,d=f.progress),Je((()=>ot()))}function m(){Ft.playRandom()}function $(){return h.reset(),"start"!=i&&("answered"==i?(g(),!0):void 0)}function v(e){if(h.reset(),$())return;i="answered";let t=f.answers.findIndex((t=>t===e)),r=f.rightAt;if(t===r){n(6,d[0]+=1,d);let e=c.isLast();Ft.play(e?"done":"yes"),p.reset(),e&&u.play()}else o[t].setState("wrong"),Ft.play("no"),c.addRounds(2),n(6,d[0]+=1,d),n(6,d[1]+=2,d);o[r].setState("right")}!function(){for(let e of nt.commands())if("secondsPerRound"===e[0].toLocaleLowerCase())n(4,l=parseInt(e[1]))}(),Fs("--cmd-new-round",(()=>g())),Fs("--cmd-idle",(()=>(Ft.play("idle"),void h.reset()))),Fs("--evt-time-is-up",(()=>(c.addRounds(1),n(6,d[1]+=1,d),r.restart(),void Ft.play("time-is-up")))),V((()=>D()));return[r,o,u,s,l,f,d,a,m,$,v,{areas:'\n            "prg   .    clk "\n            "que   que  que "\n            "a0    .    a1  "\n            ".     .    .   "\n            "a2    .    a3  "\n            ".     .    .   "\n            "tm    tm   tm  "\n        ',cols:"2fr 1fr 2fr",rows:"50px 80px 70px 10px 70px 15px 5px",bgColors:{prg:"bg-green-300",que:"bg-yellow-50 py-1",tm:"bg-blue-100"}},()=>m(),function(e,t){j[e?"unshift":"push"]((()=>{o[t]=e,n(1,o)}))},e=>v(e),()=>{var e;Xn("--evt-time-is-up",e)},function(e){j[e?"unshift":"push"]((()=>{r=e,n(0,r)}))},function(e){j[e?"unshift":"push"]((()=>{u=e,n(2,u)}))},()=>$()]}class Vs extends $e{constructor(e){super(),me(this,e,Ts,_s,o,{},null,[-1,-1])}}function Hs(e){let t,n;return{c(){t=w("bdi"),n=y(e[1]),N(t,"dir",e[4]),M(t,"font-size","15px")},m(e,r){C(e,t,r),m(t,n)},p(e,r){2&r&&k(n,e[1]),16&r&&N(t,"dir",e[4])},d(e){e&&F(t)}}}function Rs(e){let t;return{c(){t=y(e[1])},m(e,n){C(e,t,n)},p(e,n){2&n&&k(t,e[1])},d(e){e&&F(t)}}}function js(t){let n,r,i;function o(e,t){return e[3]?Rs:Hs}let s=o(t),a=s(t);return{c(){n=w("button"),a.c(),N(n,"class",t[2]),M(n,"grid-area",t[0])},m(e,u){C(e,n,u),a.m(n,null),r||(i=[f(xt.call(null,n)),f(Bt.call(null,n)),B(n,"click",t[12])],r=!0)},p(e,[t]){s===(s=o(e))&&a?a.p(e,t):(a.d(1),a=s(e),a&&(a.c(),a.m(n,null))),4&t&&N(n,"class",e[2]),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),a.d(),r=!1,u(i)}}}function Zs(e,t,n){let r,u,i,o,s,l,c,{ga:f}=t,{store:d}=t,{value:p,isClicked:h,isRight:g}=d;return a(e,p,(e=>n(1,i=e))),a(e,h,(e=>n(11,s=e))),a(e,g,(e=>n(10,o=e))),e.$$set=e=>{"ga"in e&&n(0,f=e.ga),"store"in e&&n(8,d=e.store)},e.$$.update=()=>{2&e.$$.dirty&&n(3,c=function(e){return/^-?\d+$/.test(e)}(i)),3072&e.$$.dirty&&n(2,l=s?o?"bg-green-200":"bg-red-200":"bg-gray-100"),2&e.$$.dirty&&n(9,r=/[\u0590-\u05FF]/.test(i)),512&e.$$.dirty&&n(4,u=r?"rtl":null)},[f,i,l,c,u,p,h,g,d,r,o,s,function(t){H.call(this,e,t)}]}class Us extends $e{constructor(e){super(),me(this,e,Zs,js,o,{ga:0,store:8})}}function Js(e,t,n){const r=e.slice();return r[4]=t[n],r}function Ws(e){let t,n,r,u,i,o=e[4].line+"";return{c(){t=w("p"),n=w("bdi"),r=y(o),u=b(),N(n,"dir","rtl"),N(t,"class",i=e[4].css)},m(e,i){C(e,t,i),m(t,n),m(n,r),m(t,u)},p(e,n){4&n&&o!==(o=e[4].line+"")&&k(r,o),4&n&&i!==(i=e[4].css)&&N(t,"class",i)},d(e){e&&F(t)}}}function Gs(t){let n,r,u,i=t[2],o=[];for(let e=0;e<i.length;e+=1)o[e]=Ws(Js(t,i,e));return{c(){n=w("div");for(let e=0;e<o.length;e+=1)o[e].c();M(n,"grid-area",t[0])},m(e,i){C(e,n,i);for(let e=0;e<o.length;e+=1)o[e].m(n,null);r||(u=B(n,"click",t[3]),r=!0)},p(e,[t]){if(4&t){let r;for(i=e[2],r=0;r<i.length;r+=1){const u=Js(e,i,r);o[r]?o[r].p(u,t):(o[r]=Ws(u),o[r].c(),o[r].m(n,null))}for(;r<o.length;r+=1)o[r].d(1);o.length=i.length}1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),A(o,e),r=!1,u()}}}function Xs(t,n,r){let u,i=e,o=()=>(i(),i=s(l,(e=>r(2,u=e))),l);t.$$.on_destroy.push((()=>i()));let{ga:a}=n,{text:l}=n;return o(),t.$$set=e=>{"ga"in e&&r(0,a=e.ga),"text"in e&&o(r(1,l=e.text))},[a,l,u,function(e){H.call(this,t,e)}]}class Ys extends $e{constructor(e){super(),me(this,e,Xs,Gs,o,{ga:0,text:1})}}function Qs(e,{delay:n=0,duration:r=400,easing:u=t}={}){const i=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:u,css:e=>"opacity: "+e*i}}function Ks(e){let t,n,r,i,o,s,a,l;return{c(){t=w("div"),n=w("button"),r=y(e[1]),N(n,"class",i="text-sm "+e[2]),N(t,"class","container mx-0 min-w-full flex flex-col items-center")},m(u,i){C(u,t,i),m(t,n),m(n,r),s=!0,a||(l=[f(xt.call(null,n)),f(Bt.call(null,n)),B(n,"click",e[5])],a=!0)},p(e,[t]){(!s||2&t)&&k(r,e[1]),(!s||4&t&&i!==(i="text-sm "+e[2]))&&N(n,"class",i)},i(e){s||(Y((()=>{o||(o=fe(n,Qs,{},!0)),o.run(1)})),s=!0)},o(e){o||(o=fe(n,Qs,{},!1)),o.run(0),s=!1},d(e){e&&F(t),e&&o&&o.end(),a=!1,u(l)}}}function ea(e,t,n){let r,{helpMe:u}=t,{text:i="הסבר לי בשיעור"}=t,o="",{clicked:s}=u.store;a(e,s,(e=>n(4,r=e)));return e.$$set=e=>{"helpMe"in e&&n(0,u=e.helpMe),"text"in e&&n(1,i=e.text)},e.$$.update=()=>{16&e.$$.dirty&&n(2,o=r?"bg-green-200":"bg-inherit")},[u,i,o,s,r,()=>u.apply()]}class ta extends $e{constructor(e){super(),me(this,e,ea,Ks,o,{helpMe:0,text:1})}}let na=nt.getCard();function ra(e){if(!e)return[];return(e.includes("\t")?e.split("\t"):e.includes("\n")?e.split("\n"):e.includes(";")?e.split(";"):e.includes(",")?e.split(","):e.split(" ")).map((e=>e.trim()))}let ua=e=>e?e.trim():e,ia=e=>{let t=function(e){let t=e.includes("<br>")?e.split("<br>"):e.includes("\n")?e.split("\n"):e.includes("\r")?e.split("\r"):e.includes(";")?e.split(";"):[e];t=t.map((e=>e.trim())).filter((e=>""!=e));let n=t.map((e=>ra(e)));return n}(ua(e.sets)),n=ua(e.problemId),r=function(e){let t=(e=e.replaceAll("\r","\n")).replaceAll("U+","&#x").replaceAll("\r","\n").splitTrimNoEmpties("\n"),n=[],r="";for(let e of t)if(e.startsWith("{")){if(!e.endsWith("}"))continue;r=e.slice(1,-1)}else n.push({line:e,css:r}),r="";return n}(ua(e.content)),u=ra(ua(e.answers));let i=function(e,t){return ra(e).map(((e,n)=>{let[r,u]=e.split(":"),i=new Set;return r.startsWith("~")&&(r=r.substring(1),i=new Set(t.map((e=>e[n])))),{name:r,fmt:u??"",invariantValues:[...i]}}))}(ua(e.variables),t),o=function(e){let t=ra(ua(e.options)).map((e=>e.includes("=")?e.split("="):[e,""])),n=!1,r=parseInt(e.helpMeTimeout);return(isNaN(r)||r<=0)&&(r=5e3),t.forEach((e=>{"heb-test"===e[0]?n=!0:Ee.error(`Unknown option '${e}'`,(e=>ye(e)))})),{hebTest:n,helpMeTimeout:r}}(e);return{problemId:n,text:r,answers:u,variables:i,sets:t,options:o}},oa=new Map([["0","אפס"],["1","אחד"],["2","שני"],["3","שלוש"],["4","ארבע"],["5","חמש"],["6","שש"],["7","שבע"],["8","שמונה"],["9","תשעה"],["10","עשר"],["20","עשרים"],["30","שלושים"],["40","ארבעים"],["50","חמשים"],["60","ששים"],["70","שבעים"],["80","שמונים"],["90","תשעים"],["100","מאה"],["200","מתיים"],["300","שלוש מאות"],["400","ארבע מאות"],["500","חמש מאות"],["600","שש מאות"],["700","שבע מאות"],["800","שמונה מאות"],["900","תשע מאות"],["1000","אלף"],["2000","אלפיים"]]),sa=new Map([["1/2","חצי"],["1/3","שליש"],["2/3","שני שליש"],["1/4","רבע"],["1/5","חמשית"],["1/10","עשירית"]]),aa=["1/2","1/3","2/3","1/4","3/4","1/5","2/5","3/5","4/5","1/6","5/6","1/7","2/7","3/7","4/7","5/7","6/7","1/8","3/8","5/8","7/8","1/9","2/9","4/9","5/9","7/9","8/9","1/10","3/10","7/10","9/10","1/12","5/12","7/12","11/12","1/15","2/15","4/15","7/15","8/15","11/15","13/15","14/15","1/20","3/20","7/20","9/20","1/25","2/25","3/25","4/25","1/50","3/50"],la=e=>aa.includes(co(e));function ca(e,t,n){let r=so(go(e));if(r.isNaN())return[e];let u=[],i=e=>u.push(e.replace("mtr",n.gu).replace("sm",n.lu)),o=r.trunc(),s=o.toString(),a=oa.has(s),l=oa.get(s),c=r.minus(o),f=c.toString(),d=r.minus(r.toDP(2)).eq(0),p=r.toString(),h=(g=c,sa.has(co(g)));var g;let D=(e=>sa.get(co(e)))(c),m=la(c),$=(e=>co(e))(c),v=n.g2l(r),C=v.toString(),F=n.g2l(c).toString(),A=oa.has(F),w=oa.get(F);return c.eq(0)&&(a&&i(o.eq(1)?"mtr אחד":"אפס mtr".replace("אפס",l)),i("0 mtr".replace("0",s)),v.lte(n.luLimit)&&(i("100 sm".replace("100",C)),oa.has(C)&&i("100 sm".replace("100",oa.get(C))))),o.eq(0)&&(c.eq(0)||(h&&i("חצי mtr".replace("חצי",D)),m&&i("`1/2` mtr".replace("1/2",$)),d&&(i("0.5 mtr".replace("0.5",f)),i("50 sm".replace("50",F)),A&&i("חמשים sm".replace("חמשים",w))))),o.lt(1)||o.gt(1)||c.eq(0)||(h&&i("mtr וחצי".replace("חצי",D)),m&&i("mtr ו-`1/2`".replace("1/2",$)),d&&(i("mtr ו-50 sm".replace("50",F)),i("150 sm".replace("150",C)),A&&i("mtr וחמשים sm".replace("חמשים",w)))),o.lt(2)||c.eq(0)||(a&&h&&i("שני mtr וחצי".replace("שני",l).replace("חצי",D)),m&&i("`2 1/2` mtr".replace("2",s).replace("1/2",$)),d&&(a&&A&&i("שני mtr וחמשים sm".replace("שני",l).replace("חמשים",w)),i("2.5 mtr".replace("2.5",p)),v.lte(n.luLimit)&&i("250 sm".replace("250",C)))),u}const fa=(e,t)=>ca(e,0,{gu:"מטר",lu:'ס"מ',g2l:e=>e.mul(100),luLimit:1e3}),da=(e,t)=>ca(e,0,{gu:'ק"מ',lu:"מטר",g2l:e=>e.mul(1e3),luLimit:5e3}),pa=(e,t)=>ca(e,0,{gu:'ס"מ',lu:'מ"מ',g2l:e=>e.mul(10),luLimit:100});function ha(e,t){let n=()=>`${r.div(1e3)} ק"ג`;if(e.includes("/"))return[Ji(e)];let r=so(parseFloat(e));return r.isNaN()?[]:r.gte(2e3)?[n()]:[`${e} גרם`,n()]}const ga=(e,t)=>ca(e,0,{gu:'ק"ג',lu:"גרם",g2l:e=>e.mul(1e3),luLimit:3e3});function Da(e,t){let n=ca(e,0,{gu:"שקל",lu:"אגורות",g2l:e=>e.mul(100),luLimit:300}),r=n.filter((e=>!e.includes("שקל")));switch(t){case"$":case"$1":return n;case"$2":return r.length>0?r:n}}function ma(e){if(e.includes("/"))return[Ji(e)];let t=so(parseFloat(e));if(t.isNaN())return[];switch(lt(["percents","fraction","dots"])){case"percents":return[`${t.mul(100)}%`];case"fraction":return[Ji(co(t))];case"dots":return[e]}}function $a(e,t,n=[]){let r=go(e);if(r.isNaN())return[];let u=[],i=r.minus(r.toDP(3)).eq(0),o=la(r),s=`${r.mul(100)}%`,a=r.toString(),l=Ji(co(r));return i&&(u.push(a),u.push(s)),o&&(u.push(l),n.forEach((e=>u.push(Ji(function(e,t,n=2){let r=Math.pow(10,n),u=e.toFraction(r);return`${u[0].mul(t).toNumber()}/${u[1].mul(t).toNumber()}`}(r,e)))))),0===u.length&&u.push(e.includes("/")?Ji(e):e),u}const va=(e,t)=>$a(e),Ca=(e,t)=>$a(e,0,[2,3,4,5]);let Fa=["1/2","1/3","2/3","1/4","3/4","1/5","2/5","3/5","4/5","1/6","5/6","1/10","3/10","7/10","9/10","1/12","5/12","7/12","11/12"];function Aa(e){let t=co(e.div(60));return Fa.includes(t)}let wa={revaShaa:"רבע שעה",shlishShaa:"",heziShaa:"חצי שעה",fractionOfShaa:"`N/D` שעה",dakotOnly:"MM דקות",shaa:"שעה",shaaVeReva:"שעה ורבע",shaaVeShlish:"שעה ושליש",shaaVaHezi:"שעה וחצי",shaaVeFraction:"שעה ו-`N/D`",shaaVeDakot:"שעה ו-MM דקות",shaataim:"שעתיים",shaataimVeReva:"שעתיים ורבע",shaataimVeShlish:"שעתיים ושליש",shaataimVaHezi:"שעתיים וחצי",shaataimVeFraction:"שעתיים ו- `N/D`",shaataimVeDakot:"שעתיים ו-MM דקות",shaotOnly:"HH שעות",shaotVeReva:"HH שעות ורבע",shaotVeShlish:"HH שעות ושליש",shaotVaHezi:"HH שעות וחצי",shaotVeFraction:"HH שעות ו- `N/D`",shaotVeDakot:"HH שעות ו-MM דקות",shaaVeShever:""};function Ea(e){let t=[],n=go(e),r=n.mul(60),u=n.trunc(),i=n.minus(u).mul(60),o=co(i),s=co(u);return function(){if(!r.gte(60)){if(i.eq(15))return t.push(wa.revaShaa),t.push(wa.dakotOnly.replace("MM","15")),void t.push(wa.fractionOfShaa.replace("N/D","1/4"));if(i.eq(30))return t.push(wa.heziShaa),t.push(wa.dakotOnly.replace("MM","30")),void t.push(wa.fractionOfShaa.replace("N/D","1/2"));if(Aa(i)){let e=co(i.div(60));t.push(wa.fractionOfShaa.replace("N/D",e))}t.push(wa.dakotOnly.replace("MM",o))}}(),function(){if(!r.lt(60)&&!r.gte(120)){if(i.eq(0))return t.push(wa.shaa),void t.push(wa.dakotOnly.replace("MM","60"));if(i.eq(15))return t.push(wa.shaaVeReva),t.push(wa.shaaVeDakot.replace("MM","15")),void t.push(wa.shaaVeFraction.replace("N/D","1/4"));if(i.eq(20))return t.push(wa.shaaVeShlish),t.push(wa.shaaVeDakot.replace("MM","20")),void t.push(wa.shaaVeFraction.replace("N/D","1/3"));if(i.eq(30))return t.push(wa.shaaVaHezi),t.push(wa.shaaVeDakot.replace("MM","30")),void t.push(wa.shaaVeFraction.replace("N/D","1/2"));if(Aa(i)){let e=co(i.div(60));t.push(wa.shaaVeFraction.replace("N/D",e))}t.push(wa.dakotOnly.replace("MM",co(r))),t.push(wa.shaaVeDakot.replace("MM",o))}}(),function(){if(!r.lt(120)&&!r.gte(180)){if(i.eq(0))return t.push(wa.shaataim),void t.push(wa.dakotOnly.replace("MM","120"));if(i.eq(15))return t.push(wa.shaataimVeReva),t.push(wa.shaataimVeDakot.replace("MM","15")),void t.push(wa.shaataimVeFraction.replace("N/D","1/4"));if(i.eq(20))return t.push(wa.shaataimVeShlish),t.push(wa.shaataimVeDakot.replace("MM","20")),void t.push(wa.shaataimVeFraction.replace("N/D","1/3"));if(i.eq(30))return t.push(wa.shaataimVaHezi),t.push(wa.shaataimVeDakot.replace("MM","30")),void t.push(wa.shaataimVeFraction.replace("N/D","1/2"));if(Aa(i)){let e=co(i.div(60));t.push(wa.shaataimVeFraction.replace("N/D",e))}t.push(wa.dakotOnly.replace("MM",co(r))),t.push(wa.shaataimVeDakot.replace("MM",o))}}(),function(){if(!r.lt(180)){if(i.eq(0))return t.push(wa.shaotOnly.replace("HH",s)),void(r.lte(240)&&t.push(wa.dakotOnly.replace("MM",co(u.mul(60)))));if(i.eq(15))return t.push(wa.shaotVeReva.replace("HH",s)),t.push(wa.shaotVeDakot.replace("HH",s).replace("MM","15")),void t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D","1/4"));if(i.eq(20))return t.push(wa.shaotVeShlish.replace("HH",s)),t.push(wa.shaotVeDakot.replace("HH",s).replace("MM","20")),void t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D","1/3"));if(i.eq(30))return t.push(wa.shaotVaHezi.replace("HH",s)),t.push(wa.shaotVeDakot.replace("HH",s).replace("MM","30")),void t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D","1/2"));if(Aa(i)){let e=co(i.div(60));t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D",e))}t.push(wa.shaotVeDakot.replace("HH",s).replace("MM",o))}}(),t}const ya=(e,t)=>Ea(e),ba=(e,t)=>function(e){let t=[],n=go(e),r=n.mul(60),u=n.trunc(),i=n.minus(u).mul(60),o=co(i),s=co(u);return function(){if(!r.gte(60))if(i.eq(15))t.push(wa.fractionOfShaa.replace("N/D","1/4"));else if(i.eq(30))t.push(wa.fractionOfShaa.replace("N/D","1/2"));else if(Aa(i)){let e=co(i.div(60));t.push(wa.fractionOfShaa.replace("N/D",e))}else t.push(wa.dakotOnly.replace("MM",o))}(),function(){if(!r.lt(60)&&!r.gte(120))if(i.eq(0))t.push(wa.shaa);else if(i.eq(15))t.push(wa.shaaVeFraction.replace("N/D","1/4"));else if(i.eq(30))t.push(wa.shaaVeFraction.replace("N/D","1/2"));else if(Aa(i)){let e=co(i.div(60));t.push(wa.shaaVeFraction.replace("N/D",e))}else t.push(wa.shaaVeDakot.replace("MM",o))}(),function(){if(!r.lt(120)&&!r.gte(180))if(i.eq(0))t.push(wa.shaataim);else if(i.eq(15))t.push(wa.shaataimVeFraction.replace("N/D","1/4"));else if(i.eq(30))t.push(wa.shaataimVeFraction.replace("N/D","1/2"));else if(Aa(i)){let e=co(i.div(60));t.push(wa.shaataimVeFraction.replace("N/D",e))}else t.push(wa.shaataimVeDakot.replace("MM",o))}(),function(){if(!r.lt(180))if(i.eq(0))t.push(wa.shaotOnly.replace("HH",s));else if(i.eq(15))t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D","1/4"));else if(i.eq(30))t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D","1/2"));else if(Aa(i)){let e=co(i.div(60));t.push(wa.shaotVeFraction.replace("HH",s).replace("N/D",e))}else t.push(wa.shaotVeDakot.replace("HH",s).replace("MM",o))}(),t}(e);const xa=function(){function e(e){return e.includes("/")?Ji(e):e}function t(e){return[Ji(e)]}let n=new Map([["p",ma],["p1",ma],["p2",va],["p3",Ca],["m",ha],["m1",ha],["m2",ga],["t",ya],["t1",ya],["t2",ba],["d",da],["d1",da],["d2",fa],["d3",pa],["a",t],["a1",t],["f",e=>[""]],["f1",e=>[""]],["$",Da],["$1",Da],["$2",Da]]);return{apply:(t,r)=>{if(t.includes("`"))return t;if(!r||""===r)return e(t);if(n.has(r)){let e=n.get(r)(t,r);return 0===e.length&&(Ee.error(`no formatter variations for '${t}'; fmt='${r}'`,(e=>ye(e))),e.push(t)),lt(e)}return Ee.error(`unknown formatter '${r}'`,(e=>ye(e))),e(t)},variateTime:e=>Ea(e)}}();function Ba(e,t,n){let r=t.map(((e,t)=>{let r=e.invariantValues.length>0?lt(e.invariantValues):n[t];return r=function(e,t){var n;return e.includes("`")?e:t&&""!==t?xa.apply(e,t):(n=e).includes("/")?Ji(n):n}(r,e.fmt),{$var:e,uniqueName:`__${t}__`,value:r}}));r=r.filter((e=>e.$var.name.length>0)),r.sort(((e,t)=>t.$var.name.length-e.$var.name.length));for(let t=3;t-- >0;){if(r.forEach((t=>e=e.replaceAll(t.$var.name,t.uniqueName))),r.forEach((t=>e=e.replaceAll(t.uniqueName,t.value))),r.every((t=>!e.includes(t.$var.name))))break}return e}function Na(e,t){return e.text.map((n=>({line:Ba(n.line,e.variables,t),css:n.css})))}function ka(e,t){return gt(e.answers.map(((n,r)=>({name:e.answers[r],value:Ba(n,e.variables,t),isRight:0==r}))))}let Ma={markCurrentCard:()=>{},isCurrentCardMarked:()=>!1};const Sa=Ye((()=>(AnkiDroidJS.init(JSON.stringify({version:"0.0.1",developer:"info@gebemot.com"})),!0)),!1)?{markCurrentCard:()=>Ye((()=>{AnkiDroidJS.ankiGetCardMark()||ankiMarkCard()})),isCurrentCardMarked:()=>Ye((()=>AnkiDroidJS.ankiGetCardMark()))}:Ma;function qa(e,t,n){const r=e.slice();return r[18]=t[n],r[20]=n,r}function za(t){let n,r;return n=new ta({props:{helpMe:t[4]}}),{c(){he(n.$$.fragment)},m(e,t){ge(n,e,t),r=!0},p:e,i(e){r||(ae(n.$$.fragment,e),r=!0)},o(e){le(n.$$.fragment,e),r=!1},d(e){De(n,e)}}}function Oa(t){let n,r;return n=new Ys({props:{ga:"txt",text:t[3].text}}),n.$on("click",t[10]),{c(){he(n.$$.fragment)},m(e,t){ge(n,e,t),r=!0},p:e,i(e){r||(ae(n.$$.fragment,e),r=!0)},o(e){le(n.$$.fragment,e),r=!1},d(e){De(n,e)}}}function Ia(e,t){let n,r,u;return r=new Us({props:{store:t[18],ga:`a${t[20]}`}}),r.$on("click",(function(){return t[11](t[20])})),{key:e,first:null,c(){n=x(),he(r.$$.fragment),this.first=n},m(e,t){C(e,n,t),ge(r,e,t),u=!0},p(e,n){t=e},i(e){u||(ae(r.$$.fragment,e),u=!0)},o(e){le(r.$$.fragment,e),u=!1},d(e){e&&F(n),De(r,e)}}}function La(t){let n,r,u,i,s,a=t[0],l=[],c=new Map;n=new Un({props:{}}),t[9](n);let f=Oa(t),d=t[3].answers;const p=e=>({model:e[0]});for(let e=0;e<d.length;e+=1){let n=qa(t,d,e),r=p(n);c.set(r,l[e]=Ia(r,n))}return{c(){he(n.$$.fragment),r=b(),f.c(),u=b();for(let e=0;e<l.length;e+=1)l[e].c();i=x()},m(e,t){ge(n,e,t),C(e,r,t),f.m(e,t),C(e,u,t);for(let n=0;n<l.length;n+=1)l[n].m(e,t);C(e,i,t),s=!0},p(t,r){n.$set({}),1&r&&o(a,a=t[0])?(oe(),le(f,1,1,e),se(),f=Oa(t),f.c(),ae(f,1),f.m(u.parentNode,u)):f.p(t,r),41&r&&(d=t[3].answers,oe(),l=pe(l,r,p,1,t,d,c,i.parentNode,de,Ia,i,qa),se())},i(e){if(!s){ae(n.$$.fragment,e),ae(f);for(let e=0;e<d.length;e+=1)ae(l[e]);s=!0}},o(e){le(n.$$.fragment,e),le(f);for(let e=0;e<l.length;e+=1)le(l[e]);s=!1},d(e){t[9](null),De(n,e),e&&F(r),f.d(e),e&&F(u);for(let t=0;t<l.length;t+=1)l[t].d(e);e&&F(i)}}}function Pa(e){let t,n,r,u=e[2]&&za(e);return n=new Ie({props:{layout:e[7],$$slots:{default:[La]},$$scope:{ctx:e}}}),n.$on("click",e[12]),{c(){u&&u.c(),t=b(),he(n.$$.fragment)},m(e,i){u&&u.m(e,i),C(e,t,i),ge(n,e,i),r=!0},p(e,[r]){e[2]?u?(u.p(e,r),4&r&&ae(u,1)):(u=za(e),u.c(),ae(u,1),u.m(t.parentNode,t)):u&&(oe(),le(u,1,1,(()=>{u=null})),se());const i={};2097155&r&&(i.$$scope={dirty:r,ctx:e}),n.$set(i)},i(e){r||(ae(u),ae(n.$$.fragment,e),r=!0)},o(e){le(u),le(n.$$.fragment,e),r=!1},d(e){u&&u.d(e),e&&F(t),De(n,e)}}}function _a(e,t,n){let r,u=ia(nt.getCard()),i=(e=>({makeModel:(t=-1)=>{let n=at(0,e.sets.length-1);for(;n===t&&e.sets.length>1;)n=at(0,e.sets.length-1);let r=e.sets[n];return{problemId:e.problemId,setId:n,text:Na(e,r),answers:ka(e,r),options:e.options}}}))(u),o=i.makeModel();console.log("model",o);let s,l=(e=>({text:we(e.text),problemId:Ae(e.problemId),sets:Ae(na.sets),answers:e.answers.map((e=>({value:we(e.value),isRight:we(e.isRight),isClicked:we(!1)}))),helpMe:{here:we(!1),timeout:e.options.helpMeTimeout,problemId:e.problemId,clicked:we(!1)}}))(o),c=!1,f=!1;Le.add(u.problemId);let d=function(e){let t,n=e;function r(){let r=Sa.isCurrentCardMarked();e.clicked.set(r),clearTimeout(t),t=setTimeout((()=>n.here.set(!0)),e.timeout)}return{store:e,start:()=>r(),restart:()=>{n.here.set(!1),r()},apply:()=>{e.clicked.set(!0),Sa.markCurrentCard()}}}(l.helpMe);function p(e){c?h():(l.answers.forEach(((e,t)=>e.isClicked.set(o.answers[t].isRight))),l.answers[e].isClicked.set(!0),c=!0,f=o.answers[e].isRight,f&&s.play())}function h(){n(0,o=i.makeModel(o.setId)),l.text.set(o.text),l.answers.forEach(((e,t)=>{e.value.set(o.answers[t].value),e.isRight.set(o.answers[t].isRight),e.isClicked.set(!1)})),c=!1,f=!1,Ui(500),d.restart()}function g(){c&&h()}V((()=>{Ui(1e3),d.start()}));let D={areas:'\n            "txt  txt  txt "\n            "txt  txt  txt "\n            "txt  txt  txt "\n            "txt  txt  txt "\n            "a0    .    a1 "\n            "a2    .    a3 "\n            ".     .    .  "\n        ',cols:"2fr 1fr 2fr",rows:"2fr 2fr 2fr 2fr 2fr 2fr 10px"},m=d.store.here;a(e,m,(e=>n(2,r=e)));return[o,s,r,l,d,p,g,D,m,function(e){j[e?"unshift":"push"]((()=>{s=e,n(1,s)}))},()=>g(),e=>p(e),()=>g()]}class Ta extends $e{constructor(e){super(),me(this,e,_a,Pa,o,{})}}function Va(t){let n,r,i,o,s,a,l;return{c(){n=w("div"),r=w("div"),i=w("span"),o=y(t[2]),N(r,"class",s="\\ text-xs text-center text-black \\ "+t[1]+" \\"),M(r,"width",t[3]+"%"),N(n,"class","w-full bg-red-50 text-right"),M(n,"grid-area",t[0])},m(e,t){C(e,n,t),m(n,r),m(r,i),m(i,o),a||(l=[f(xt.call(null,i)),f(xt.call(null,n)),f(Bt.call(null,n))],a=!0)},p(e,[t]){4&t&&k(o,e[2]),2&t&&s!==(s="\\ text-xs text-center text-black \\ "+e[1]+" \\")&&N(r,"class",s),8&t&&M(r,"width",e[3]+"%"),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),a=!1,u(l)}}}function Ha(e,t,n){let r,u,{ga:i}=t,{bgColor:o="bg-green-300"}=t,{store:s}=t,{value:l,max:c}=s;a(e,l,(e=>n(8,u=e))),a(e,c,(e=>n(7,r=e)));let[f,d]=[u,0];return e.$$set=e=>{"ga"in e&&n(0,i=e.ga),"bgColor"in e&&n(1,o=e.bgColor),"store"in e&&n(6,s=e.store)},e.$$.update=()=>{if(384&e.$$.dirty){let e=r-u;e>=0&&(n(2,f=e),n(3,d=u/r*100))}},[i,o,f,d,l,c,s,r,u]}class Ra extends $e{constructor(e){super(),me(this,e,Ha,Va,o,{ga:0,bgColor:1,store:6})}}function ja(e,t){return new Proxy(t,{get:(t,n)=>n in t?Reflect.get(t,n):e(n)})}function Za(e){let t=e.flat();function n(e,n){return t[e]}function r(e){return[so(0)]}return ja((e=>n(e)),{count:t.length,all:()=>t,get:(e,t=!0)=>n(e),has:e=>void 0!==n(e),v2i:(e,t=!0)=>{let r=n(e);return oo(r)?Number(r):((e,t)=>e?be(t,(e=>ye(e))):void 0)(t,`Not an index '${r}'`)},v2d:(e,t=!0)=>go(n(e)),rand:()=>r()[0],rands:(e=1)=>r()})}const Ua=function(){function e(e){switch(e.toLocaleLowerCase()){case"d":default:return":d";case"f":return":f";case"w":return":w";case"r":return":r"}}function t(e){let t=":d",n=e.includes("."),r=e.includes("/"),u=e.trim().includes(" ");return r&&u?t=":w":r?t=":f":n&&(t=":d"),t}function n(t){let[n,r]=t.splitTrim(":");return r?e(r):":d"}let r={":d":1,":f":10,":w":100,":r":1e3};function u(e,t){if(!e.isFinite())return lo(e);let n=!e.toFraction()[1].eq(1),r=e.minus(e.toDP(2)).eq(0),u=e.toString(),i=e.gt(1);if(":r"===t){let t=[];return n&&t.push(co(e,!1)),n&&i&&t.push(co(e,!0)),r&&t.push(u),lt(t)}switch(t){case":d":return r?u:co(e,!1);case":w":return co(e);case":f":return co(e,!1)}}return{toDFmt:e,parse:function(e,...u){let i,o=":d",s=e=>o=o?r[e]>=r[o]?e:o:e,a=e=>i=i?r[e]>=r[i]?e:i:e;for(let r of[...et(e),...u])if(r.includes(":")){a(n(r))}else{s(t(r))}return i||o},format:u,formats:function(e,t){return e.map((e=>u(e,t)))}}}();function Ja(e,t=-1){function n(e){return e.startsWith("*|")?["*",e.slice(2)]:["+",e]}function r(e){let{asIs:t,d:n,fmt:r}=e;if(t&&!r)return t;if(xe(n&&r,(e=>ye(e))),!n.isFinite())return lo(n);let u=!n.toFraction()[1].eq(1),i=n.minus(n.toDP(2)).eq(0),o=n.toString(),s=n.gt(1);if(t&&":r"===r){let e=[t];return u&&e.push(co(n,!1)),u&&s&&e.push(co(n,!0)),i&&e.push(o),lt(e)}switch(":r"===r&&(r=lt([":d",":w",":f"])),r){case":d":return i?o:co(n);case":w":return co(n);case":f":return co(n,!1)}}let u=e.splitTrim(";");u.includes("")&&be(`Empty line in cell random generator; cell='${e}'`,(e=>ye(e))),t>=0&&(u=[u[t%u.length]]);let i=u.map((e=>e.includes("..")?function(e){let[t,r]=n(e),[u,i]=r.split(":"),[o,s]=u.split("|"),[a,l]=o.split("..");s??="1";let c=i?Ua.toDFmt(i):Ua.parse(a,l,s),[f,d,p]=[go(a),go(l),go(s)],h=[];for(let e=f;e.lte(d);e=e.add(p))h.push({d:e,fmt:c,op:t});return h}(e):function(e){let[t,r]=n(e),u=r.splitTrimNoEmpties(","),i=[];return u.forEach((e=>{let[n,r]=e.split(":"),u=r?Ua.toDFmt(r):void 0,o=go(n);i.push({asIs:n,d:o,fmt:u,op:t})})),i}(e))).flat();return 0===i.length&&be(`Cell random generator produced no numbers; cell='${e}'`,(e=>ye(e))),{op:i[0].op,all:()=>ao(i.map((e=>e.d))),one:()=>r(lt(i)),many:e=>{e<=0&&be(`Can't take ${e} numbers`,(e=>ye(e)));let t=new Set;for(let n of gt(i))if(t.add(r(n)),t.size===e)break;return[...t]}}}function Wa(e){(!e||e.length<=1||0===e[0].length)&&be("Undefined or empty grid",(e=>ye(e)));let[t,...n]=e,r=n.map((e=>e.join(","))),[u,i]=[n.length,n[0].length];function o(e,o,s,a=!1){let l=e=>s?be(`${e} in ${o} row (${r[o]})`,(e=>ye(e))):void 0;if(o<0||o>=u)return l(`Row ${o} is out of grid (${u} lines)`);if(oo(e))return a?e<0||e>=u?l(`Row ${e} is out of grid (${u} lines)`):0===e?this:Wa([t,...n.slice(e)]):e<0||e>=i||e>=n[o].length?l(`No ${a?"line":"index"} '${e}'`):n[o][e];let c=t.indexOf(e);return-1===c?l(`No key '${e}'`):c>=n[o].length?l(`No value for '${e}' at ${c} (row.length=${n[o].length})`):n[o][c]}function s(e,t,n){let r=o(e,n,!0).splitTrim(";");t>=0&&(r=[r[t%r.length]]);let u=r.map((e=>e.split(","))).flat();return lt(u)}function a(e,t,n){return go(Ja(o(e,n,!0),t).one())}function l(e,t,n,r){let u=o(e,n,r);if(void 0===u)return;let i=u.splitTrim(";");return i[t%i.length]}return ja((e=>o(e,0,!0,!0)),{numOfLines:u,get:(e,t=0,n=!1)=>o(e,t,n),at:(e,t=0,n=!0)=>o(e,t,n),has:(e,t=0)=>void 0!==o(e,t,!1),atLnNo:function(e,t,n=0,r=!0){return"string"==typeof e||"number"==typeof e?l(e,t,n,r):(xe(e.length>0,"Should be one name at least"),e.map((e=>l(e,t,n,r))))},v2i:function(e,t=0,n=!1){let r=o(e,t,n),u=n=>be(`v2i('${e}', ${t}): ${n} while converting v='${r}'`);if(void 0===r){if(!n)return;u("No key")}if(0===r.length){if(!n)return;u("Empty value")}let i=parseInt(r),s=so(i);try{s=go(r)}catch{if(!n)return i;u("NaN (string)")}if(!s.eq(i)){if(!n)return i;u("NaN (not integer)")}if(Number.isNaN(Number(r))){if(!n)return i;u("NaN (string)")}return i},v2d:function(e,t=0,n=!1){let r=o(e,t,n),u=n=>be(`v2d('${e}', ${t}): ${n} while converting v='${r}'`);if(void 0===r){if(!n)return;u("No key")}if(0===r.length){if(!n)return;u("Empty value")}let i=go(r);if(i.eq(so(1/0))){if(!n)return i;u("Infinity in value")}return i},rand_str:function(e,t=-1,n=0){return"string"==typeof e||"number"==typeof e?s(e,t,n):(xe(e.length>0,"Should be one name at least"),e.map((e=>s(e,t,n))))},rand:function(e,t=-1,n=0){return"string"==typeof e||"number"==typeof e?a(e,t,n):(xe(e.length>0,"Should be one name at least"),e.map((e=>a(e,t,n))))}})}function Ga(e){if(""===e.trim())return Wa([["n/a"],[void 0]]);let t=(e=tt(e,";")).splitTrimNoEmpties("\n").map((e=>e.splitTrim("\t")));return Wa(t)}const Xa={numberOfLinesInGeneratorCell:[5,10],nCountInSequence:8};let Ya=e=>e?e.trim():"";function Qa(e=null){e??=ankiCard;let t=Ya(e.problemId),n=Ga(Ya(e.content)),r=Ya(e.view).split("\n").map((e=>e.splitTrim("\t")));let u=function(e){if(""===e.trim())return Za([]);let t=(e=tt(e,";")).splitTrimNoEmpties("\n").map((e=>e.splitTrim("\t")));return Za(t)}(Ya(e.answers)),i=Ga(Ya(e.options)),o=i.v2i("count")??Xa.nCountInSequence,s=i.v2i("rounds")??1,a=i.v2i("timer")??0;return{problemId:t,content:n,nCount:o,viewTemplate:r,answers:u,options:i,settings:{rounds:s,timer:a}}}const Ka=function(){let e=new Map;return{registerFactory:function(t,n){xe(!e.has(t),`Formula '${t}' is already registered`),e.set(t,n)},makeFormula:t=>{let n=t.args.formula.splitTrim("|")[0],r=e.get(n);return xe(r,`No formula '${n}' is registered`),Ee.onerror((()=>r(t)),(e=>ye(e,`While making '${n}'`)))}}}();let el=0;function tl({name:e,view:t,value:n,fmt:r}){let u=`__${++el}__`,i=`~${e}`,o=`~${u}`,s=et(t),a=et(n);return function(e){if(s.length>1)return;xe(1===a.length);let t=a[0],n=a[0].abs(),u=so(n.lte(1)?.1:n.lte(2)?.2:n.lte(3)?.5:n.lte(10)?1:n.lte(50)?5:10);Xe(e).forEach((e=>{let n=u.mul(e+1),i=t.minus(n),o=t.plus(n);a.push(i,o),s.push(Ua.format(i,r),Ua.format(o,r))}))}(3),{name:e,view:s[0],value:a[0],uniqueName:u,values:a,views:s,toUniqueName:function(t){return t.replaceAll(i,o).replaceAll(e,u)},toView:function({str:e,variate:t=!1}){let[n,r]=[s[0],s[0]];return t&&s.length>1&&(r=lt(s.slice(1))),e.replaceAll(o,r).replaceAll(u,n)},rand:()=>lt(s),iAmHere:function(t){let n=t.includes(e)||t.includes(u),r=t.includes(i)||t.includes(o);return n&&!r}}}Ka.registerFactory("a0+nd",(({args:e,genLnNo:t,nCount:n})=>{let r=e.subst,u=e.atLnNo("a0",t),i=e.atLnNo("d",t),o=Ja(e.atLnNo("dd",t,0,!1)??"0",t),s=r.split(":")[0],a=e.rand("a0",t),l=e.rand("d",t),c=go(o.one()),f=o.op,d=Ua.parse(r,u,i),p=Ua.format(l,d),h=Ua.format(c,d),g=(e,t)=>tl({name:`${s}${e}`,view:Ua.format(t,d),value:t,fmt:d});return{A:s,fmt:d,makeSequence:function(){let e=a,t=l,r=[g(0,e)];for(let u=1;u<=n;u++)e=e.plus(t),r.push(g(u,e)),t="*"===f?t.mul(c):t.plus(c);return r},makeVariables:function(){return[tl({name:`d${s}`,view:p,value:l,fmt:d}),tl({name:`dd${s}`,view:h,value:c,fmt:d})]}}})),Ka.registerFactory("a0*d^n",(({args:e,genLnNo:t,nCount:n})=>{let r=e.subst,u=e.atLnNo("a0",t),i=e.atLnNo("d",t),o=Ja(e.atLnNo("dd",t,0,!1)??"0",t),s=r.split(":")[0],a=e.rand("a0",t),l=e.rand("d",t),c=go(o.one()),f=Ua.parse(r,u,i),d=(e,t)=>tl({name:`${s}${e}`,view:Ua.format(t,f),value:t,fmt:f});return{A:s,fmt:f,makeSequence:function(){let e=[d(0,a)],t=a;for(let r=1;r<=n;r++)t=t.mul(l),e.push(d(r,t)),l=l.add(c);return e},makeVariables:function(){return[]}}})),Ka.registerFactory("fib",(({args:e,genLnNo:t,nCount:n})=>{let r=e.subst,u=e.atLnNo("a0",t),i=r.split(":")[0],o=e.rand("a0",t),s=e.rand("a1",t),a=Ua.parse(r,u),l=(e,t)=>tl({name:`${i}${e}`,view:Ua.format(t,a),value:t,fmt:a});return{A:i,fmt:a,makeSequence:function(){let e=[l(0,o),l(1,s)];for(let t=2;t<=n;t++){let n=o.plus(s);e.push(l(t,n)),[o,s]=[s,n]}return e},makeVariables:function(){return[]}}}));let nl=new Map([["+",(e,t)=>e.plus(t)],["-",(e,t)=>e.minus(t)],["*",(e,t)=>e.mul(t)],["/",(e,t)=>e.div(t)]]);function rl({args:e,genLnNo:t,nCount:n}){let r=e.atLnNo(["a0","b0","c0","v1","v2"],t),[u,i,o,s,a]=r.map((e=>Ua.parse(e))),[l,c,f,d,p]=e.rand(["a0","b0","c0","v1","v2"],t),[h,g]=e.rand_str(["op1","op2"],t),D=(e,t,n)=>tl({name:n,view:Ua.format(e,t),value:e,fmt:t}),m=(e,t,n,r)=>{let u;switch(e){case"+":u=t.lt(0)?"":"+";break;case"-":u=t.lt(0)?"+":"-";break;case"/":u="-:";break;case"*":u="xx"}return tl({name:r,view:`${u}${Ua.format(t,n)}`,value:t,fmt:n})},$=(e,t,n)=>{let r=nl.get(t);return xe(r,`Can't find formula for op='${t}'`),r(e,n)};return{A:"",fmt:u,makeSequence:function(){let e=$(l,h,d),t=$(c,h,d),n=$(f,h,d),r=$(e,g,p),s=$(t,g,p),a=$(n,g,p);return[D(l,u,"a0"),D(e,u,"a1"),D(r,u,"a2"),D(c,i,"b0"),D(t,i,"b1"),D(s,i,"b2"),D(f,o,"c0"),D(n,o,"c1"),D(a,o,"c2")]},makeVariables:function(){return[m(h,d,s,"op1"),m(g,p,a,"op2")]}}}function ul(e,{numberOfLinesInGeneratorCell:t}=Xa){let{content:n,viewTemplate:r,options:u}=e,i=at(t),o=({A:e,fmt:t,n:n,value:r,prefix:u,op:i})=>{let o=`${u}${e}${n}`,s=Ua.format(r,t);return tl({name:o,view:`${"+"===i&&r.lt(0)?"":i}${s}`,value:r,fmt:t})};function s(e,{A:t,fmt:n}){let r=[],u=(e,u,i,s)=>{r.push(o({A:t,fmt:n,n:e,value:u,prefix:i,op:s}))};for(let t=1;t<e.length;t++){let n=e[t].value.minus(e[t-1].value),r=e[t].value.div(e[t-1].value),i=e[t-1].value.div(e[t].value);u(t,n,"+","+"),u(t,r,"*","xx"),u(t,i,"/","-:")}return r}function a({template:e,vars:t,variate:n=!1}){let r=e;return t.forEach((e=>r=e.toUniqueName(r))),t.forEach((e=>r=e.toView({str:r,variate:n}))),r}let l=e.problemId,c=function(){let e=Xe(n.numOfLines),t=u.get("formulas");return t&&(e=Ja(t).all().map((e=>e-1)),console.log("Filtering formulas to ",e)),Xe(n.numOfLines).filter((t=>e.includes(t)))}(),f=function(e){let t=new Map;for(let r of e){let e=n.at("formula",r).splitTrim("|")[1]??"default",u=t.get(e)??[];u.push(r),t.set(e,u)}let r=lt([...t.keys()]);return t.get(r)}(c);xe(f.length>0,"Failed to group formulas in definition");let d=function(t){return t.map((t=>Ka.makeFormula({args:n[t],options:e.options,genLnNo:i,nCount:e.nCount})))}(f),p=function(e){let t=e.map((e=>{let t=e.makeSequence(),n=e.makeVariables();return{formula:e,seq:t,vars:n,diffs:s(t,e)}})),n=t[0].seq.map(((e,n)=>t.map((e=>e.seq[n])))).flat(),r=Ua.parse(t[0].formula.fmt,...t.map((e=>e.formula.fmt))),u=s(n,{A:"",fmt:r}),i=function(e,{A:t,fmt:n}){let r=[],u=(e,u,i,s)=>{r.push(o({A:t,fmt:n,n:e,value:u,prefix:i,op:s}))},i=e.filter((e=>e.name.startsWith("+")));for(let e=1;e<i.length;e++){let t=i[e].value.minus(i[e-1].value),n=i[e].value.div(i[e-1].value);u(e+1,t,"++","+"),u(e+1,n,"+*","xx")}return r}(u,{A:"",fmt:r});return u.concat(i,...t.map((e=>[e.seq,e.vars,e.diffs])).flat()).sort(((e,t)=>t.name.length-e.name.length))}(d),h=function(t){xe(e.answers.count>0,"No answers in definition");let n=e.answers.all().filter((e=>e.trim().length>0)).map(((e,n)=>({isRight:0==n,value:a({template:e,vars:t,variate:!0})}))).removeDuplicates(((e,t)=>e.value===t.value)),[r,...u]=n;return[r,...gt(u).take(3)]}(p),g=function(e,t){let n=r.map((t=>t.map((t=>a({template:t,vars:e})))));return n}(p),D=e.settings;return{problemId:l,content:n,settings:D,view:g,answers:h,options:u}}function il({row:e,col:t,content:n,canBeQuestion:r=!1,stateNo:u,options:i}){let o=`${String.fromCharCode(65+t)}${e+1}`,s=function(e){return e?e.includes("|")?e.split("|"):[e,""]:["",""]}(n);return s[0]=function(e){if(!e.includes("?"))return e;let[t,n]=e.split(":");return r?`?${n?`:${n}`:""}`:e.replace("?","")}(s[0]),s[1]=s[1].replace("?",""),{name:o,states:s,stateNo:u,options:i}}function ol(e){let t=we(0),n=e.view,r=e.options;let u=function(){let[u,i]=[n.length,n[0].length],o=[],s=e.content.formula.includes("lambda");for(let e=0;e<u;e++){let u=[];for(let o=0;o<i;o++){let i=n[e][o]??"";u.push(il({row:e,col:o,content:i,stateNo:t,canBeQuestion:s,options:r}))}o.push(u)}return o}(),i=gt(e.answers.map((e=>({value:e.value,isRight:e.isRight,isClicked:we(!1)}))));return{stateNo:t,view:n,sheet:u,answers:i,options:r}}function sl(e){let t,n,r,u,i,o=e[4](e[2])+"";return{c(){t=w("span"),n=y(o),N(t,"class",r="w-full h-full text-center "+e[0]+" "+e[1]+" svelte-1hcdu93"),M(t,"grid-area",e[5])},m(r,o){C(r,t,o),m(t,n),u||(i=B(t,"click",e[11]),u=!0)},p(e,u){4&u&&o!==(o=e[4](e[2])+"")&&k(n,o),3&u&&r!==(r="w-full h-full text-center "+e[0]+" "+e[1]+" svelte-1hcdu93")&&N(t,"class",r)},d(e){e&&F(t),u=!1,i()}}}function al(t){let n,r=t[3],u=sl(t);return{c(){u.c(),n=x()},m(e,t){u.m(e,t),C(e,n,t)},p(e,[t]){8&t&&o(r,r=e[3])?(u.d(1),u=sl(e),u.c(),u.m(n.parentNode,n)):u.p(e,t)},i:e,o:e,d(e){e&&F(n),u.d(e)}}}function ll(e,t,n){let r,u,i,o,s,l;function c(e){if(!e)return"";const t="__//__";e=e.replaceAll("-:",t);let[n,r]=e.split(":");return n=n.replaceAll(t,"-:"),n}let{cell:f}=t,{name:d,states:p,stateNo:h,options:g}=f;a(e,h,(e=>n(10,s=e)));let D=we({});a(e,D,(e=>n(3,l=e)));let m=g.get("text-seq")??"text-xl";return e.$$set=e=>{"cell"in e&&n(8,f=e.cell)},e.$$.update=()=>{1024&e.$$.dirty&&n(9,r=p[s]??""),512&e.$$.dirty&&n(2,u=c(r)),512&e.$$.dirty&&n(1,i=function(e,t){let n=e.split(":")[1];do{if(!n)break;if(n.includes("g"))return"bg-green-100";if(n.includes("y"))return"bg-yellow-100";if(n.includes("r"))return"bg-red-100";if(n.includes("b"))return"bg-blue-100";if(n.includes("w"))return"bg-white"}while(0);return t}(r,"bg-white")),512&e.$$.dirty&&n(0,o=function(e,t){let n=(e=e.replaceAll("-:","__//__")).split(":")[1],r=g.get("text-diff")??"text-xs";do{if(!n)break;if(n.includes("1"))return r;if(n.includes("2"))return r}while(0);return t}(r,m)),1024&e.$$.dirty&&function(e,t){c(e[0])!==c(e[1])&&D.set({})}(p)},[o,i,u,l,e=>e.length>0?"`"+e+"`":"",d,h,D,f,r,s,function(t){H.call(this,e,t)}]}Ka.registerFactory("h-table",rl),Ka.registerFactory("v-table",rl),Ka.registerFactory("lambda",(({args:e,genLnNo:t,options:n})=>{let r=e.at("lambda"),u=e.atLnNo(["x0","y0","y1","y2","y3"],t),i=Ua.parse(u),[o,s,a,l,c]=e.rand(["x0","y0","y1","y2","y3"],t),f=function({args:e,options:t,fmt:n}){function r(){let t=e.v2d("b");return[t,Ua.format(t,n)]}function u(){let t=e.rand("b"),r=t.lt(0)?"-":"+",u=Ua.format(t.abs(),n);return[t,`${r} ${u}`]}let i=function(){let e="as-is";switch(t.get("how")){case"colored":e="colored";break;case"squares":e="squares"}return e}(),o="squares"===i?e=>"color(green)(square)":"colored"===i?e=>`color(green)(${e})`:e=>e,s="squares"===i?e=>"color(red)(square)":"colored"===i?e=>`color(red)(${e})`:e=>e,a={"(x,y)=>x+y":()=>({apply:(e,t)=>e.add(t),how:(e,t)=>`${o(e)} + ${s(t)}`}),"(x,y)=>x-y":()=>({apply:(e,t)=>e.minus(t),how:(e,t)=>`${o(e)} - ${s(t)}`}),"(x,y)=>y-x":()=>({apply:(e,t)=>t.minus(e),how:(e,t)=>`${s(t)} - ${o(e)}`}),"(x,y)=>x*y":()=>({apply:(e,t)=>e.mul(t),how:(e,t)=>`${o(e)} xx ${s(t)}`}),"(x,y)=>x/y":()=>({apply:(e,t)=>e.div(t),how:(e,t)=>`${o(e)} -: ${s(t)}`}),"(x,y)=>y/x":()=>({apply:(e,t)=>t.div(e),how:(e,t)=>`${s(t)} -: ${o(e)}`}),"(x,y)=>x+y+b":()=>{let[e,t]=u();return{apply:(t,n)=>t.add(n).plus(e),how:(e,n)=>`${o(e)} + ${s(n)} ${t}`}},"(x,y)=>x-y+b":()=>{let[e,t]=u();return{apply:(t,n)=>t.minus(n).plus(e),how:(e,n)=>`${o(e)} - ${s(n)} ${t}`}},"(x,y)=>y-x+b":()=>{let[e,t]=u();return{apply:(t,n)=>n.minus(t).plus(e),how:(e,n)=>`${s(n)} - ${o(e)} ${t}`}},"(x,y)=>(x+y)*b":()=>{let[e,t]=r();return{apply:(t,n)=>t.plus(n).mul(e),how:(e,n)=>`(${o(e)} + ${s(n)}) xx ${t}`}},"(x,y)=>(x-y)/b":()=>{let[e,t]=r();return{apply:(t,n)=>t.minus(n).div(e),how:(e,n)=>`(${o(e)} - ${s(n)}) -: ${t}`}},"(x,y)=>(y-x)/b":()=>{let[e,t]=r();return{apply:(t,n)=>n.minus(t).div(e),how:(e,n)=>`(${s(n)} - ${o(e)}) -: ${t}`}},"(x,y)=>(x*y)+b":()=>{let[e,t]=u();return{apply:(t,n)=>t.mul(n).plus(e),how:(e,n)=>`(${o(e)} xx ${s(n)}) ${t}`}},"(x,y)=>(y-x)*b":()=>{let[e,t]=r();return{apply:(t,n)=>n.minus(t).mul(e),how:(e,n)=>`(${s(n)} - ${o(e)}) xx ${t}`}}};function l(e){let t=a[e];return xe(t,`Can't find lambda definition for '${e}'`),t()}return{fromStr:l,get:e=>l(e)}}({args:e,options:n,fmt:i}),d=Ee.onerror((()=>f.fromStr(r)),(e=>ye(e,{def:r,_x0y0:u,fmt:i}))),p=d.apply(o,s),h=d.apply(p,a),g=d.apply(h,l),D=d.apply(g,c),m=(e,t)=>tl({name:t,view:Ua.format(e,i),value:e,fmt:i}),$=(e,t,n)=>{let r=`how${e}`,[u,o]=Ua.formats([t,n],i);return tl({name:r,view:d.how(u,o),value:t,fmt:i})};return{A:"",fmt:i,makeSequence:function(){return[m(o,"x0"),m(p,"x1"),m(h,"x2"),m(g,"x3"),m(D,"x4"),m(s,"y0"),m(a,"y1"),m(l,"y2"),m(c,"y3")]},makeVariables:function(){return[$(1,o,s),$(2,p,a),$(3,h,l),$(4,g,c)]}}}));class cl extends $e{constructor(e){super(),me(this,e,ll,al,o,{cell:8})}}function fl(e,t,n){const r=e.slice();return r[6]=t[n],r}function dl(e,t,n){const r=e.slice();return r[9]=t[n],r}function pl(t){let n,r;return n=new cl({props:{cell:t[9]}}),n.$on("click",t[4]),{c(){he(n.$$.fragment)},m(e,t){ge(n,e,t),r=!0},p:e,i(e){r||(ae(n.$$.fragment,e),r=!0)},o(e){le(n.$$.fragment,e),r=!1},d(e){De(n,e)}}}function hl(e){let t,n,r=e[6],u=[];for(let t=0;t<r.length;t+=1)u[t]=pl(dl(e,r,t));const i=e=>le(u[e],1,1,(()=>{u[e]=null}));return{c(){for(let e=0;e<u.length;e+=1)u[e].c();t=x()},m(e,r){for(let t=0;t<u.length;t+=1)u[t].m(e,r);C(e,t,r),n=!0},p(e,n){if(2&n){let o;for(r=e[6],o=0;o<r.length;o+=1){const i=dl(e,r,o);u[o]?(u[o].p(i,n),ae(u[o],1)):(u[o]=pl(i),u[o].c(),ae(u[o],1),u[o].m(t.parentNode,t))}for(oe(),o=r.length;o<u.length;o+=1)i(o);se()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ae(u[e]);n=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)le(u[e]);n=!1},d(e){A(u,e),e&&F(t)}}}function gl(e){let t,n,r=e[1],u=[];for(let t=0;t<r.length;t+=1)u[t]=hl(fl(e,r,t));const i=e=>le(u[e],1,1,(()=>{u[e]=null}));return{c(){for(let e=0;e<u.length;e+=1)u[e].c();t=x()},m(e,r){for(let t=0;t<u.length;t+=1)u[t].m(e,r);C(e,t,r),n=!0},p(e,n){if(2&n){let o;for(r=e[1],o=0;o<r.length;o+=1){const i=fl(e,r,o);u[o]?(u[o].p(i,n),ae(u[o],1)):(u[o]=hl(i),u[o].c(),ae(u[o],1),u[o].m(t.parentNode,t))}for(oe(),o=r.length;o<u.length;o+=1)i(o);se()}},i(e){if(!n){for(let e=0;e<r.length;e+=1)ae(u[e]);n=!0}},o(e){u=u.filter(Boolean);for(let e=0;e<u.length;e+=1)le(u[e]);n=!1},d(e){A(u,e),e&&F(t)}}}function Dl(e){let t,n;return t=new Ie({props:{layout:e[2],ga:e[0],bgColor:"bg-gray-100",clazz:"border border-gray-100",style:"grid-gap: 1px;",$$slots:{default:[gl]},$$scope:{ctx:e}}}),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,[n]){const r={};1&n&&(r.ga=e[0]),4096&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function ml(e,t,n){let{ga:r}=t,{store:u}=t,{sheet:i}=u;let o=function(){let e=[],t="",n="",r="";return i.forEach(((n,u)=>{n.forEach((t=>{e[u]||(e[u]=""),e[u]+=`${t.name} `})),r+="1fr ",t+=`"${e[u]}" `})),i.length>0&&i[0].forEach((e=>n+="1fr ")),{areas:t,cols:n,rows:r}}();return e.$$set=e=>{"ga"in e&&n(0,r=e.ga),"store"in e&&n(3,u=e.store)},[r,i,o,u,function(t){H.call(this,e,t)}]}class $l extends $e{constructor(e){super(),me(this,e,ml,Dl,o,{ga:0,store:3})}}function vl(t){let n,r,i,o,s,a;return{c(){n=w("button"),r=y("`"),i=y(t[2]),o=y("`"),N(n,"class",t[1]),M(n,"grid-area",t[0])},m(e,u){C(e,n,u),m(n,r),m(n,i),m(n,o),s||(a=[f(xt.call(null,n)),f(Bt.call(null,n)),B(n,"click",t[6])],s=!0)},p(e,[t]){2&t&&N(n,"class",e[1]),1&t&&M(n,"grid-area",e[0])},i:e,o:e,d(e){e&&F(n),s=!1,u(a)}}}function Cl(e,t,n){let r,u,{ga:i}=t,{store:o}=t,{value:s,isClicked:l,isRight:c}=o;return a(e,l,(e=>n(5,u=e))),e.$$set=e=>{"ga"in e&&n(0,i=e.ga),"store"in e&&n(4,o=e.store)},e.$$.update=()=>{32&e.$$.dirty&&n(1,r=u?c?"bg-green-200":"bg-red-200":"bg-gray-100")},[i,r,s,l,o,u,function(t){H.call(this,e,t)}]}class Fl extends $e{constructor(e){super(),me(this,e,Cl,vl,o,{ga:0,store:4})}}function Al(e,t,n){const r=e.slice();return r[26]=t[n],r[28]=n,r}function wl(e){let t,n;return t=new Fl({props:{store:e[26],ga:`a${e[28]}`}}),t.$on("click",(function(){return e[13](e[28])})),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(n,r){e=n;const u={};1&r&&(u.store=e[26]),t.$set(u)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function El(e){let t,n,r,u;t=new $l({props:{ga:"sh",store:e[0]}}),t.$on("click",e[12]);let i=e[0].answers,o=[];for(let t=0;t<i.length;t+=1)o[t]=wl(Al(e,i,t));const s=e=>le(o[e],1,1,(()=>{o[e]=null}));return{c(){he(t.$$.fragment),n=b();for(let e=0;e<o.length;e+=1)o[e].c();r=x()},m(e,i){ge(t,e,i),C(e,n,i);for(let t=0;t<o.length;t+=1)o[t].m(e,i);C(e,r,i),u=!0},p(e,n){const u={};if(1&n&&(u.store=e[0]),t.$set(u),513&n){let t;for(i=e[0].answers,t=0;t<i.length;t+=1){const u=Al(e,i,t);o[t]?(o[t].p(u,n),ae(o[t],1)):(o[t]=wl(u),o[t].c(),ae(o[t],1),o[t].m(r.parentNode,r))}for(oe(),t=i.length;t<o.length;t+=1)s(t);se()}},i(e){if(!u){ae(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)ae(o[e]);u=!0}},o(e){le(t.$$.fragment,e),o=o.filter(Boolean);for(let e=0;e<o.length;e+=1)le(o[e]);u=!1},d(e){De(t,e),e&&F(n),A(o,e),e&&F(r)}}}function yl(t){let n,r,u,i,s,a,l,c=t[0];n=new Un({props:{}}),t[11](n),u=new Ra({props:{ga:"prg",store:t[5]}});let f=El(t),d=t[4]&&function(e){let t,n,r={ga:"tm",seconds:e[3].settings.timer,onExpiration:e[14]};return t=new qo({props:r}),e[15](t),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,n){t.$set({})},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(n){e[15](null),De(t,n)}}}(t);return{c(){he(n.$$.fragment),r=b(),he(u.$$.fragment),i=b(),f.c(),s=b(),d&&d.c(),a=x()},m(e,t){ge(n,e,t),C(e,r,t),ge(u,e,t),C(e,i,t),f.m(e,t),C(e,s,t),d&&d.m(e,t),C(e,a,t),l=!0},p(t,r){n.$set({}),1&r&&o(c,c=t[0])?(oe(),le(f,1,1,e),se(),f=El(t),f.c(),ae(f,1),f.m(s.parentNode,s)):f.p(t,r),t[4]&&d.p(t,r)},i(e){l||(ae(n.$$.fragment,e),ae(u.$$.fragment,e),ae(f),ae(d),l=!0)},o(e){le(n.$$.fragment,e),le(u.$$.fragment,e),le(f),le(d),l=!1},d(e){t[11](null),De(n,e),e&&F(r),De(u,e),e&&F(i),f.d(e),e&&F(s),d&&d.d(e),e&&F(a)}}}function bl(e){let t,n;return t=new Ie({props:{layout:e[10],$$slots:{default:[yl]},$$scope:{ctx:e}}}),t.$on("click",e[16]),{c(){he(t.$$.fragment)},m(e,r){ge(t,e,r),n=!0},p(e,[n]){const r={};536870919&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){n||(ae(t.$$.fragment,e),n=!0)},o(e){le(t.$$.fragment,e),n=!1},d(e){De(t,e)}}}function xl(e,t,n){let r,u,i,o=!1,s=!1;V((()=>{Ui(1e3)}));let a=Ee.onerror((()=>Qa()),(e=>ye(e))),l=Ee.onerror((()=>ul(a)),(e=>ye(e))),c=Ee.onerror((()=>ol(l)),(e=>ye(e))),f=a.settings.timer>0,d=function({startFrom:e,doneCount:t,onDone:n}){let r=e??0,u=t;function i(e){}let o=i,s=i;function a(){r===u&&n()}return{value:Ae(r,(e=>(o=e,()=>o=i))),max:Ae(u,(e=>(s=e,()=>s=i))),rightClick:function(){r===u&&s(++u),o(++r),a()},wrongClick:function(){s(u+=2),a()},addWork:function(e=1){s(u+=e),a()}}}({doneCount:l.settings.rounds,onDone:()=>(u.play(),void(s=!0))});function p(){d.addWork(),i.restart()}function h(){o&&m()}function g(){l=ul(a),n(0,c=ol(l)),o=!1,r.set(0),s&&d.addWork(),Ui(200)}function D(){o&&g()}function m(){r.update((e=>0===e?1:0)),Ui(100)}function $(e){o?g():(c.answers[e].isRight?d.rightClick():d.wrongClick(),o=!0,c.answers.forEach(((e,t)=>e.isClicked.set(c.answers[t].isRight))),c.answers[e].isClicked.set(!0),m())}let v={areas:'\n            "prg  prg  prg"\n            "sh   sh   sh "\n            "a0    .   a1 "\n            "a2    .   a3 "\n            "tm   tm   tm "\n        ',cols:"2fr 1fr 2fr",rows:"10px 10fr 2fr 2fr 10px"};return e.$$.update=()=>{1&e.$$.dirty&&(r=c.stateNo)},[c,u,i,a,f,d,p,h,D,$,v,function(e){j[e?"unshift":"push"]((()=>{u=e,n(1,u)}))},()=>h(),e=>$(e),()=>p(),function(e){j[e?"unshift":"push"]((()=>{i=e,n(2,i)}))},()=>D()]}class Bl extends $e{constructor(e){super(),me(this,e,xl,bl,o,{})}}function Nl(e){let t,n,r,u,i,o,s;var a=e[0]();return a&&(n=q(a,{})),u=new Re({props:{ga:"pwrd",text:"Powered by gebemot.online"}}),o=new Te({props:{ga:"ver",v:"0.31.9"}}),{c(){t=w("div"),n&&he(n.$$.fragment),r=b(),he(u.$$.fragment),i=b(),he(o.$$.fragment),N(t,"class","w-full h-full"),M(t,"grid-area","game")},m(e,a){C(e,t,a),n&&ge(n,t,null),C(e,r,a),ge(u,e,a),C(e,i,a),ge(o,e,a),s=!0},p(e,r){if(a!==(a=e[0]())){if(n){oe();const e=n;le(e.$$.fragment,1,0,(()=>{De(e,1)})),se()}a?(n=q(a,{}),he(n.$$.fragment),ae(n.$$.fragment,1),ge(n,t,null)):n=null}},i(e){s||(n&&ae(n.$$.fragment,e),ae(u.$$.fragment,e),ae(o.$$.fragment,e),s=!0)},o(e){n&&le(n.$$.fragment,e),le(u.$$.fragment,e),le(o.$$.fragment,e),s=!1},d(e){e&&F(t),n&&De(n),e&&F(r),De(u,e),e&&F(i),De(o,e)}}}function kl(e){let t,n,r,u;return t=new Ie({props:{layout:e[1],$$slots:{default:[Nl]},$$scope:{ctx:e}}}),r=new Se({}),{c(){he(t.$$.fragment),n=b(),he(r.$$.fragment)},m(e,i){ge(t,e,i),C(e,n,i),ge(r,e,i),u=!0},p(e,[n]){const r={};4&n&&(r.$$scope={dirty:n,ctx:e}),t.$set(r)},i(e){u||(ae(t.$$.fragment,e),ae(r.$$.fragment,e),u=!0)},o(e){le(t.$$.fragment,e),le(r.$$.fragment,e),u=!1},d(e){De(t,e),e&&F(n),De(r,e)}}}function Ml(e){return V((()=>{nt.hideLoader(),Je((async()=>{await We(2e3),rt=!0,it()}))})),[function(){try{let e=nt.getConfig();switch(Ft.buildMp3Library("assets",e.soundOn),e.game){case"plus-over":case"mul-div":return Mr;case"gcd-lcm":return ru;case"zero":return wo;case"equ-abc":return Cs;case"fr-pairs":return Vs;case"w-problem":return Ta;case"sequence":return Bl;default:return Ee.error(`Unknown game type: '${e.game}'`,(e=>ye(e))),Ce}}catch(e){Ee.error("Failed to loadGame",e,(e=>ye(e)))}},{areas:'\n            "game  game  game  game"\n            "pwrd  pwrd  .     ver"\n        ',cols:"1fr 1fr 1ft 1fr",rows:"98fr 2fr"}]}return new class extends $e{constructor(e){super(),me(this,e,Ml,kl,o,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
